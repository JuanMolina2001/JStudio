(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))p(g);new MutationObserver(g=>{for(const x of g)if(x.type==="childList")for(const k of x.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&p(k)}).observe(document,{childList:!0,subtree:!0});function c(g){const x={};return g.integrity&&(x.integrity=g.integrity),g.referrerPolicy&&(x.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?x.credentials="include":g.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function p(g){if(g.ep)return;g.ep=!0;const x=c(g);fetch(g.href,x)}})();var nt,Y,Vi,Ae,pi,Gi,Ft,Jt,jt,Wt,Ji,tt={},Xi=[],Zr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,wt=Array.isArray;function ge(e,r){for(var c in r)e[c]=r[c];return e}function Yi(e){var r=e.parentNode;r&&r.removeChild(e)}function ee(e,r,c){var p,g,x,k={};for(x in r)x=="key"?p=r[x]:x=="ref"?g=r[x]:k[x]=r[x];if(arguments.length>2&&(k.children=arguments.length>3?nt.call(arguments,2):c),typeof e=="function"&&e.defaultProps!=null)for(x in e.defaultProps)k[x]===void 0&&(k[x]=e.defaultProps[x]);return Ze(e,k,p,g,null)}function Ze(e,r,c,p,g){var x={type:e,props:r,key:c,ref:p,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:g??++Vi,__i:-1,__u:0};return g==null&&Y.vnode!=null&&Y.vnode(x),x}function Zi(){return{current:null}}function de(e){return e.children}function fe(e,r){this.props=e,this.context=r}function Oe(e,r){if(r==null)return e.__?Oe(e.__,e.__i+1):null;for(var c;r<e.__k.length;r++)if((c=e.__k[r])!=null&&c.__e!=null)return c.__e;return typeof e.type=="function"?Oe(e):null}function Qi(e){var r,c;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((c=e.__k[r])!=null&&c.__e!=null){e.__e=e.__c.base=c.__e;break}return Qi(e)}}function $t(e){(!e.__d&&(e.__d=!0)&&Ae.push(e)&&!mt.__r++||pi!==Y.debounceRendering)&&((pi=Y.debounceRendering)||Gi)(mt)}function mt(){var e,r,c,p,g,x,k,i;for(Ae.sort(Ft);e=Ae.shift();)e.__d&&(r=Ae.length,p=void 0,x=(g=(c=e).__v).__e,k=[],i=[],c.__P&&((p=ge({},g)).__v=g.__v+1,Y.vnode&&Y.vnode(p),Xt(c.__P,p,g,c.__n,c.__P.namespaceURI,32&g.__u?[x]:null,k,x??Oe(g),!!(32&g.__u),i),p.__v=g.__v,p.__.__k[p.__i]=p,ir(k,p,i),p.__e!=x&&Qi(p)),Ae.length>r&&Ae.sort(Ft));mt.__r=0}function er(e,r,c,p,g,x,k,i,l,h,_){var a,f,m,y,u,s=p&&p.__k||Xi,o=r.length;for(c.__d=l,Qr(c,r,s),l=c.__d,a=0;a<o;a++)(m=c.__k[a])!=null&&typeof m!="boolean"&&typeof m!="function"&&(f=m.__i===-1?tt:s[m.__i]||tt,m.__i=a,Xt(e,m,f,g,x,k,i,l,h,_),y=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&Yt(f.ref,null,m),_.push(m.ref,m.__c||y,m)),u==null&&y!=null&&(u=y),65536&m.__u||f.__k===m.__k?(l&&!l.isConnected&&(l=Oe(f)),l=tr(m,l,e)):typeof m.type=="function"&&m.__d!==void 0?l=m.__d:y&&(l=y.nextSibling),m.__d=void 0,m.__u&=-196609);c.__d=l,c.__e=u}function Qr(e,r,c){var p,g,x,k,i,l=r.length,h=c.length,_=h,a=0;for(e.__k=[],p=0;p<l;p++)k=p+a,(g=e.__k[p]=(g=r[p])==null||typeof g=="boolean"||typeof g=="function"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"||g.constructor==String?Ze(null,g,null,null,null):wt(g)?Ze(de,{children:g},null,null,null):g.constructor===void 0&&g.__b>0?Ze(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null?(g.__=e,g.__b=e.__b+1,i=es(g,c,k,_),g.__i=i,x=null,i!==-1&&(_--,(x=c[i])&&(x.__u|=131072)),x==null||x.__v===null?(i==-1&&a--,typeof g.type!="function"&&(g.__u|=65536)):i!==k&&(i===k+1?a++:i>k?_>l-k?a+=i-k:a--:i<k?i==k-1&&(a=i-k):a=0,i!==p+a&&(g.__u|=65536))):(x=c[k])&&x.key==null&&x.__e&&!(131072&x.__u)&&(x.__e==e.__d&&(e.__d=Oe(x)),Nt(x,x,!1),c[k]=null,_--);if(_)for(p=0;p<h;p++)(x=c[p])!=null&&!(131072&x.__u)&&(x.__e==e.__d&&(e.__d=Oe(x)),Nt(x,x))}function tr(e,r,c){var p,g;if(typeof e.type=="function"){for(p=e.__k,g=0;p&&g<p.length;g++)p[g]&&(p[g].__=e,r=tr(p[g],r,c));return r}e.__e!=r&&(c.insertBefore(e.__e,r||null),r=e.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType===8);return r}function Se(e,r){return r=r||[],e==null||typeof e=="boolean"||(wt(e)?e.some(function(c){Se(c,r)}):r.push(e)),r}function es(e,r,c,p){var g=e.key,x=e.type,k=c-1,i=c+1,l=r[c];if(l===null||l&&g==l.key&&x===l.type&&!(131072&l.__u))return c;if(p>(l!=null&&!(131072&l.__u)?1:0))for(;k>=0||i<r.length;){if(k>=0){if((l=r[k])&&!(131072&l.__u)&&g==l.key&&x===l.type)return k;k--}if(i<r.length){if((l=r[i])&&!(131072&l.__u)&&g==l.key&&x===l.type)return i;i++}}return-1}function _i(e,r,c){r[0]==="-"?e.setProperty(r,c??""):e[r]=c==null?"":typeof c!="number"||Zr.test(r)?c:c+"px"}function ut(e,r,c,p,g){var x;e:if(r==="style")if(typeof c=="string")e.style.cssText=c;else{if(typeof p=="string"&&(e.style.cssText=p=""),p)for(r in p)c&&r in c||_i(e.style,r,"");if(c)for(r in c)p&&c[r]===p[r]||_i(e.style,r,c[r])}else if(r[0]==="o"&&r[1]==="n")x=r!==(r=r.replace(/(PointerCapture)$|Capture$/i,"$1")),r=r.toLowerCase()in e||r==="onFocusOut"||r==="onFocusIn"?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+x]=c,c?p?c.u=p.u:(c.u=Jt,e.addEventListener(r,x?Wt:jt,x)):e.removeEventListener(r,x?Wt:jt,x);else{if(g=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r in e)try{e[r]=c??"";break e}catch{}typeof c=="function"||(c==null||c===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,c))}}function fi(e){return function(r){if(this.l){var c=this.l[r.type+e];if(r.t==null)r.t=Jt++;else if(r.t<c.u)return;return c(Y.event?Y.event(r):r)}}}function Xt(e,r,c,p,g,x,k,i,l,h){var _,a,f,m,y,u,s,o,t,n,d,S,b,w,v,C=r.type;if(r.constructor!==void 0)return null;128&c.__u&&(l=!!(32&c.__u),x=[i=r.__e=c.__e]),(_=Y.__b)&&_(r);e:if(typeof C=="function")try{if(o=r.props,t=(_=C.contextType)&&p[_.__c],n=_?t?t.props.value:_.__:p,c.__c?s=(a=r.__c=c.__c).__=a.__E:("prototype"in C&&C.prototype.render?r.__c=a=new C(o,n):(r.__c=a=new fe(o,n),a.constructor=C,a.render=is),t&&t.sub(a),a.props=o,a.state||(a.state={}),a.context=n,a.__n=p,f=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),C.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=ge({},a.__s)),ge(a.__s,C.getDerivedStateFromProps(o,a.__s))),m=a.props,y=a.state,a.__v=r,f)C.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(C.getDerivedStateFromProps==null&&o!==m&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(o,n),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(o,a.__s,n)===!1||r.__v===c.__v)){for(r.__v!==c.__v&&(a.props=o,a.state=a.__s,a.__d=!1),r.__e=c.__e,r.__k=c.__k,r.__k.forEach(function(R){R&&(R.__=r)}),d=0;d<a._sb.length;d++)a.__h.push(a._sb[d]);a._sb=[],a.__h.length&&k.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(o,a.__s,n),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(m,y,u)})}if(a.context=n,a.props=o,a.__P=e,a.__e=!1,S=Y.__r,b=0,"prototype"in C&&C.prototype.render){for(a.state=a.__s,a.__d=!1,S&&S(r),_=a.render(a.props,a.state,a.context),w=0;w<a._sb.length;w++)a.__h.push(a._sb[w]);a._sb=[]}else do a.__d=!1,S&&S(r),_=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++b<25);a.state=a.__s,a.getChildContext!=null&&(p=ge(ge({},p),a.getChildContext())),f||a.getSnapshotBeforeUpdate==null||(u=a.getSnapshotBeforeUpdate(m,y)),er(e,wt(v=_!=null&&_.type===de&&_.key==null?_.props.children:_)?v:[v],r,c,p,g,x,k,i,l,h),a.base=r.__e,r.__u&=-161,a.__h.length&&k.push(a),s&&(a.__E=a.__=null)}catch(R){r.__v=null,l||x!=null?(r.__e=i,r.__u|=l?160:32,x[x.indexOf(i)]=null):(r.__e=c.__e,r.__k=c.__k),Y.__e(R,r,c)}else x==null&&r.__v===c.__v?(r.__k=c.__k,r.__e=c.__e):r.__e=ts(c.__e,r,c,p,g,x,k,l,h);(_=Y.diffed)&&_(r)}function ir(e,r,c){r.__d=void 0;for(var p=0;p<c.length;p++)Yt(c[p],c[++p],c[++p]);Y.__c&&Y.__c(r,e),e.some(function(g){try{e=g.__h,g.__h=[],e.some(function(x){x.call(g)})}catch(x){Y.__e(x,g.__v)}})}function ts(e,r,c,p,g,x,k,i,l){var h,_,a,f,m,y,u,s=c.props,o=r.props,t=r.type;if(t==="svg"?g="http://www.w3.org/2000/svg":t==="math"?g="http://www.w3.org/1998/Math/MathML":g||(g="http://www.w3.org/1999/xhtml"),x!=null){for(h=0;h<x.length;h++)if((m=x[h])&&"setAttribute"in m==!!t&&(t?m.localName===t:m.nodeType===3)){e=m,x[h]=null;break}}if(e==null){if(t===null)return document.createTextNode(o);e=document.createElementNS(g,t,o.is&&o),x=null,i=!1}if(t===null)s===o||i&&e.data===o||(e.data=o);else{if(x=x&&nt.call(e.childNodes),s=c.props||tt,!i&&x!=null)for(s={},h=0;h<e.attributes.length;h++)s[(m=e.attributes[h]).name]=m.value;for(h in s)if(m=s[h],h!="children"){if(h=="dangerouslySetInnerHTML")a=m;else if(h!=="key"&&!(h in o)){if(h=="value"&&"defaultValue"in o||h=="checked"&&"defaultChecked"in o)continue;ut(e,h,null,m,g)}}for(h in o)m=o[h],h=="children"?f=m:h=="dangerouslySetInnerHTML"?_=m:h=="value"?y=m:h=="checked"?u=m:h==="key"||i&&typeof m!="function"||s[h]===m||ut(e,h,m,s[h],g);if(_)i||a&&(_.__html===a.__html||_.__html===e.innerHTML)||(e.innerHTML=_.__html),r.__k=[];else if(a&&(e.innerHTML=""),er(e,wt(f)?f:[f],r,c,p,t==="foreignObject"?"http://www.w3.org/1999/xhtml":g,x,k,x?x[0]:c.__k&&Oe(c,0),i,l),x!=null)for(h=x.length;h--;)x[h]!=null&&Yi(x[h]);i||(h="value",y!==void 0&&(y!==e[h]||t==="progress"&&!y||t==="option"&&y!==s[h])&&ut(e,h,y,s[h],g),h="checked",u!==void 0&&u!==e[h]&&ut(e,h,u,s[h],g))}return e}function Yt(e,r,c){try{typeof e=="function"?e(r):e.current=r}catch(p){Y.__e(p,c)}}function Nt(e,r,c){var p,g;if(Y.unmount&&Y.unmount(e),(p=e.ref)&&(p.current&&p.current!==e.__e||Yt(p,null,r)),(p=e.__c)!=null){if(p.componentWillUnmount)try{p.componentWillUnmount()}catch(x){Y.__e(x,r)}p.base=p.__P=null}if(p=e.__k)for(g=0;g<p.length;g++)p[g]&&Nt(p[g],r,c||typeof e.type!="function");c||e.__e==null||Yi(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function is(e,r,c){return this.constructor(e,c)}function We(e,r,c){var p,g,x,k;Y.__&&Y.__(e,r),g=(p=typeof c=="function")?null:c&&c.__k||r.__k,x=[],k=[],Xt(r,e=(!p&&c||r).__k=ee(de,null,[e]),g||tt,tt,r.namespaceURI,!p&&c?[c]:g?null:r.firstChild?nt.call(r.childNodes):null,x,!p&&c?c:g?g.__e:r.firstChild,p,k),ir(x,e,k)}function rr(e,r){We(e,r,rr)}function rs(e,r,c){var p,g,x,k,i=ge({},e.props);for(x in e.type&&e.type.defaultProps&&(k=e.type.defaultProps),r)x=="key"?p=r[x]:x=="ref"?g=r[x]:i[x]=r[x]===void 0&&k!==void 0?k[x]:r[x];return arguments.length>2&&(i.children=arguments.length>3?nt.call(arguments,2):c),Ze(e.type,i,p||e.key,g||e.ref,null)}function ye(e,r){var c={__c:r="__cC"+Ji++,__:e,Consumer:function(p,g){return p.children(g)},Provider:function(p){var g,x;return this.getChildContext||(g=[],(x={})[r]=this,this.getChildContext=function(){return x},this.shouldComponentUpdate=function(k){this.props.value!==k.value&&g.some(function(i){i.__e=!0,$t(i)})},this.sub=function(k){g.push(k);var i=k.componentWillUnmount;k.componentWillUnmount=function(){g.splice(g.indexOf(k),1),i&&i.call(k)}}),p.children}};return c.Provider.__=c.Consumer.contextType=c}nt=Xi.slice,Y={__e:function(e,r,c,p){for(var g,x,k;r=r.__;)if((g=r.__c)&&!g.__)try{if((x=g.constructor)&&x.getDerivedStateFromError!=null&&(g.setState(x.getDerivedStateFromError(e)),k=g.__d),g.componentDidCatch!=null&&(g.componentDidCatch(e,p||{}),k=g.__d),k)return g.__E=g}catch(i){e=i}throw e}},Vi=0,fe.prototype.setState=function(e,r){var c;c=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ge({},this.state),typeof e=="function"&&(e=e(ge({},c),this.props)),e&&ge(c,e),e!=null&&this.__v&&(r&&this._sb.push(r),$t(this))},fe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),$t(this))},fe.prototype.render=de,Ae=[],Gi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ft=function(e,r){return e.__v.__b-r.__v.__b},mt.__r=0,Jt=0,jt=fi(!1),Wt=fi(!0),Ji=0;var be,Q,Bt,vi,$e=0,sr=[],ft=[],se=Y,mi=se.__b,gi=se.__r,Si=se.diffed,bi=se.__c,yi=se.unmount,wi=se.__;function Me(e,r){se.__h&&se.__h(Q,e,$e||r),$e=0;var c=Q.__H||(Q.__H={__:[],__h:[]});return e>=c.__.length&&c.__.push({__V:ft}),c.__[e]}function ce(e){return $e=1,Ct(nr,e)}function Ct(e,r,c){var p=Me(be++,2);if(p.t=e,!p.__c&&(p.__=[c?c(r):nr(void 0,r),function(i){var l=p.__N?p.__N[0]:p.__[0],h=p.t(l,i);l!==h&&(p.__N=[h,p.__[1]],p.__c.setState({}))}],p.__c=Q,!Q.u)){var g=function(i,l,h){if(!p.__c.__H)return!0;var _=p.__c.__H.__.filter(function(f){return!!f.__c});if(_.every(function(f){return!f.__N}))return!x||x.call(this,i,l,h);var a=!1;return _.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(a=!0)}}),!(!a&&p.__c.props===i)&&(!x||x.call(this,i,l,h))};Q.u=!0;var x=Q.shouldComponentUpdate,k=Q.componentWillUpdate;Q.componentWillUpdate=function(i,l,h){if(this.__e){var _=x;x=void 0,g(i,l,h),x=_}k&&k.call(this,i,l,h)},Q.shouldComponentUpdate=g}return p.__N||p.__}function ae(e,r){var c=Me(be++,3);!se.__s&&ti(c.__H,r)&&(c.__=e,c.i=r,Q.__H.__h.push(c))}function Re(e,r){var c=Me(be++,4);!se.__s&&ti(c.__H,r)&&(c.__=e,c.i=r,Q.__h.push(c))}function ie(e){return $e=5,Le(function(){return{current:e}},[])}function Zt(e,r,c){$e=6,Re(function(){return typeof e=="function"?(e(r()),function(){return e(null)}):e?(e.current=r(),function(){return e.current=null}):void 0},c==null?c:c.concat(e))}function Le(e,r){var c=Me(be++,7);return ti(c.__H,r)?(c.__V=e(),c.i=r,c.__h=e,c.__V):c.__}function me(e,r){return $e=8,Le(function(){return e},r)}function te(e){var r=Q.context[e.__c],c=Me(be++,9);return c.c=e,r?(c.__==null&&(c.__=!0,r.sub(Q)),r.props.value):e.__}function Qt(e,r){se.useDebugValue&&se.useDebugValue(r?r(e):e)}function ss(e){var r=Me(be++,10),c=ce();return r.__=e,Q.componentDidCatch||(Q.componentDidCatch=function(p,g){r.__&&r.__(p,g),c[1](p)}),[c[0],function(){c[1](void 0)}]}function ei(){var e=Me(be++,11);if(!e.__){for(var r=Q.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;var c=r.__m||(r.__m=[0,0]);e.__="P"+c[0]+"-"+c[1]++}return e.__}function ns(){for(var e;e=sr.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(vt),e.__H.__h.forEach(Ut),e.__H.__h=[]}catch(r){e.__H.__h=[],se.__e(r,e.__v)}}se.__b=function(e){Q=null,mi&&mi(e)},se.__=function(e,r){e&&r.__k&&r.__k.__m&&(e.__m=r.__k.__m),wi&&wi(e,r)},se.__r=function(e){gi&&gi(e),be=0;var r=(Q=e.__c).__H;r&&(Bt===Q?(r.__h=[],Q.__h=[],r.__.forEach(function(c){c.__N&&(c.__=c.__N),c.__V=ft,c.__N=c.i=void 0})):(r.__h.forEach(vt),r.__h.forEach(Ut),r.__h=[],be=0)),Bt=Q},se.diffed=function(e){Si&&Si(e);var r=e.__c;r&&r.__H&&(r.__H.__h.length&&(sr.push(r)!==1&&vi===se.requestAnimationFrame||((vi=se.requestAnimationFrame)||os)(ns)),r.__H.__.forEach(function(c){c.i&&(c.__H=c.i),c.__V!==ft&&(c.__=c.__V),c.i=void 0,c.__V=ft})),Bt=Q=null},se.__c=function(e,r){r.some(function(c){try{c.__h.forEach(vt),c.__h=c.__h.filter(function(p){return!p.__||Ut(p)})}catch(p){r.some(function(g){g.__h&&(g.__h=[])}),r=[],se.__e(p,c.__v)}}),bi&&bi(e,r)},se.unmount=function(e){yi&&yi(e);var r,c=e.__c;c&&c.__H&&(c.__H.__.forEach(function(p){try{vt(p)}catch(g){r=g}}),c.__H=void 0,r&&se.__e(r,c.__v))};var Ci=typeof requestAnimationFrame=="function";function os(e){var r,c=function(){clearTimeout(p),Ci&&cancelAnimationFrame(r),setTimeout(e)},p=setTimeout(c,100);Ci&&(r=requestAnimationFrame(c))}function vt(e){var r=Q,c=e.__c;typeof c=="function"&&(e.__c=void 0,c()),Q=r}function Ut(e){var r=Q;e.__c=e.__(),Q=r}function ti(e,r){return!e||e.length!==r.length||r.some(function(c,p){return c!==e[p]})}function nr(e,r){return typeof r=="function"?r(e):r}function or(e,r){for(var c in r)e[c]=r[c];return e}function zt(e,r){for(var c in e)if(c!=="__source"&&!(c in r))return!0;for(var p in r)if(p!=="__source"&&e[p]!==r[p])return!0;return!1}function gt(e,r){this.props=e,this.context=r}function ot(e,r){function c(g){var x=this.props.ref,k=x==g.ref;return!k&&x&&(x.call?x(null):x.current=null),r?!r(this.props,g)||!k:zt(this.props,g)}function p(g){return this.shouldComponentUpdate=c,ee(e,g)}return p.displayName="Memo("+(e.displayName||e.name)+")",p.prototype.isReactComponent=!0,p.__f=!0,p}(gt.prototype=new fe).isPureReactComponent=!0,gt.prototype.shouldComponentUpdate=function(e,r){return zt(this.props,e)||zt(this.state,r)};var xi=Y.__b;Y.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),xi&&xi(e)};var as=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ii(e){function r(c){var p=or({},c);return delete p.ref,e(p,c.ref||null)}return r.$$typeof=as,r.render=r,r.prototype.isReactComponent=r.__f=!0,r.displayName="ForwardRef("+(e.displayName||e.name)+")",r}var ki=function(e,r){return e==null?null:Se(Se(e).map(r))},ri={map:ki,forEach:ki,count:function(e){return e?Se(e).length:0},only:function(e){var r=Se(e);if(r.length!==1)throw"Children.only";return r[0]},toArray:Se},ls=Y.__e;Y.__e=function(e,r,c,p){if(e.then){for(var g,x=r;x=x.__;)if((g=x.__c)&&g.__c)return r.__e==null&&(r.__e=c.__e,r.__k=c.__k),g.__c(e,r)}ls(e,r,c,p)};var Ei=Y.unmount;function ar(e,r,c){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(p){typeof p.__c=="function"&&p.__c()}),e.__c.__H=null),(e=or({},e)).__c!=null&&(e.__c.__P===c&&(e.__c.__P=r),e.__c=null),e.__k=e.__k&&e.__k.map(function(p){return ar(p,r,c)})),e}function lr(e,r,c){return e&&c&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(p){return lr(p,r,c)}),e.__c&&e.__c.__P===r&&(e.__e&&c.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=c)),e}function Qe(){this.__u=0,this.t=null,this.__b=null}function cr(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function hr(e){var r,c,p;function g(x){if(r||(r=e()).then(function(k){c=k.default||k},function(k){p=k}),p)throw p;if(!c)throw r;return ee(c,x)}return g.displayName="Lazy",g.__f=!0,g}function Fe(){this.u=null,this.o=null}Y.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&32&e.__u&&(e.type=null),Ei&&Ei(e)},(Qe.prototype=new fe).__c=function(e,r){var c=r.__c,p=this;p.t==null&&(p.t=[]),p.t.push(c);var g=cr(p.__v),x=!1,k=function(){x||(x=!0,c.__R=null,g?g(i):i())};c.__R=k;var i=function(){if(!--p.__u){if(p.state.__a){var l=p.state.__a;p.__v.__k[0]=lr(l,l.__c.__P,l.__c.__O)}var h;for(p.setState({__a:p.__b=null});h=p.t.pop();)h.forceUpdate()}};p.__u++||32&r.__u||p.setState({__a:p.__b=p.__v.__k[0]}),e.then(k,k)},Qe.prototype.componentWillUnmount=function(){this.t=[]},Qe.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var c=document.createElement("div"),p=this.__v.__k[0].__c;this.__v.__k[0]=ar(this.__b,c,p.__O=p.__P)}this.__b=null}var g=r.__a&&ee(de,null,e.fallback);return g&&(g.__u&=-33),[ee(de,null,r.__a?null:e.children),g]};var Li=function(e,r,c){if(++c[1]===c[0]&&e.o.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(c=e.u;c;){for(;c.length>3;)c.pop()();if(c[1]<c[0])break;e.u=c=c[2]}};function cs(e){return this.getChildContext=function(){return e.context},e.children}function hs(e){var r=this,c=e.i;r.componentWillUnmount=function(){We(null,r.l),r.l=null,r.i=null},r.i&&r.i!==c&&r.componentWillUnmount(),r.l||(r.i=c,r.l={nodeType:1,parentNode:c,childNodes:[],appendChild:function(p){this.childNodes.push(p),r.i.appendChild(p)},insertBefore:function(p,g){this.childNodes.push(p),r.i.appendChild(p)},removeChild:function(p){this.childNodes.splice(this.childNodes.indexOf(p)>>>1,1),r.i.removeChild(p)}}),We(ee(cs,{context:r.context},e.__v),r.l)}function dr(e,r){var c=ee(hs,{__v:e,i:r});return c.containerInfo=r,c}(Fe.prototype=new fe).__a=function(e){var r=this,c=cr(r.__v),p=r.o.get(e);return p[0]++,function(g){var x=function(){r.props.revealOrder?(p.push(g),Li(r,e,p)):g()};c?c(x):x()}},Fe.prototype.render=function(e){this.u=null,this.o=new Map;var r=Se(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var c=r.length;c--;)this.o.set(r[c],this.u=[1,0,this.u]);return e.children},Fe.prototype.componentDidUpdate=Fe.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(r,c){Li(e,c,r)})};var ur=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ds=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,us=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ps=/[A-Z0-9]/g,_s=typeof document<"u",fs=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function pr(e,r,c){return r.__k==null&&(r.textContent=""),We(e,r),typeof c=="function"&&c(),e?e.__c:null}function _r(e,r,c){return rr(e,r),typeof c=="function"&&c(),e?e.__c:null}fe.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(fe.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var Ri=Y.event;function vs(){}function ms(){return this.cancelBubble}function gs(){return this.defaultPrevented}Y.event=function(e){return Ri&&(e=Ri(e)),e.persist=vs,e.isPropagationStopped=ms,e.isDefaultPrevented=gs,e.nativeEvent=e};var si,Ss={enumerable:!1,configurable:!0,get:function(){return this.class}},Di=Y.vnode;Y.vnode=function(e){typeof e.type=="string"&&function(r){var c=r.props,p=r.type,g={};for(var x in c){var k=c[x];if(!(x==="value"&&"defaultValue"in c&&k==null||_s&&x==="children"&&p==="noscript"||x==="class"||x==="className")){var i=x.toLowerCase();x==="defaultValue"&&"value"in c&&c.value==null?x="value":x==="download"&&k===!0?k="":i==="translate"&&k==="no"?k=!1:i==="ondoubleclick"?x="ondblclick":i!=="onchange"||p!=="input"&&p!=="textarea"||fs(c.type)?i==="onfocus"?x="onfocusin":i==="onblur"?x="onfocusout":us.test(x)?x=i:p.indexOf("-")===-1&&ds.test(x)?x=x.replace(ps,"-$&").toLowerCase():k===null&&(k=void 0):i=x="oninput",i==="oninput"&&g[x=i]&&(x="oninputCapture"),g[x]=k}}p=="select"&&g.multiple&&Array.isArray(g.value)&&(g.value=Se(c.children).forEach(function(l){l.props.selected=g.value.indexOf(l.props.value)!=-1})),p=="select"&&g.defaultValue!=null&&(g.value=Se(c.children).forEach(function(l){l.props.selected=g.multiple?g.defaultValue.indexOf(l.props.value)!=-1:g.defaultValue==l.props.value})),c.class&&!c.className?(g.class=c.class,Object.defineProperty(g,"className",Ss)):(c.className&&!c.class||c.class&&c.className)&&(g.class=g.className=c.className),r.props=g}(e),e.$$typeof=ur,Di&&Di(e)};var Ai=Y.__r;Y.__r=function(e){Ai&&Ai(e),si=e.__c};var Bi=Y.diffed;Y.diffed=function(e){Bi&&Bi(e);var r=e.props,c=e.__e;c!=null&&e.type==="textarea"&&"value"in r&&r.value!==c.value&&(c.value=r.value==null?"":r.value),si=null};var fr={ReactCurrentDispatcher:{current:{readContext:function(e){return si.__n[e.__c].props.value},useCallback:me,useContext:te,useDebugValue:Qt,useDeferredValue:oi,useEffect:ae,useId:ei,useImperativeHandle:Zt,useInsertionEffect:li,useLayoutEffect:Re,useMemo:Le,useReducer:Ct,useRef:ie,useState:ce,useSyncExternalStore:ci,useTransition:ai}}},bs="17.0.2";function vr(e){return ee.bind(null,e)}function Ne(e){return!!e&&e.$$typeof===ur}function mr(e){return Ne(e)&&e.type===de}function gr(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Sr(e){return Ne(e)?rs.apply(null,arguments):e}function br(e){return!!e.__k&&(We(null,e),!0)}function yr(e){return e&&(e.base||e.nodeType===1&&e)||null}var wr=function(e,r){return e(r)},Cr=function(e,r){return e(r)},xr=de;function ni(e){e()}function oi(e){return e}function ai(){return[!1,ni]}var li=Re,kr=Ne;function ci(e,r){var c=r(),p=ce({h:{__:c,v:r}}),g=p[0].h,x=p[1];return Re(function(){g.__=c,g.v=r,Ot(g)&&x({h:g})},[e,c,r]),ae(function(){return Ot(g)&&x({h:g}),e(function(){Ot(g)&&x({h:g})})},[e]),c}function Ot(e){var r,c,p=e.v,g=e.__;try{var x=p();return!((r=g)===(c=x)&&(r!==0||1/r==1/c)||r!=r&&c!=c)}catch{return!0}}var Be={useState:ce,useId:ei,useReducer:Ct,useEffect:ae,useLayoutEffect:Re,useInsertionEffect:li,useTransition:ai,useDeferredValue:oi,useSyncExternalStore:ci,startTransition:ni,useRef:ie,useImperativeHandle:Zt,useMemo:Le,useCallback:me,useContext:te,useDebugValue:Qt,version:"17.0.2",Children:ri,render:pr,hydrate:_r,unmountComponentAtNode:br,createPortal:dr,createElement:ee,createContext:ye,createFactory:vr,cloneElement:Sr,createRef:Zi,Fragment:de,isValidElement:Ne,isElement:kr,isFragment:mr,isMemo:gr,findDOMNode:yr,Component:fe,PureComponent:gt,memo:ot,forwardRef:ii,flushSync:Cr,unstable_batchedUpdates:wr,StrictMode:xr,Suspense:Qe,SuspenseList:Fe,lazy:hr,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:fr};const ys=Object.freeze(Object.defineProperty({__proto__:null,Children:ri,Component:fe,Fragment:de,PureComponent:gt,StrictMode:xr,Suspense:Qe,SuspenseList:Fe,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:fr,cloneElement:Sr,createContext:ye,createElement:ee,createFactory:vr,createPortal:dr,createRef:Zi,default:Be,findDOMNode:yr,flushSync:Cr,forwardRef:ii,hydrate:_r,isElement:kr,isFragment:mr,isMemo:gr,isValidElement:Ne,lazy:hr,memo:ot,render:pr,startTransition:ni,unmountComponentAtNode:br,unstable_batchedUpdates:wr,useCallback:me,useContext:te,useDebugValue:Qt,useDeferredValue:oi,useEffect:ae,useErrorBoundary:ss,useId:ei,useImperativeHandle:Zt,useInsertionEffect:li,useLayoutEffect:Re,useMemo:Le,useReducer:Ct,useRef:ie,useState:ce,useSyncExternalStore:ci,useTransition:ai,version:bs},Symbol.toStringTag,{value:"Module"}));/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function it(){return it=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var c=arguments[r];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(e[p]=c[p])}return e},it.apply(this,arguments)}var xe;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xe||(xe={}));const Oi="popstate";function ws(e){e===void 0&&(e={});function r(g,x){let{pathname:k="/",search:i="",hash:l=""}=Te(g.location.hash.substr(1));return!k.startsWith("/")&&!k.startsWith(".")&&(k="/"+k),qt("",{pathname:k,search:i,hash:l},x.state&&x.state.usr||null,x.state&&x.state.key||"default")}function c(g,x){let k=g.document.querySelector("base"),i="";if(k&&k.getAttribute("href")){let l=g.location.href,h=l.indexOf("#");i=h===-1?l:l.slice(0,h)}return i+"#"+(typeof x=="string"?x:St(x))}function p(g,x){hi(g.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(x)+")")}return xs(r,c,p,e)}function le(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function hi(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Cs(){return Math.random().toString(36).substr(2,8)}function Mi(e,r){return{usr:e.state,key:e.key,idx:r}}function qt(e,r,c,p){return c===void 0&&(c=null),it({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?Te(r):r,{state:c,key:r&&r.key||p||Cs()})}function St(e){let{pathname:r="/",search:c="",hash:p=""}=e;return c&&c!=="?"&&(r+=c.charAt(0)==="?"?c:"?"+c),p&&p!=="#"&&(r+=p.charAt(0)==="#"?p:"#"+p),r}function Te(e){let r={};if(e){let c=e.indexOf("#");c>=0&&(r.hash=e.substr(c),e=e.substr(0,c));let p=e.indexOf("?");p>=0&&(r.search=e.substr(p),e=e.substr(0,p)),e&&(r.pathname=e)}return r}function xs(e,r,c,p){p===void 0&&(p={});let{window:g=document.defaultView,v5Compat:x=!1}=p,k=g.history,i=xe.Pop,l=null,h=_();h==null&&(h=0,k.replaceState(it({},k.state,{idx:h}),""));function _(){return(k.state||{idx:null}).idx}function a(){i=xe.Pop;let s=_(),o=s==null?null:s-h;h=s,l&&l({action:i,location:u.location,delta:o})}function f(s,o){i=xe.Push;let t=qt(u.location,s,o);c&&c(t,s),h=_()+1;let n=Mi(t,h),d=u.createHref(t);try{k.pushState(n,"",d)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;g.location.assign(d)}x&&l&&l({action:i,location:u.location,delta:1})}function m(s,o){i=xe.Replace;let t=qt(u.location,s,o);c&&c(t,s),h=_();let n=Mi(t,h),d=u.createHref(t);k.replaceState(n,"",d),x&&l&&l({action:i,location:u.location,delta:0})}function y(s){let o=g.location.origin!=="null"?g.location.origin:g.location.href,t=typeof s=="string"?s:St(s);return t=t.replace(/ $/,"%20"),le(o,"No window.location.(origin|href) available to create URL for href: "+t),new URL(t,o)}let u={get action(){return i},get location(){return e(g,k)},listen(s){if(l)throw new Error("A history only accepts one active listener");return g.addEventListener(Oi,a),l=s,()=>{g.removeEventListener(Oi,a),l=null}},createHref(s){return r(g,s)},createURL:y,encodeLocation(s){let o=y(s);return{pathname:o.pathname,search:o.search,hash:o.hash}},push:f,replace:m,go(s){return k.go(s)}};return u}var Ti;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ti||(Ti={}));function ks(e,r,c){c===void 0&&(c="/");let p=typeof r=="string"?Te(r):r,g=di(p.pathname||"/",c);if(g==null)return null;let x=Er(e);Es(x);let k=null;for(let i=0;k==null&&i<x.length;++i){let l=Fs(g);k=Ps(x[i],l)}return k}function Er(e,r,c,p){r===void 0&&(r=[]),c===void 0&&(c=[]),p===void 0&&(p="");let g=(x,k,i)=>{let l={relativePath:i===void 0?x.path||"":i,caseSensitive:x.caseSensitive===!0,childrenIndex:k,route:x};l.relativePath.startsWith("/")&&(le(l.relativePath.startsWith(p),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+p+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(p.length));let h=ke([p,l.relativePath]),_=c.concat(l);x.children&&x.children.length>0&&(le(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Er(x.children,r,_,h)),!(x.path==null&&!x.index)&&r.push({path:h,score:Ms(h,x.index),routesMeta:_})};return e.forEach((x,k)=>{var i;if(x.path===""||!((i=x.path)!=null&&i.includes("?")))g(x,k);else for(let l of Lr(x.path))g(x,k,l)}),r}function Lr(e){let r=e.split("/");if(r.length===0)return[];let[c,...p]=r,g=c.endsWith("?"),x=c.replace(/\?$/,"");if(p.length===0)return g?[x,""]:[x];let k=Lr(p.join("/")),i=[];return i.push(...k.map(l=>l===""?x:[x,l].join("/"))),g&&i.push(...k),i.map(l=>e.startsWith("/")&&l===""?"/":l)}function Es(e){e.sort((r,c)=>r.score!==c.score?c.score-r.score:Ts(r.routesMeta.map(p=>p.childrenIndex),c.routesMeta.map(p=>p.childrenIndex)))}const Ls=/^:[\w-]+$/,Rs=3,Ds=2,As=1,Bs=10,Os=-2,Pi=e=>e==="*";function Ms(e,r){let c=e.split("/"),p=c.length;return c.some(Pi)&&(p+=Os),r&&(p+=Ds),c.filter(g=>!Pi(g)).reduce((g,x)=>g+(Ls.test(x)?Rs:x===""?As:Bs),p)}function Ts(e,r){return e.length===r.length&&e.slice(0,-1).every((p,g)=>p===r[g])?e[e.length-1]-r[r.length-1]:0}function Ps(e,r){let{routesMeta:c}=e,p={},g="/",x=[];for(let k=0;k<c.length;++k){let i=c[k],l=k===c.length-1,h=g==="/"?r:r.slice(g.length)||"/",_=Is({path:i.relativePath,caseSensitive:i.caseSensitive,end:l},h);if(!_)return null;Object.assign(p,_.params);let a=i.route;x.push({params:p,pathname:ke([g,_.pathname]),pathnameBase:Ns(ke([g,_.pathnameBase])),route:a}),_.pathnameBase!=="/"&&(g=ke([g,_.pathnameBase]))}return x}function Is(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[c,p]=Hs(e.path,e.caseSensitive,e.end),g=r.match(c);if(!g)return null;let x=g[0],k=x.replace(/(.)\/+$/,"$1"),i=g.slice(1);return{params:p.reduce((h,_,a)=>{let{paramName:f,isOptional:m}=_;if(f==="*"){let u=i[a]||"";k=x.slice(0,x.length-u.length).replace(/(.)\/+$/,"$1")}const y=i[a];return m&&!y?h[f]=void 0:h[f]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:x,pathnameBase:k,pattern:e}}function Hs(e,r,c){r===void 0&&(r=!1),c===void 0&&(c=!0),hi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let p=[],g="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(k,i,l)=>(p.push({paramName:i,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(p.push({paramName:"*"}),g+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?g+="\\/*$":e!==""&&e!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,r?void 0:"i"),p]}function Fs(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return hi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function di(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let c=r.endsWith("/")?r.length-1:r.length,p=e.charAt(c);return p&&p!=="/"?null:e.slice(c)||"/"}function js(e,r){r===void 0&&(r="/");let{pathname:c,search:p="",hash:g=""}=typeof e=="string"?Te(e):e;return{pathname:c?c.startsWith("/")?c:Ws(c,r):r,search:Us(p),hash:zs(g)}}function Ws(e,r){let c=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(g=>{g===".."?c.length>1&&c.pop():g!=="."&&c.push(g)}),c.length>1?c.join("/"):"/"}function Mt(e,r,c,p){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(p)+"].  Please separate it out to the ")+("`to."+c+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $s(e){return e.filter((r,c)=>c===0||r.route.path&&r.route.path.length>0)}function Rr(e,r){let c=$s(e);return r?c.map((p,g)=>g===e.length-1?p.pathname:p.pathnameBase):c.map(p=>p.pathnameBase)}function Dr(e,r,c,p){p===void 0&&(p=!1);let g;typeof e=="string"?g=Te(e):(g=it({},e),le(!g.pathname||!g.pathname.includes("?"),Mt("?","pathname","search",g)),le(!g.pathname||!g.pathname.includes("#"),Mt("#","pathname","hash",g)),le(!g.search||!g.search.includes("#"),Mt("#","search","hash",g)));let x=e===""||g.pathname==="",k=x?"/":g.pathname,i;if(k==null)i=c;else{let a=r.length-1;if(!p&&k.startsWith("..")){let f=k.split("/");for(;f[0]==="..";)f.shift(),a-=1;g.pathname=f.join("/")}i=a>=0?r[a]:"/"}let l=js(g,i),h=k&&k!=="/"&&k.endsWith("/"),_=(x||k===".")&&c.endsWith("/");return!l.pathname.endsWith("/")&&(h||_)&&(l.pathname+="/"),l}const ke=e=>e.join("/").replace(/\/\/+/g,"/"),Ns=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Us=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zs=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qs(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ar=["post","put","patch","delete"];new Set(Ar);const Ks=["get",...Ar];new Set(Ks);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var c=arguments[r];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(e[p]=c[p])}return e},rt.apply(this,arguments)}const ui=ye(null),Vs=ye(null),Pe=ye(null),xt=ye(null),Ie=ye({outlet:null,matches:[],isDataRoute:!1}),Br=ye(null);function Gs(e,r){let{relative:c}=r===void 0?{}:r;at()||le(!1);let{basename:p,navigator:g}=te(Pe),{hash:x,pathname:k,search:i}=Tr(e,{relative:c}),l=k;return p!=="/"&&(l=k==="/"?p:ke([p,k])),g.createHref({pathname:l,search:i,hash:x})}function at(){return te(xt)!=null}function kt(){return at()||le(!1),te(xt).location}function Or(e){te(Pe).static||Re(e)}function Mr(){let{isDataRoute:e}=te(Ie);return e?ln():Js()}function Js(){at()||le(!1);let e=te(ui),{basename:r,future:c,navigator:p}=te(Pe),{matches:g}=te(Ie),{pathname:x}=kt(),k=JSON.stringify(Rr(g,c.v7_relativeSplatPath)),i=ie(!1);return Or(()=>{i.current=!0}),me(function(h,_){if(_===void 0&&(_={}),!i.current)return;if(typeof h=="number"){p.go(h);return}let a=Dr(h,JSON.parse(k),x,_.relative==="path");e==null&&r!=="/"&&(a.pathname=a.pathname==="/"?r:ke([r,a.pathname])),(_.replace?p.replace:p.push)(a,_.state,_)},[r,p,k,x,e])}function Tr(e,r){let{relative:c}=r===void 0?{}:r,{future:p}=te(Pe),{matches:g}=te(Ie),{pathname:x}=kt(),k=JSON.stringify(Rr(g,p.v7_relativeSplatPath));return Le(()=>Dr(e,JSON.parse(k),x,c==="path"),[e,k,x,c])}function Xs(e,r){return Ys(e,r)}function Ys(e,r,c,p){at()||le(!1);let{navigator:g}=te(Pe),{matches:x}=te(Ie),k=x[x.length-1],i=k?k.params:{};k&&k.pathname;let l=k?k.pathnameBase:"/";k&&k.route;let h=kt(),_;if(r){var a;let s=typeof r=="string"?Te(r):r;l==="/"||(a=s.pathname)!=null&&a.startsWith(l)||le(!1),_=s}else _=h;let f=_.pathname||"/",m=f;if(l!=="/"){let s=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(s.length).join("/")}let y=ks(e,{pathname:m}),u=rn(y&&y.map(s=>Object.assign({},s,{params:Object.assign({},i,s.params),pathname:ke([l,g.encodeLocation?g.encodeLocation(s.pathname).pathname:s.pathname]),pathnameBase:s.pathnameBase==="/"?l:ke([l,g.encodeLocation?g.encodeLocation(s.pathnameBase).pathname:s.pathnameBase])})),x,c,p);return r&&u?ee(xt.Provider,{value:{location:rt({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:xe.Pop}},u):u}function Zs(){let e=an(),r=qs(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),c=e instanceof Error?e.stack:null;return ee(de,null,ee("h2",null,"Unexpected Application Error!"),ee("h3",{style:{fontStyle:"italic"}},r),c?ee("pre",{style:{padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"}},c):null,null)}const Qs=ee(Zs,null);class en extends fe{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,c){return c.location!==r.location||c.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:c.error,location:c.location,revalidation:r.revalidation||c.revalidation}}componentDidCatch(r,c){console.error("React Router caught the following error during render",r,c)}render(){return this.state.error!==void 0?ee(Ie.Provider,{value:this.props.routeContext},ee(Br.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tn(e){let{routeContext:r,match:c,children:p}=e,g=te(ui);return g&&g.static&&g.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(g.staticContext._deepestRenderedBoundaryId=c.route.id),ee(Ie.Provider,{value:r},p)}function rn(e,r,c,p){var g;if(r===void 0&&(r=[]),c===void 0&&(c=null),p===void 0&&(p=null),e==null){var x;if((x=c)!=null&&x.errors)e=c.matches;else return null}let k=e,i=(g=c)==null?void 0:g.errors;if(i!=null){let _=k.findIndex(a=>a.route.id&&(i==null?void 0:i[a.route.id])!==void 0);_>=0||le(!1),k=k.slice(0,Math.min(k.length,_+1))}let l=!1,h=-1;if(c&&p&&p.v7_partialHydration)for(let _=0;_<k.length;_++){let a=k[_];if((a.route.HydrateFallback||a.route.hydrateFallbackElement)&&(h=_),a.route.id){let{loaderData:f,errors:m}=c,y=a.route.loader&&f[a.route.id]===void 0&&(!m||m[a.route.id]===void 0);if(a.route.lazy||y){l=!0,h>=0?k=k.slice(0,h+1):k=[k[0]];break}}}return k.reduceRight((_,a,f)=>{let m,y=!1,u=null,s=null;c&&(m=i&&a.route.id?i[a.route.id]:void 0,u=a.route.errorElement||Qs,l&&(h<0&&f===0?(y=!0,s=null):h===f&&(y=!0,s=a.route.hydrateFallbackElement||null)));let o=r.concat(k.slice(0,f+1)),t=()=>{let n;return m?n=u:y?n=s:a.route.Component?n=ee(a.route.Component,null):a.route.element?n=a.route.element:n=_,ee(tn,{match:a,routeContext:{outlet:_,matches:o,isDataRoute:c!=null},children:n})};return c&&(a.route.ErrorBoundary||a.route.errorElement||f===0)?ee(en,{location:c.location,revalidation:c.revalidation,component:u,error:m,children:t(),routeContext:{outlet:null,matches:o,isDataRoute:!0}}):t()},null)}var Pr=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Pr||{}),bt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(bt||{});function sn(e){let r=te(ui);return r||le(!1),r}function nn(e){let r=te(Vs);return r||le(!1),r}function on(e){let r=te(Ie);return r||le(!1),r}function Ir(e){let r=on(),c=r.matches[r.matches.length-1];return c.route.id||le(!1),c.route.id}function an(){var e;let r=te(Br),c=nn(bt.UseRouteError),p=Ir(bt.UseRouteError);return r!==void 0?r:(e=c.errors)==null?void 0:e[p]}function ln(){let{router:e}=sn(Pr.UseNavigateStable),r=Ir(bt.UseNavigateStable),c=ie(!1);return Or(()=>{c.current=!0}),me(function(g,x){x===void 0&&(x={}),c.current&&(typeof g=="number"?e.navigate(g):e.navigate(g,rt({fromRouteId:r},x)))},[e,r])}function Ge(e){le(!1)}function cn(e){let{basename:r="/",children:c=null,location:p,navigationType:g=xe.Pop,navigator:x,static:k=!1,future:i}=e;at()&&le(!1);let l=r.replace(/^\/*/,"/"),h=Le(()=>({basename:l,navigator:x,static:k,future:rt({v7_relativeSplatPath:!1},i)}),[l,i,x,k]);typeof p=="string"&&(p=Te(p));let{pathname:_="/",search:a="",hash:f="",state:m=null,key:y="default"}=p,u=Le(()=>{let s=di(_,l);return s==null?null:{location:{pathname:s,search:a,hash:f,state:m,key:y},navigationType:g}},[l,_,a,f,m,y,g]);return u==null?null:ee(Pe.Provider,{value:h},ee(xt.Provider,{children:c,value:u}))}function hn(e){let{children:r,location:c}=e;return Xs(Kt(r),c)}new Promise(()=>{});function Kt(e,r){r===void 0&&(r=[]);let c=[];return ri.forEach(e,(p,g)=>{if(!Ne(p))return;let x=[...r,g];if(p.type===de){c.push.apply(c,Kt(p.props.children,x));return}p.type!==Ge&&le(!1),!p.props.index||!p.props.children||le(!1);let k={id:p.props.id||x.join("-"),caseSensitive:p.props.caseSensitive,element:p.props.element,Component:p.props.Component,index:p.props.index,path:p.props.path,loader:p.props.loader,action:p.props.action,errorElement:p.props.errorElement,ErrorBoundary:p.props.ErrorBoundary,hasErrorBoundary:p.props.ErrorBoundary!=null||p.props.errorElement!=null,shouldRevalidate:p.props.shouldRevalidate,handle:p.props.handle,lazy:p.props.lazy};p.props.children&&(k.children=Kt(p.props.children,x)),c.push(k)}),c}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var c=arguments[r];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(e[p]=c[p])}return e},Vt.apply(this,arguments)}function dn(e,r){if(e==null)return{};var c={},p=Object.keys(e),g,x;for(x=0;x<p.length;x++)g=p[x],!(r.indexOf(g)>=0)&&(c[g]=e[g]);return c}function un(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function pn(e,r){return e.button===0&&(!r||r==="_self")&&!un(e)}const _n=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],fn="6";try{window.__reactRouterVersion=fn}catch{}const vn="startTransition",Ii=ys[vn];function mn(e){let{basename:r,children:c,future:p,window:g}=e,x=ie();x.current==null&&(x.current=ws({window:g,v5Compat:!0}));let k=x.current,[i,l]=ce({action:k.action,location:k.location}),{v7_startTransition:h}=p||{},_=me(a=>{h&&Ii?Ii(()=>l(a)):l(a)},[l,h]);return Re(()=>k.listen(_),[k,_]),ee(cn,{basename:r,children:c,location:i.location,navigationType:i.action,navigator:k,future:p})}const gn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=ii(function(r,c){let{onClick:p,relative:g,reloadDocument:x,replace:k,state:i,target:l,to:h,preventScrollReset:_,unstable_viewTransition:a}=r,f=dn(r,_n),{basename:m}=te(Pe),y,u=!1;if(typeof h=="string"&&Sn.test(h)&&(y=h,gn))try{let n=new URL(window.location.href),d=h.startsWith("//")?new URL(n.protocol+h):new URL(h),S=di(d.pathname,m);d.origin===n.origin&&S!=null?h=S+d.search+d.hash:u=!0}catch{}let s=Gs(h,{relative:g}),o=yn(h,{replace:k,state:i,target:l,preventScrollReset:_,relative:g,unstable_viewTransition:a});function t(n){p&&p(n),n.defaultPrevented||o(n)}return ee("a",Vt({},f,{href:y||s,onClick:u||x?p:t,ref:c,target:l}))});var Hi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Hi||(Hi={}));var Fi;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fi||(Fi={}));function yn(e,r){let{target:c,replace:p,state:g,preventScrollReset:x,relative:k,unstable_viewTransition:i}=r===void 0?{}:r,l=Mr(),h=kt(),_=Tr(e,{relative:k});return me(a=>{if(pn(a,c)){a.preventDefault();let f=p!==void 0?p:St(h)===St(_);l(e,{replace:f,state:g,preventScrollReset:x,relative:k,unstable_viewTransition:i})}},[h,l,_,p,g,c,e,x,k,i])}var wn=0;function M(e,r,c,p,g,x){r||(r={});var k,i,l=r;if("ref"in l)for(i in l={},r)i=="ref"?k=r[i]:l[i]=r[i];var h={type:e,props:l,key:c,ref:k,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--wn,__i:-1,__u:0,__source:g,__self:x};if(typeof e=="function"&&(k=e.defaultProps))for(i in k)l[i]===void 0&&(l[i]=k[i]);return Y.vnode&&Y.vnode(h),h}const Ve=({elements:e,rows:r,cols:c})=>{const[p,g]=ce(0);return M("section",{class:`flex flex-col row-span-${r} col-span-${c} w-full h-full`,children:[M("div",{class:"w-full flex h-fit border-b border-b-[var(--opacity-text)]",children:e.map((x,k)=>M("button",{id:x.title,onClick:()=>g(k),class:`px-1 cursor-pointer  hover:bg-[var(--primary)] ${p===k?"bg-[var(--primary)]":null}`,children:x.title},k))}),M("div",{id:`${e[p].title}Container`,class:"flex-1 overflow-hidden",children:e[p].component})]})},ji=()=>M("div",{class:"overflow-auto h-full w-full",children:M("h1",{"data-id":"titulo",children:"Objeto 1"})}),Cn=()=>M("div",{class:"relative w-full h-full"}),xn=({file:e})=>{const r=e.split("/")[e.split("/").length-1],c=r.split(".")[r.split(".").length-1];return M("div",{class:"select-none cursor-pointer flex items-center gap-2 ml-3 text-nowrap overflow-ellipsis overflow-hidden text-lg",onDblClick:()=>{window.JStudio.openFile(e)},children:[M("i",{class:`bi bi-filetype-${c}`}),M("p",{children:r})]})},Hr=({path:e})=>{const[r,c]=ce([]);return ae(()=>{window.JStudio.fetchFiles(e).then(p=>{c(p)}).catch(p=>{console.error("Error fetching files:",p)})},[e]),M(de,{children:r.map((p,g)=>p.includes(".")?M(xn,{file:`${e}/${p}`}):M("details",{class:"ml-3 text-lg select-none",onToggle:x=>{const k=x.target,i=k.querySelector("i");i&&(k.open?(i.classList.remove("bi-folder2"),i.classList.add("bi-folder2-open")):(i.classList.remove("bi-folder2-open"),i.classList.add("bi-folder2")))},children:[M("summary",{class:"list-none flex cursor-pointer gap-1",children:[M("i",{class:"bi bi-folder2"}),p]}),M(Hr,{path:`${e}/${p}`})]},g))})},kn=({})=>{const e=JSON.parse(localStorage.getItem("currentProject"));return M("div",{class:"h-full overflow-y-auto",children:[M("h1",{class:"text-xl",children:e.name}),M("div",{class:"flex gap-2",children:[M("button",{class:"hover:bg-[#33333369] p-1 rounded-md",children:M("i",{class:"bi bi-folder-plus"})}),M("button",{class:"hover:bg-[#33333369]  p-1 rounded-md",children:M("i",{class:"bi bi-file-earmark-plus"})}),M("button",{onClick:()=>{document.querySelector("#FilesContainer").querySelectorAll("details").forEach(r=>{r.open=!1;const c=r.querySelector("i");c&&(c.classList.remove("bi-folder2-open"),c.classList.add("bi-folder2"))})},class:"hover:bg-[#33333369]  p-1 rounded-md",children:M("i",{class:"bi bi-dash-square"})})]}),M(Hr,{path:`${e.path}`})]})};var Fr={exports:{}};(function(e,r){(function(c,p){e.exports=p()})(globalThis,()=>(()=>{var c={4567:function(k,i,l){var h=this&&this.__decorate||function(t,n,d,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,d):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(t,n,d,S);else for(var C=t.length-1;C>=0;C--)(b=t[C])&&(v=(w<3?b(v):w>3?b(n,d,v):b(n,d))||v);return w>3&&v&&Object.defineProperty(n,d,v),v},_=this&&this.__param||function(t,n){return function(d,S){n(d,S,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const a=l(9042),f=l(9924),m=l(844),y=l(4725),u=l(2585),s=l(3656);let o=i.AccessibilityManager=class extends m.Disposable{constructor(t,n,d,S){super(),this._terminal=t,this._coreBrowserService=d,this._renderService=S,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,s.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,m.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let n=0;n<t;n++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,n){this._liveRegionDebouncer.refresh(t,n,this._terminal.rows)}_renderRows(t,n){const d=this._terminal.buffer,S=d.lines.length.toString();for(let b=t;b<=n;b++){const w=d.lines.get(d.ydisp+b),v=[],C=(w==null?void 0:w.translateToString(!0,void 0,void 0,v))||"",R=(d.ydisp+b+1).toString(),O=this._rowElements[b];O&&(C.length===0?(O.innerText="",this._rowColumns.set(O,[0,1])):(O.textContent=C,this._rowColumns.set(O,v)),O.setAttribute("aria-posinset",R),O.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,n){const d=t.target,S=this._rowElements[n===0?1:this._rowElements.length-2];if(d.getAttribute("aria-posinset")===(n===0?"1":`${this._terminal.buffer.lines.length}`)||t.relatedTarget!==S)return;let b,w;if(n===0?(b=d,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(b=this._rowElements.shift(),w=d,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),n===0){const v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{const v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(n===0?-1:1),this._rowElements[n===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){var C;if(this._rowElements.length===0)return;const t=document.getSelection();if(!t)return;if(t.isCollapsed)return void(this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection());if(!t.anchorNode||!t.focusNode)return void console.error("anchorNode and/or focusNode are null");let n={node:t.anchorNode,offset:t.anchorOffset},d={node:t.focusNode,offset:t.focusOffset};if((n.node.compareDocumentPosition(d.node)&Node.DOCUMENT_POSITION_PRECEDING||n.node===d.node&&n.offset>d.offset)&&([n,d]=[d,n]),n.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(n={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(n.node))return;const S=this._rowElements.slice(-1)[0];if(d.node.compareDocumentPosition(S)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(d={node:S,offset:((C=S.textContent)==null?void 0:C.length)??0}),!this._rowContainer.contains(d.node))return;const b=({node:R,offset:O})=>{const P=R instanceof Text?R.parentNode:R;let A=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const F=this._rowColumns.get(P);if(!F)return console.warn("columns is null. Race condition?"),null;let H=O<F.length?F[O]:F.slice(-1)[0]+1;return H>=this._terminal.cols&&(++A,H=0),{row:A,column:H}},w=b(n),v=b(d);if(w&&v){if(w.row>v.row||w.row===v.row&&w.column>=v.column)throw new Error("invalid range");this._terminal.select(w.column,w.row,(v.row-w.row)*this._terminal.cols-w.column+v.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let n=this._rowContainer.children.length;n<this._terminal.rows;n++)this._rowElements[n]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[n]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=o=h([_(1,u.IInstantiationService),_(2,y.ICoreBrowserService),_(3,y.IRenderService)],o)},3614:(k,i)=>{function l(f){return f.replace(/\r?\n/g,"\r")}function h(f,m){return m?"\x1B[200~"+f+"\x1B[201~":f}function _(f,m,y,u){f=h(f=l(f),y.decPrivateModes.bracketedPasteMode&&u.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(f,!0),m.value=""}function a(f,m,y){const u=y.getBoundingClientRect(),s=f.clientX-u.left-10,o=f.clientY-u.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${s}px`,m.style.top=`${o}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=l,i.bracketTextForPaste=h,i.copyHandler=function(f,m){f.clipboardData&&f.clipboardData.setData("text/plain",m.selectionText),f.preventDefault()},i.handlePasteEvent=function(f,m,y,u){f.stopPropagation(),f.clipboardData&&_(f.clipboardData.getData("text/plain"),m,y,u)},i.paste=_,i.moveTextAreaUnderMouseCursor=a,i.rightClickHandler=function(f,m,y,u,s){a(f,m,y),s&&u.rightClickSelect(f),m.value=u.selectionText,m.select()}},7239:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const h=l(1505);i.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(_,a,f){this._css.set(_,a,f)}getCss(_,a){return this._css.get(_,a)}setColor(_,a,f){this._color.set(_,a,f)}getColor(_,a){return this._color.get(_,a)}clear(){this._color.clear(),this._css.clear()}}},3656:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(l,h,_,a){l.addEventListener(h,_,a);let f=!1;return{dispose:()=>{f||(f=!0,l.removeEventListener(h,_,a))}}}},3551:function(k,i,l){var h=this&&this.__decorate||function(o,t,n,d){var S,b=arguments.length,w=b<3?t:d===null?d=Object.getOwnPropertyDescriptor(t,n):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,t,n,d);else for(var v=o.length-1;v>=0;v--)(S=o[v])&&(w=(b<3?S(w):b>3?S(t,n,w):S(t,n))||w);return b>3&&w&&Object.defineProperty(t,n,w),w},_=this&&this.__param||function(o,t){return function(n,d){t(n,d,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const a=l(3656),f=l(8460),m=l(844),y=l(2585),u=l(4725);let s=i.Linkifier=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(o,t,n,d,S){super(),this._element=o,this._mouseService=t,this._renderService=n,this._bufferService=d,this._linkProviderService=S,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new f.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new f.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{var b;this._lastMouseEvent=void 0,(b=this._activeProviderReplies)==null||b.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){this._lastMouseEvent=o;const t=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const n=o.composedPath();for(let d=0;d<n.length;d++){const S=n[d];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,t){var d,S;this._activeProviderReplies&&t||((d=this._activeProviderReplies)==null||d.forEach(b=>{b==null||b.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let n=!1;for(const[b,w]of this._linkProviderService.linkProviders.entries())t?(S=this._activeProviderReplies)!=null&&S.get(b)&&(n=this._checkLinkProviderResult(b,o,n)):w.provideLinks(o.y,v=>{var R,O;if(this._isMouseOut)return;const C=v==null?void 0:v.map(P=>({link:P}));(R=this._activeProviderReplies)==null||R.set(b,C),n=this._checkLinkProviderResult(b,o,n),((O=this._activeProviderReplies)==null?void 0:O.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,t){const n=new Set;for(let d=0;d<t.size;d++){const S=t.get(d);if(S)for(let b=0;b<S.length;b++){const w=S[b],v=w.link.range.start.y<o?0:w.link.range.start.x,C=w.link.range.end.y>o?this._bufferService.cols:w.link.range.end.x;for(let R=v;R<=C;R++){if(n.has(R)){S.splice(b--,1);break}n.add(R)}}}}_checkLinkProviderResult(o,t,n){var b;if(!this._activeProviderReplies)return n;const d=this._activeProviderReplies.get(o);let S=!1;for(let w=0;w<o;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(S=!0);if(!S&&d){const w=d.find(v=>this._linkAtPosition(v.link,t));w&&(n=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let w=0;w<this._activeProviderReplies.size;w++){const v=(b=this._activeProviderReplies.get(w))==null?void 0:b.find(C=>this._linkAtPosition(C.link,t));if(v){n=!0,this._handleNewLink(v);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._currentLink)return;const t=this._positionFromMouseEvent(o,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,t){this._currentLink&&this._lastMouseEvent&&(!o||!t||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._lastMouseEvent)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(o.link,t)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var n,d;return(d=(n=this._currentLink)==null?void 0:n.state)==null?void 0:d.decorations.pointerCursor},set:n=>{var d;(d=this._currentLink)!=null&&d.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>{var n,d;return(d=(n=this._currentLink)==null?void 0:n.state)==null?void 0:d.decorations.underline},set:n=>{var d,S,b;(d=this._currentLink)!=null&&d.state&&((b=(S=this._currentLink)==null?void 0:S.state)==null?void 0:b.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;const d=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(d,S),this._lastMouseEvent)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(o,t,n){var d;(d=this._currentLink)!=null&&d.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(n,t.text)}_fireUnderlineEvent(o,t){const n=o.range,d=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-d-1,n.end.x,n.end.y-d-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(o,t,n){var d;(d=this._currentLink)!=null&&d.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(n,t.text)}_linkAtPosition(o,t){const n=o.range.start.y*this._bufferService.cols+o.range.start.x,d=o.range.end.y*this._bufferService.cols+o.range.end.x,S=t.y*this._bufferService.cols+t.x;return n<=S&&S<=d}_positionFromMouseEvent(o,t,n){const d=n.getCoords(o,t,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,t,n,d,S){return{x1:o,y1:t,x2:n,y2:d,cols:this._bufferService.cols,fg:S}}};i.Linkifier=s=h([_(1,u.IMouseService),_(2,u.IRenderService),_(3,y.IBufferService),_(4,u.ILinkProviderService)],s)},9042:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(k,i,l){var h=this&&this.__decorate||function(u,s,o,t){var n,d=arguments.length,S=d<3?s:t===null?t=Object.getOwnPropertyDescriptor(s,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,s,o,t);else for(var b=u.length-1;b>=0;b--)(n=u[b])&&(S=(d<3?n(S):d>3?n(s,o,S):n(s,o))||S);return d>3&&S&&Object.defineProperty(s,o,S),S},_=this&&this.__param||function(u,s){return function(o,t){s(o,t,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const a=l(511),f=l(2585);let m=i.OscLinkProvider=class{constructor(u,s,o){this._bufferService=u,this._optionsService=s,this._oscLinkService=o}provideLinks(u,s){var C;const o=this._bufferService.buffer.lines.get(u-1);if(!o)return void s(void 0);const t=[],n=this._optionsService.rawOptions.linkHandler,d=new a.CellData,S=o.getTrimmedLength();let b=-1,w=-1,v=!1;for(let R=0;R<S;R++)if(w!==-1||o.hasContent(R)){if(o.loadCell(R,d),d.hasExtendedAttrs()&&d.extended.urlId){if(w===-1){w=R,b=d.extended.urlId;continue}v=d.extended.urlId!==b}else w!==-1&&(v=!0);if(v||w!==-1&&R===S-1){const O=(C=this._oscLinkService.getLinkData(b))==null?void 0:C.uri;if(O){const P={start:{x:w+1,y:u},end:{x:R+(v||R!==S-1?0:1),y:u}};let A=!1;if(!(n!=null&&n.allowNonHttpProtocols))try{const F=new URL(O);["http:","https:"].includes(F.protocol)||(A=!0)}catch{A=!0}A||t.push({text:O,range:P,activate:(F,H)=>n?n.activate(F,H,P):y(0,H),hover:(F,H)=>{var $;return($=n==null?void 0:n.hover)==null?void 0:$.call(n,F,H,P)},leave:(F,H)=>{var $;return($=n==null?void 0:n.leave)==null?void 0:$.call(n,F,H,P)}})}v=!1,d.hasExtendedAttrs()&&d.extended.urlId?(w=R,b=d.extended.urlId):(w=-1,b=-1)}}s(t)}};function y(u,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=m=h([_(0,f.IBufferService),_(1,f.IOptionsService),_(2,f.IOscLinkService)],m)},6193:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(l,h){this._renderCallback=l,this._coreBrowserService=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,h,_){this._rowCount=_,l=l!==void 0?l:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const h=l(3614),_=l(3656),a=l(3551),f=l(9042),m=l(3730),y=l(1680),u=l(3107),s=l(5744),o=l(2950),t=l(1296),n=l(428),d=l(4269),S=l(5114),b=l(8934),w=l(3230),v=l(9312),C=l(4725),R=l(6731),O=l(8055),P=l(8969),A=l(8460),F=l(844),H=l(6114),$=l(8437),q=l(2584),U=l(7399),E=l(5941),B=l(9074),D=l(2585),T=l(5435),W=l(4567),z=l(779);class G extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=H,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new F.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(B.DecorationService),this._instantiationService.setService(D.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(z.LinkProviderService),this._instantiationService.setService(C.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((L,N)=>this.refresh(L,N))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(L=>this._reportWindowsOptions(L))),this.register(this._inputHandler.onColor(L=>this._handleColorEvent(L))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(L=>this._afterResize(L.cols,L.rows))),this.register((0,F.toDisposable)(()=>{var L,N;this._customKeyEventHandler=void 0,(N=(L=this.element)==null?void 0:L.parentNode)==null||N.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const L of I){let N,j="";switch(L.index){case 256:N="foreground",j="10";break;case 257:N="background",j="11";break;case 258:N="cursor",j="12";break;default:N="ansi",j="4;"+L.index}switch(L.type){case 0:const V=O.color.toColorRGB(N==="ansi"?this._themeService.colors.ansi[L.index]:this._themeService.colors[N]);this.coreService.triggerDataEvent(`${q.C0.ESC}]${j};${(0,E.toRgbString)(V)}${q.C1_ESCAPED.ST}`);break;case 1:if(N==="ansi")this._themeService.modifyColors(K=>K.ansi[L.index]=O.channels.toColor(...L.color));else{const K=N;this._themeService.modifyColors(Z=>Z[K]=O.channels.toColor(...L.color))}break;case 2:this._themeService.restoreColor(L.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)==null?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,L=this.buffer.lines.get(I);if(!L)return;const N=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.css.cell.height,V=L.getWidth(N),K=this._renderService.dimensions.css.cell.width*V,Z=this.buffer.y*this._renderService.dimensions.css.cell.height,ne=N*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ne+"px",this.textarea.style.top=Z+"px",this.textarea.style.width=K+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",L=>{this.hasSelection()&&(0,h.copyHandler)(L,this._selectionService)}));const I=L=>(0,h.handlePasteEvent)(L,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,_.addDisposableDomListener)(this.element,"paste",I)),H.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",L=>{L.button===2&&(0,h.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",L=>{(0,h.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),H.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",L=>{L.button===1&&(0,h.moveTextAreaUnderMouseCursor)(L,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var N;if(!I)throw new Error("Terminal requires a parent element.");if(I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((N=this.element)==null?void 0:N.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=I.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const L=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),L.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,_.addDisposableDomListener)(this.screenElement,"mousemove",j=>this.updateCursorStyle(j))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),L.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",f.promptLabel),H.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,I.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",j=>this._handleTextAreaFocus(j))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(n.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(d.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(j=>this._onRender.fire(j))),this.onResize(j=>this._renderService.resize(j.cols,j.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(a.Linkifier,this.screenElement)),this.element.appendChild(L);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(j=>this._renderService.handleSelectionChanged(j.start,j.end,j.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(j=>{this.textarea.value=j,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(j=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(u.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",j=>this._selectionService.handleMouseDown(j))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",j=>this._handleScreenReaderModeOptionChange(j))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",j=>{!this._overviewRulerRenderer&&j&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(t.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const I=this,L=this.element;function N(K){const Z=I._mouseService.getMouseReportCoords(K,I.screenElement);if(!Z)return!1;let ne,oe;switch(K.overrideType||K.type){case"mousemove":oe=32,K.buttons===void 0?(ne=3,K.button!==void 0&&(ne=K.button<3?K.button:3)):ne=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":oe=0,ne=K.button<3?K.button:3;break;case"mousedown":oe=1,ne=K.button<3?K.button:3;break;case"wheel":if(I._customWheelEventHandler&&I._customWheelEventHandler(K)===!1||I.viewport.getLinesScrolled(K)===0)return!1;oe=K.deltaY<0?0:1,ne=4;break;default:return!1}return!(oe===void 0||ne===void 0||ne>4)&&I.coreMouseService.triggerMouseEvent({col:Z.col,row:Z.row,x:Z.x,y:Z.y,button:ne,action:oe,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}const j={mouseup:null,wheel:null,mousedrag:null,mousemove:null},V={mouseup:K=>(N(K),K.buttons||(this._document.removeEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.removeEventListener("mousemove",j.mousedrag)),this.cancel(K)),wheel:K=>(N(K),this.cancel(K,!0)),mousedrag:K=>{K.buttons&&N(K)},mousemove:K=>{K.buttons||N(K)}};this.register(this.coreMouseService.onProtocolChange(K=>{K?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(K)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&K?j.mousemove||(L.addEventListener("mousemove",V.mousemove),j.mousemove=V.mousemove):(L.removeEventListener("mousemove",j.mousemove),j.mousemove=null),16&K?j.wheel||(L.addEventListener("wheel",V.wheel,{passive:!1}),j.wheel=V.wheel):(L.removeEventListener("wheel",j.wheel),j.wheel=null),2&K?j.mouseup||(j.mouseup=V.mouseup):(this._document.removeEventListener("mouseup",j.mouseup),j.mouseup=null),4&K?j.mousedrag||(j.mousedrag=V.mousedrag):(this._document.removeEventListener("mousemove",j.mousedrag),j.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(L,"mousedown",K=>{if(K.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(K))return N(K),j.mouseup&&this._document.addEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.addEventListener("mousemove",j.mousedrag),this.cancel(K)})),this.register((0,_.addDisposableDomListener)(L,"wheel",K=>{if(!j.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(K)===!1)return!1;if(!this.buffer.hasScrollback){const Z=this.viewport.getLinesScrolled(K);if(Z===0)return;const ne=q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B");let oe="";for(let he=0;he<Math.abs(Z);he++)oe+=ne;return this.coreService.triggerDataEvent(oe,!0),this.cancel(K,!0)}return this.viewport.handleWheel(K)?this.cancel(K):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(L,"touchstart",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(K),this.cancel(K)},{passive:!0})),this.register((0,_.addDisposableDomListener)(L,"touchmove",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(K)?void 0:this.cancel(K)},{passive:!1}))}refresh(I,L){var N;(N=this._renderService)==null||N.refreshRows(I,L)}updateCursorStyle(I){var L;(L=this._selectionService)!=null&&L.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,L,N=0){var j;N===1?(super.scrollLines(I,L,N),this.refresh(0,this.rows-1)):(j=this.viewport)==null||j.scrollLines(I)}paste(I){(0,h.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}attachCustomWheelEventHandler(I){this._customWheelEventHandler=I}registerLinkProvider(I){return this._linkProviderService.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const L=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),L}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,L,N){this._selectionService.setSelection(I,L,N)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)==null||I.clearSelection()}selectAll(){var I;(I=this._selectionService)==null||I.selectAll()}selectLines(I,L){var N;(N=this._selectionService)==null||N.selectLines(I,L)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const L=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!L&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;L||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const N=(0,U.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),N.type===3||N.type===2){const j=this.rows-1;return this.scrollLines(N.type===2?-j:j),this.cancel(I,!0)}return N.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(N.cancel&&this.cancel(I,!0),!N.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(N.key!==q.C0.ETX&&N.key!==q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:N.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(N.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,L){const N=I.isMac&&!this.options.macOptionIsMeta&&L.altKey&&!L.ctrlKey&&!L.metaKey||I.isWindows&&L.altKey&&L.ctrlKey&&!L.metaKey||I.isWindows&&L.getModifierState("AltGraph");return L.type==="keypress"?N:N&&(!L.keyCode||L.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(L){return L.keyCode===16||L.keyCode===17||L.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let L;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)L=I.charCode;else if(I.which===null||I.which===void 0)L=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;L=I.which}return!(!L||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(L=String.fromCharCode(L),this._onKey.fire({key:L,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(L,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const L=I.data;return this.coreService.triggerDataEvent(L,!0),this.cancel(I),!0}return!1}resize(I,L){I!==this.cols||L!==this.rows?super.resize(I,L):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,L){var N,j;(N=this._charSizeService)==null||N.measure(),(j=this.viewport)==null||j.syncScrollArea(!0)}clear(){var I;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let L=1;L<this.rows;L++)this.buffer.lines.push(this.buffer.getBlankLine($.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(I=this.viewport)==null||I.reset(),this.refresh(0,this.rows-1)}}reset(){var L,N;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)==null||L.reset(),this._decorationService.reset(),(N=this.viewport)==null||N.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;(I=this._renderService)==null||I.clearTextureAtlas()}_reportFocus(){var I;(I=this.element)!=null&&I.classList.contains("focus")?this.coreService.triggerDataEvent(q.C0.ESC+"[I"):this.coreService.triggerDataEvent(q.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const L=this._renderService.dimensions.css.canvas.width.toFixed(0),N=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[4;${N};${L}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const j=this._renderService.dimensions.css.cell.width.toFixed(0),V=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[6;${V};${j}t`)}}cancel(I,L){if(this.options.cancelEvents||L)return I.preventDefault(),I.stopPropagation(),!1}}i.Terminal=G},9924:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(l,h=1e3){this._renderCallback=l,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,h,_){this._rowCount=_,l=l!==void 0?l:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const a=Date.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){const f=a-this._lastRefreshMs,m=this._debounceThresholdMS-f;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,h)}}},1680:function(k,i,l){var h=this&&this.__decorate||function(o,t,n,d){var S,b=arguments.length,w=b<3?t:d===null?d=Object.getOwnPropertyDescriptor(t,n):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,t,n,d);else for(var v=o.length-1;v>=0;v--)(S=o[v])&&(w=(b<3?S(w):b>3?S(t,n,w):S(t,n))||w);return b>3&&w&&Object.defineProperty(t,n,w),w},_=this&&this.__param||function(o,t){return function(n,d){t(n,d,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const a=l(3656),f=l(4725),m=l(8460),y=l(844),u=l(2585);let s=i.Viewport=class extends y.Disposable{constructor(o,t,n,d,S,b,w,v){super(),this._viewportElement=o,this._scrollArea=t,this._bufferService=n,this._optionsService=d,this._charSizeService=S,this._renderService=b,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,a.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(C=>this._renderDimensions=C)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(C=>this._handleThemeChange(C))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,t){const n=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&n<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const t=this._getPixelsScrolled(o);return t!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(o,t))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const t=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let t=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(o,t){var v;let n,d="";const S=[],b=t??this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let C=o;C<b;C++){const R=w.get(C);if(!R)continue;const O=(v=w.get(C+1))==null?void 0:v.isWrapped;if(d+=R.translateToString(!O),!O||C===w.length-1){const P=document.createElement("div");P.textContent=d,S.push(P),d.length>0&&(n=P),d=""}}return{bufferElements:S,cursorElement:n}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let t=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(o,t){const n=this._optionsService.rawOptions.fastScrollModifier;return n==="alt"&&t.altKey||n==="ctrl"&&t.ctrlKey||n==="shift"&&t.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const t=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(o,t))}};i.Viewport=s=h([_(2,u.IBufferService),_(3,u.IOptionsService),_(4,f.ICharSizeService),_(5,f.IRenderService),_(6,f.ICoreBrowserService),_(7,f.IThemeService)],s)},3107:function(k,i,l){var h=this&&this.__decorate||function(u,s,o,t){var n,d=arguments.length,S=d<3?s:t===null?t=Object.getOwnPropertyDescriptor(s,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,s,o,t);else for(var b=u.length-1;b>=0;b--)(n=u[b])&&(S=(d<3?n(S):d>3?n(s,o,S):n(s,o))||S);return d>3&&S&&Object.defineProperty(s,o,S),S},_=this&&this.__param||function(u,s){return function(o,t){s(o,t,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const a=l(4725),f=l(844),m=l(2585);let y=i.BufferDecorationRenderer=class extends f.Disposable{constructor(u,s,o,t,n){super(),this._screenElement=u,this._bufferService=s,this._coreBrowserService=o,this._decorationService=t,this._renderService=n,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(d=>this._removeDecoration(d))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const u of this._decorationService.decorations)this._renderDecoration(u);this._dimensionsChanged=!1}_renderDecoration(u){this._refreshStyle(u),this._dimensionsChanged&&this._refreshXPosition(u)}_createElement(u){var t;const s=this._coreBrowserService.mainDocument.createElement("div");s.classList.add("xterm-decoration"),s.classList.toggle("xterm-decoration-top-layer",((t=u==null?void 0:u.options)==null?void 0:t.layer)==="top"),s.style.width=`${Math.round((u.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=(u.options.height||1)*this._renderService.dimensions.css.cell.height+"px",s.style.top=(u.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const o=u.options.x??0;return o&&o>this._bufferService.cols&&(s.style.display="none"),this._refreshXPosition(u,s),s}_refreshStyle(u){const s=u.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)u.element&&(u.element.style.display="none",u.onRenderEmitter.fire(u.element));else{let o=this._decorationElements.get(u);o||(o=this._createElement(u),u.element=o,this._decorationElements.set(u,o),this._container.appendChild(o),u.onDispose(()=>{this._decorationElements.delete(u),o.remove()})),o.style.top=s*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",u.onRenderEmitter.fire(o)}}_refreshXPosition(u,s=u.element){if(!s)return;const o=u.options.x??0;(u.options.anchor||"left")==="right"?s.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":s.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(u){var s;(s=this._decorationElements.get(u))==null||s.remove(),this._decorationElements.delete(u),u.dispose()}};i.BufferDecorationRenderer=y=h([_(1,m.IBufferService),_(2,a.ICoreBrowserService),_(3,m.IDecorationService),_(4,a.IRenderService)],y)},5871:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const h of this._zones)if(h.color===l.options.overviewRulerOptions.color&&h.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,l.marker.line))return;if(this._lineAdjacentToZone(h,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(h,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,h){return h>=l.startBufferLine&&h<=l.endBufferLine}_lineAdjacentToZone(l,h,_){return h>=l.startBufferLine-this._linePadding[_||"full"]&&h<=l.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(l,h){l.startBufferLine=Math.min(l.startBufferLine,h),l.endBufferLine=Math.max(l.endBufferLine,h)}}},5744:function(k,i,l){var h=this&&this.__decorate||function(n,d,S,b){var w,v=arguments.length,C=v<3?d:b===null?b=Object.getOwnPropertyDescriptor(d,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,d,S,b);else for(var R=n.length-1;R>=0;R--)(w=n[R])&&(C=(v<3?w(C):v>3?w(d,S,C):w(d,S))||C);return v>3&&C&&Object.defineProperty(d,S,C),C},_=this&&this.__param||function(n,d){return function(S,b){d(S,b,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const a=l(5871),f=l(4725),m=l(844),y=l(2585),u={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let t=i.OverviewRulerRenderer=class extends m.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(n,d,S,b,w,v,C){var O;super(),this._viewportElement=n,this._screenElement=d,this._bufferService=S,this._decorationService=b,this._renderService=w,this._optionsService=v,this._coreBrowserService=C,this._colorZoneStore=new a.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)==null||O.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,m.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const n=Math.floor(this._canvas.width/3),d=Math.ceil(this._canvas.width/3);s.full=this._canvas.width,s.left=n,s.center=d,s.right=n,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=s.left,o.right=s.left+s.center}_refreshDrawHeightConstants(){u.full=Math.round(2*this._coreBrowserService.dpr);const n=this._canvas.height/this._bufferService.buffer.lines.length,d=Math.round(Math.max(Math.min(n,12),6)*this._coreBrowserService.dpr);u.left=d,u.center=d,u.right=d}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*u.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const d of this._decorationService.decorations)this._colorZoneStore.addDecoration(d);this._ctx.lineWidth=1;const n=this._colorZoneStore.zones;for(const d of n)d.position!=="full"&&this._renderColorZone(d);for(const d of n)d.position==="full"&&this._renderColorZone(d);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(n){this._ctx.fillStyle=n.color,this._ctx.fillRect(o[n.position||"full"],Math.round((this._canvas.height-1)*(n.startBufferLine/this._bufferService.buffers.active.lines.length)-u[n.position||"full"]/2),s[n.position||"full"],Math.round((this._canvas.height-1)*((n.endBufferLine-n.startBufferLine)/this._bufferService.buffers.active.lines.length)+u[n.position||"full"]))}_queueRefresh(n,d){this._shouldUpdateDimensions=n||this._shouldUpdateDimensions,this._shouldUpdateAnchor=d||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=t=h([_(2,y.IBufferService),_(3,y.IDecorationService),_(4,f.IRenderService),_(5,y.IOptionsService),_(6,f.ICoreBrowserService)],t)},2950:function(k,i,l){var h=this&&this.__decorate||function(u,s,o,t){var n,d=arguments.length,S=d<3?s:t===null?t=Object.getOwnPropertyDescriptor(s,o):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,s,o,t);else for(var b=u.length-1;b>=0;b--)(n=u[b])&&(S=(d<3?n(S):d>3?n(s,o,S):n(s,o))||S);return d>3&&S&&Object.defineProperty(s,o,S),S},_=this&&this.__param||function(u,s){return function(o,t){s(o,t,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const a=l(4725),f=l(2585),m=l(2584);let y=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(u,s,o,t,n,d){this._textarea=u,this._compositionView=s,this._bufferService=o,this._optionsService=t,this._coreService=n,this._renderService=d,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(u){this._compositionView.textContent=u.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(u){if(this._isComposing||this._isSendingComposition){if(u.keyCode===229||u.keyCode===16||u.keyCode===17||u.keyCode===18)return!1;this._finalizeComposition(!1)}return u.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(u){if(this._compositionView.classList.remove("active"),this._isComposing=!1,u){const s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,s.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(s.start,s.end):this._textarea.value.substring(s.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){const u=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const s=this._textarea.value,o=s.replace(u,"");this._dataAlreadySent=o,s.length>u.length?this._coreService.triggerDataEvent(o,!0):s.length<u.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):s.length===u.length&&s!==u&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(u){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,t=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,n=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const d=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(d.width,1)+"px",this._textarea.style.height=Math.max(d.height,1)+"px",this._textarea.style.lineHeight=d.height+"px"}u||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=y=h([_(2,f.IBufferService),_(3,f.IOptionsService),_(4,f.ICoreService),_(5,a.IRenderService)],y)},9806:(k,i)=>{function l(h,_,a){const f=a.getBoundingClientRect(),m=h.getComputedStyle(a),y=parseInt(m.getPropertyValue("padding-left")),u=parseInt(m.getPropertyValue("padding-top"));return[_.clientX-f.left-y,_.clientY-f.top-u]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=l,i.getCoords=function(h,_,a,f,m,y,u,s,o){if(!y)return;const t=l(h,_,a);return t?(t[0]=Math.ceil((t[0]+(o?u/2:0))/u),t[1]=Math.ceil(t[1]/s),t[0]=Math.min(Math.max(t[0],1),f+(o?1:0)),t[1]=Math.min(Math.max(t[1],1),m),t):void 0}},9504:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const h=l(2584);function _(s,o,t,n){const d=s-a(s,t),S=o-a(o,t),b=Math.abs(d-S)-function(w,v,C){let R=0;const O=w-a(w,C),P=v-a(v,C);for(let A=0;A<Math.abs(O-P);A++){const F=f(w,v)==="A"?-1:1,H=C.buffer.lines.get(O+F*A);H!=null&&H.isWrapped&&R++}return R}(s,o,t);return u(b,y(f(s,o),n))}function a(s,o){let t=0,n=o.buffer.lines.get(s),d=n==null?void 0:n.isWrapped;for(;d&&s>=0&&s<o.rows;)t++,n=o.buffer.lines.get(--s),d=n==null?void 0:n.isWrapped;return t}function f(s,o){return s>o?"A":"B"}function m(s,o,t,n,d,S){let b=s,w=o,v="";for(;b!==t||w!==n;)b+=d?1:-1,d&&b>S.cols-1?(v+=S.buffer.translateBufferLineToString(w,!1,s,b),b=0,s=0,w++):!d&&b<0&&(v+=S.buffer.translateBufferLineToString(w,!1,0,s+1),b=S.cols-1,s=b,w--);return v+S.buffer.translateBufferLineToString(w,!1,s,b)}function y(s,o){const t=o?"O":"[";return h.C0.ESC+t+s}function u(s,o){s=Math.floor(s);let t="";for(let n=0;n<s;n++)t+=o;return t}i.moveToCellSequence=function(s,o,t,n){const d=t.buffer.x,S=t.buffer.y;if(!t.buffer.hasScrollback)return function(v,C,R,O,P,A){return _(C,O,P,A).length===0?"":u(m(v,C,v,C-a(C,P),!1,P).length,y("D",A))}(d,S,0,o,t,n)+_(S,o,t,n)+function(v,C,R,O,P,A){let F;F=_(C,O,P,A).length>0?O-a(O,P):C;const H=O,$=function(q,U,E,B,D,T){let W;return W=_(E,B,D,T).length>0?B-a(B,D):U,q<E&&W<=B||q>=E&&W<B?"C":"D"}(v,C,R,O,P,A);return u(m(v,F,R,H,$==="C",P).length,y($,A))}(d,S,s,o,t,n);let b;if(S===o)return b=d>s?"D":"C",u(Math.abs(d-s),y(b,n));b=S>o?"D":"C";const w=Math.abs(S-o);return u(function(v,C){return C.cols-v}(S>o?s:d,t)+(w-1)*t.cols+1+((S>o?d:s)-1),y(b,n))}},1296:function(k,i,l){var h=this&&this.__decorate||function(A,F,H,$){var q,U=arguments.length,E=U<3?F:$===null?$=Object.getOwnPropertyDescriptor(F,H):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(A,F,H,$);else for(var B=A.length-1;B>=0;B--)(q=A[B])&&(E=(U<3?q(E):U>3?q(F,H,E):q(F,H))||E);return U>3&&E&&Object.defineProperty(F,H,E),E},_=this&&this.__param||function(A,F){return function(H,$){F(H,$,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const a=l(3787),f=l(2550),m=l(2223),y=l(6171),u=l(6052),s=l(4725),o=l(8055),t=l(8460),n=l(844),d=l(2585),S="xterm-dom-renderer-owner-",b="xterm-rows",w="xterm-fg-",v="xterm-bg-",C="xterm-focus",R="xterm-selection";let O=1,P=i.DomRenderer=class extends n.Disposable{constructor(A,F,H,$,q,U,E,B,D,T,W,z,G){super(),this._terminal=A,this._document=F,this._element=H,this._screenElement=$,this._viewportElement=q,this._helperContainer=U,this._linkifier2=E,this._charSizeService=D,this._optionsService=T,this._bufferService=W,this._coreBrowserService=z,this._themeService=G,this._terminalClass=O++,this._rowElements=[],this._selectionRenderModel=(0,u.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new t.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(R),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(J=>this._injectCss(J))),this._injectCss(this._themeService.colors),this._rowFactory=B.createInstance(a.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(J=>this._handleLinkHover(J))),this.register(this._linkifier2.onHideLinkUnderline(J=>this._handleLinkLeave(J))),this.register((0,n.toDisposable)(()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new f.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const H of this._rowElements)H.style.width=`${this.dimensions.css.canvas.width}px`,H.style.height=`${this.dimensions.css.cell.height}px`,H.style.lineHeight=`${this.dimensions.css.cell.height}px`,H.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const F=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=F,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let F=`${this._terminalSelector} .${b} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;F+=`${this._terminalSelector} .${b} .xterm-dim { color: ${o.color.multiplyOpacity(A.foreground,.5).css};}`,F+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const H=`blink_underline_${this._terminalClass}`,$=`blink_bar_${this._terminalClass}`,q=`blink_block_${this._terminalClass}`;F+=`@keyframes ${H} { 50% {  border-bottom-style: hidden; }}`,F+=`@keyframes ${$} { 50% {  box-shadow: none; }}`,F+=`@keyframes ${q} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,F+=`${this._terminalSelector} .${b}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${H} 1s step-end infinite;}${this._terminalSelector} .${b}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${b}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,F+=`${this._terminalSelector} .${R} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${R} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${R} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[U,E]of A.ansi.entries())F+=`${this._terminalSelector} .${w}${U} { color: ${E.css}; }${this._terminalSelector} .${w}${U}.xterm-dim { color: ${o.color.multiplyOpacity(E,.5).css}; }${this._terminalSelector} .${v}${U} { background-color: ${E.css}; }`;F+=`${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(A.background).css}; }${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${v}${m.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=F}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,F){for(let H=this._rowElements.length;H<=F;H++){const $=this._document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>F;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,F){this._refreshRowElements(A,F),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,F,H){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,F,H),this.renderRows(0,this._bufferService.rows-1),!A||!F)return;this._selectionRenderModel.update(this._terminal,A,F,H);const $=this._selectionRenderModel.viewportStartRow,q=this._selectionRenderModel.viewportEndRow,U=this._selectionRenderModel.viewportCappedStartRow,E=this._selectionRenderModel.viewportCappedEndRow;if(U>=this._bufferService.rows||E<0)return;const B=this._document.createDocumentFragment();if(H){const D=A[0]>F[0];B.appendChild(this._createSelectionElement(U,D?F[0]:A[0],D?A[0]:F[0],E-U+1))}else{const D=$===U?A[0]:0,T=U===q?F[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(U,D,T));const W=E-U-1;if(B.appendChild(this._createSelectionElement(U+1,0,this._bufferService.cols,W)),U!==E){const z=q===E?F[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(E,0,z))}}this._selectionContainer.appendChild(B)}_createSelectionElement(A,F,H,$=1){const q=this._document.createElement("div"),U=F*this.dimensions.css.cell.width;let E=this.dimensions.css.cell.width*(H-F);return U+E>this.dimensions.css.canvas.width&&(E=this.dimensions.css.canvas.width-U),q.style.height=$*this.dimensions.css.cell.height+"px",q.style.top=A*this.dimensions.css.cell.height+"px",q.style.left=`${U}px`,q.style.width=`${E}px`,q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,F){const H=this._bufferService.buffer,$=H.ybase+H.y,q=Math.min(H.x,this._bufferService.cols-1),U=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let D=A;D<=F;D++){const T=D+H.ydisp,W=this._rowElements[D],z=H.lines.get(T);if(!W||!z)break;W.replaceChildren(...this._rowFactory.createRow(z,T,T===$,E,B,q,U,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,F,H,$,q,U){H<0&&(A=0),$<0&&(F=0);const E=this._bufferService.rows-1;H=Math.max(Math.min(H,E),0),$=Math.max(Math.min($,E),0),q=Math.min(q,this._bufferService.cols);const B=this._bufferService.buffer,D=B.ybase+B.y,T=Math.min(B.x,q-1),W=this._optionsService.rawOptions.cursorBlink,z=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let J=H;J<=$;++J){const I=J+B.ydisp,L=this._rowElements[J],N=B.lines.get(I);if(!L||!N)break;L.replaceChildren(...this._rowFactory.createRow(N,I,I===D,z,G,T,W,this.dimensions.css.cell.width,this._widthCache,U?J===H?A:0:-1,U?(J===$?F:q)-1:-1))}}};i.DomRenderer=P=h([_(7,d.IInstantiationService),_(8,s.ICharSizeService),_(9,d.IOptionsService),_(10,d.IBufferService),_(11,s.ICoreBrowserService),_(12,s.IThemeService)],P)},3787:function(k,i,l){var h=this&&this.__decorate||function(b,w,v,C){var R,O=arguments.length,P=O<3?w:C===null?C=Object.getOwnPropertyDescriptor(w,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(b,w,v,C);else for(var A=b.length-1;A>=0;A--)(R=b[A])&&(P=(O<3?R(P):O>3?R(w,v,P):R(w,v))||P);return O>3&&P&&Object.defineProperty(w,v,P),P},_=this&&this.__param||function(b,w){return function(v,C){w(v,C,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const a=l(2223),f=l(643),m=l(511),y=l(2585),u=l(8055),s=l(4725),o=l(4269),t=l(6171),n=l(3734);let d=i.DomRendererRowFactory=class{constructor(b,w,v,C,R,O,P){this._document=b,this._characterJoinerService=w,this._optionsService=v,this._coreBrowserService=C,this._coreService=R,this._decorationService=O,this._themeService=P,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,w,v){this._selectionStart=b,this._selectionEnd=w,this._columnSelectMode=v}createRow(b,w,v,C,R,O,P,A,F,H,$){const q=[],U=this._characterJoinerService.getJoinedCharacters(w),E=this._themeService.colors;let B,D=b.getNoBgTrimmedLength();v&&D<O+1&&(D=O+1);let T=0,W="",z=0,G=0,J=0,I=!1,L=0,N=!1,j=0;const V=[],K=H!==-1&&$!==-1;for(let Z=0;Z<D;Z++){b.loadCell(Z,this._workCell);let ne=this._workCell.getWidth();if(ne===0)continue;let oe=!1,he=Z,X=this._workCell;if(U.length>0&&Z===U[0][0]){oe=!0;const re=U.shift();X=new o.JoinedCellData(this._workCell,b.translateToString(!0,re[0],re[1]),re[1]-re[0]),he=re[1]-1,ne=X.getWidth()}const Ue=this._isCellInSelection(Z,w),Lt=v&&Z===O,Rt=K&&Z>=H&&Z<=$;let Dt=!1;this._decorationService.forEachDecorationAtCell(Z,w,void 0,re=>{Dt=!0});let ht=X.getChars()||f.WHITESPACE_CELL_CHAR;if(ht===" "&&(X.isUnderline()||X.isOverline())&&(ht=""),j=ne*A-F.get(ht,X.isBold(),X.isItalic()),B){if(T&&(Ue&&N||!Ue&&!N&&X.bg===z)&&(Ue&&N&&E.selectionForeground||X.fg===G)&&X.extended.ext===J&&Rt===I&&j===L&&!Lt&&!oe&&!Dt){X.isInvisible()?W+=f.WHITESPACE_CELL_CHAR:W+=ht,T++;continue}T&&(B.textContent=W),B=this._document.createElement("span"),T=0,W=""}else B=this._document.createElement("span");if(z=X.bg,G=X.fg,J=X.extended.ext,I=Rt,L=j,N=Ue,oe&&O>=Z&&O<=he&&(O=Z),!this._coreService.isCursorHidden&&Lt&&this._coreService.isCursorInitialized){if(V.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&V.push("xterm-cursor-blink"),V.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":V.push("xterm-cursor-outline");break;case"block":V.push("xterm-cursor-block");break;case"bar":V.push("xterm-cursor-bar");break;case"underline":V.push("xterm-cursor-underline")}}if(X.isBold()&&V.push("xterm-bold"),X.isItalic()&&V.push("xterm-italic"),X.isDim()&&V.push("xterm-dim"),W=X.isInvisible()?f.WHITESPACE_CELL_CHAR:X.getChars()||f.WHITESPACE_CELL_CHAR,X.isUnderline()&&(V.push(`xterm-underline-${X.extended.underlineStyle}`),W===" "&&(W=""),!X.isUnderlineColorDefault()))if(X.isUnderlineColorRGB())B.style.textDecorationColor=`rgb(${n.AttributeData.toColorRGB(X.getUnderlineColor()).join(",")})`;else{let re=X.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&X.isBold()&&re<8&&(re+=8),B.style.textDecorationColor=E.ansi[re].css}X.isOverline()&&(V.push("xterm-overline"),W===" "&&(W="")),X.isStrikethrough()&&V.push("xterm-strikethrough"),Rt&&(B.style.textDecoration="underline");let pe=X.getFgColor(),ze=X.getFgColorMode(),ve=X.getBgColor(),qe=X.getBgColorMode();const At=!!X.isInverse();if(At){const re=pe;pe=ve,ve=re;const Yr=ze;ze=qe,qe=Yr}let we,dt,Ce,Ke=!1;switch(this._decorationService.forEachDecorationAtCell(Z,w,void 0,re=>{re.options.layer!=="top"&&Ke||(re.backgroundColorRGB&&(qe=50331648,ve=re.backgroundColorRGB.rgba>>8&16777215,we=re.backgroundColorRGB),re.foregroundColorRGB&&(ze=50331648,pe=re.foregroundColorRGB.rgba>>8&16777215,dt=re.foregroundColorRGB),Ke=re.options.layer==="top")}),!Ke&&Ue&&(we=this._coreBrowserService.isFocused?E.selectionBackgroundOpaque:E.selectionInactiveBackgroundOpaque,ve=we.rgba>>8&16777215,qe=50331648,Ke=!0,E.selectionForeground&&(ze=50331648,pe=E.selectionForeground.rgba>>8&16777215,dt=E.selectionForeground)),Ke&&V.push("xterm-decoration-top"),qe){case 16777216:case 33554432:Ce=E.ansi[ve],V.push(`xterm-bg-${ve}`);break;case 50331648:Ce=u.channels.toColor(ve>>16,ve>>8&255,255&ve),this._addStyle(B,`background-color:#${S((ve>>>0).toString(16),"0",6)}`);break;default:At?(Ce=E.foreground,V.push(`xterm-bg-${a.INVERTED_DEFAULT_COLOR}`)):Ce=E.background}switch(we||X.isDim()&&(we=u.color.multiplyOpacity(Ce,.5)),ze){case 16777216:case 33554432:X.isBold()&&pe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(pe+=8),this._applyMinimumContrast(B,Ce,E.ansi[pe],X,we,void 0)||V.push(`xterm-fg-${pe}`);break;case 50331648:const re=u.channels.toColor(pe>>16&255,pe>>8&255,255&pe);this._applyMinimumContrast(B,Ce,re,X,we,dt)||this._addStyle(B,`color:#${S(pe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(B,Ce,E.foreground,X,we,dt)||At&&V.push(`xterm-fg-${a.INVERTED_DEFAULT_COLOR}`)}V.length&&(B.className=V.join(" "),V.length=0),Lt||oe||Dt?B.textContent=W:T++,j!==this.defaultSpacing&&(B.style.letterSpacing=`${j}px`),q.push(B),Z=he}return B&&T&&(B.textContent=W),q}_applyMinimumContrast(b,w,v,C,R,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,t.treatGlyphAsBackgroundColor)(C.getCode()))return!1;const P=this._getContrastCache(C);let A;if(R||O||(A=P.getColor(w.rgba,v.rgba)),A===void 0){const F=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);A=u.color.ensureContrastRatio(R||w,O||v,F),P.setColor((R||w).rgba,(O||v).rgba,A??null)}return!!A&&(this._addStyle(b,`color:${A.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,w){b.setAttribute("style",`${b.getAttribute("style")||""}${w};`)}_isCellInSelection(b,w){const v=this._selectionStart,C=this._selectionEnd;return!(!v||!C)&&(this._columnSelectMode?v[0]<=C[0]?b>=v[0]&&w>=v[1]&&b<C[0]&&w<=C[1]:b<v[0]&&w>=v[1]&&b>=C[0]&&w<=C[1]:w>v[1]&&w<C[1]||v[1]===C[1]&&w===v[1]&&b>=v[0]&&b<C[0]||v[1]<C[1]&&w===C[1]&&b<C[0]||v[1]<C[1]&&w===v[1]&&b>=v[0])}};function S(b,w,v){for(;b.length<v;)b=w+b;return b}i.DomRendererRowFactory=d=h([_(1,s.ICharacterJoinerService),_(2,y.IOptionsService),_(3,s.ICoreBrowserService),_(4,y.ICoreService),_(5,y.IDecorationService),_(6,s.IThemeService)],d)},2550:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(l,h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=l.createElement("span");_.classList.add("xterm-char-measure-element");const a=l.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontStyle="italic";const m=l.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[_,a,f,m],this._container.appendChild(_),this._container.appendChild(a),this._container.appendChild(f),this._container.appendChild(m),h.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,h,_,a){l===this._font&&h===this._fontSize&&_===this._weight&&a===this._weightBold||(this._font=l,this._fontSize=h,this._weight=_,this._weightBold=a,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${a}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${a}`,this.clear())}get(l,h,_){let a=0;if(!h&&!_&&l.length===1&&(a=l.charCodeAt(0))<256){if(this._flat[a]!==-9999)return this._flat[a];const y=this._measure(l,0);return y>0&&(this._flat[a]=y),y}let f=l;h&&(f+="B"),_&&(f+="I");let m=this._holey.get(f);if(m===void 0){let y=0;h&&(y|=1),_&&(y|=2),m=this._measure(l,y),m>0&&this._holey.set(f,m)}return m}_measure(l,h){const _=this._measureElements[h];return _.textContent=l.repeat(32),_.offsetWidth/32}}},2223:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const h=l(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(k,i)=>{function l(_){return 57508<=_&&_<=57558}function h(_){return _>=128512&&_<=128591||_>=127744&&_<=128511||_>=128640&&_<=128767||_>=9728&&_<=9983||_>=9984&&_<=10175||_>=65024&&_<=65039||_>=129280&&_<=129535||_>=127462&&_<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},i.isPowerlineGlyph=l,i.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},i.isEmoji=h,i.allowRescaling=function(_,a,f,m){return a===1&&f>Math.ceil(1.5*m)&&_!==void 0&&_>255&&!h(_)&&!l(_)&&!function(y){return 57344<=y&&y<=63743}(_)},i.treatGlyphAsBackgroundColor=function(_){return l(_)||function(a){return 9472<=a&&a<=9631}(_)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(_,a,f=0){return(_-(2*Math.round(a)-f))%(2*Math.round(a))}},6052:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(_,a,f,m=!1){if(this.selectionStart=a,this.selectionEnd=f,!a||!f||a[0]===f[0]&&a[1]===f[1])return void this.clear();const y=_.buffers.active.ydisp,u=a[1]-y,s=f[1]-y,o=Math.max(u,0),t=Math.min(s,_.rows-1);o>=_.rows||t<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=m,this.viewportStartRow=u,this.viewportEndRow=s,this.viewportCappedStartRow=o,this.viewportCappedEndRow=t,this.startCol=a[0],this.endCol=f[0])}isCellSelected(_,a,f){return!!this.hasSelection&&(f-=_.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?a>=this.startCol&&f>=this.viewportCappedStartRow&&a<this.endCol&&f<=this.viewportCappedEndRow:a<this.startCol&&f>=this.viewportCappedStartRow&&a>=this.endCol&&f<=this.viewportCappedEndRow:f>this.viewportStartRow&&f<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&f===this.viewportStartRow&&a>=this.startCol&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportEndRow&&a<this.endCol||this.viewportStartRow<this.viewportEndRow&&f===this.viewportStartRow&&a>=this.startCol)}}i.createSelectionRenderModel=function(){return new l}},456:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,h=this.selectionEnd;return!(!l||!h)&&(l[1]>h[1]||l[1]===h[1]&&l[0]>h[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(k,i,l){var h=this&&this.__decorate||function(t,n,d,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,d):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(t,n,d,S);else for(var C=t.length-1;C>=0;C--)(b=t[C])&&(v=(w<3?b(v):w>3?b(n,d,v):b(n,d))||v);return w>3&&v&&Object.defineProperty(n,d,v),v},_=this&&this.__param||function(t,n){return function(d,S){n(d,S,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const a=l(2585),f=l(8460),m=l(844);let y=i.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(t,n,d){super(),this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=this.register(new f.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new o(this._optionsService))}catch{this._measureStrategy=this.register(new s(t,n,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};i.CharSizeService=y=h([_(2,a.IOptionsService)],y);class u extends m.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(n,d){n!==void 0&&n>0&&d!==void 0&&d>0&&(this._result.width=n,this._result.height=d)}}class s extends u{constructor(n,d,S){super(),this._document=n,this._parentElement=d,this._optionsService=S,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class o extends u{constructor(n){super(),this._optionsService=n,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const d=this._ctx.measureText("W");if(!("width"in d&&"fontBoundingBoxAscent"in d&&"fontBoundingBoxDescent"in d))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const n=this._ctx.measureText("W");return this._validateAndSet(n.width,n.fontBoundingBoxAscent+n.fontBoundingBoxDescent),this._result}}},4269:function(k,i,l){var h=this&&this.__decorate||function(o,t,n,d){var S,b=arguments.length,w=b<3?t:d===null?d=Object.getOwnPropertyDescriptor(t,n):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,t,n,d);else for(var v=o.length-1;v>=0;v--)(S=o[v])&&(w=(b<3?S(w):b>3?S(t,n,w):S(t,n))||w);return b>3&&w&&Object.defineProperty(t,n,w),w},_=this&&this.__param||function(o,t){return function(n,d){t(n,d,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const a=l(3734),f=l(643),m=l(511),y=l(2585);class u extends a.AttributeData{constructor(t,n,d){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=n,this._width=d}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=u;let s=i.CharacterJoinerService=class jr{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(t){const n={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(n),n.id}deregister(t){for(let n=0;n<this._characterJoiners.length;n++)if(this._characterJoiners[n].id===t)return this._characterJoiners.splice(n,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];const n=this._bufferService.buffer.lines.get(t);if(!n||n.length===0)return[];const d=[],S=n.translateToString(!0);let b=0,w=0,v=0,C=n.getFg(0),R=n.getBg(0);for(let O=0;O<n.getTrimmedLength();O++)if(n.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==R){if(O-b>1){const P=this._getJoinedRanges(S,v,w,n,b);for(let A=0;A<P.length;A++)d.push(P[A])}b=O,v=w,C=this._workCell.fg,R=this._workCell.bg}w+=this._workCell.getChars().length||f.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){const O=this._getJoinedRanges(S,v,w,n,b);for(let P=0;P<O.length;P++)d.push(O[P])}return d}_getJoinedRanges(t,n,d,S,b){const w=t.substring(n,d);let v=[];try{v=this._characterJoiners[0].handler(w)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{const R=this._characterJoiners[C].handler(w);for(let O=0;O<R.length;O++)jr._mergeRanges(v,R[O])}catch(R){console.error(R)}return this._stringRangesToCellRanges(v,S,b),v}_stringRangesToCellRanges(t,n,d){let S=0,b=!1,w=0,v=t[S];if(v){for(let C=d;C<this._bufferService.cols;C++){const R=n.getWidth(C),O=n.getString(C).length||f.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!b&&v[0]<=w&&(v[0]=C,b=!0),v[1]<=w){if(v[1]=C,v=t[++S],!v)break;v[0]<=w?(v[0]=C,b=!0):b=!1}w+=O}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(t,n){let d=!1;for(let S=0;S<t.length;S++){const b=t[S];if(d){if(n[1]<=b[0])return t[S-1][1]=n[1],t;if(n[1]<=b[1])return t[S-1][1]=Math.max(n[1],b[1]),t.splice(S,1),t;t.splice(S,1),S--}else{if(n[1]<=b[0])return t.splice(S,0,n),t;if(n[1]<=b[1])return b[0]=Math.min(n[0],b[0]),t;n[0]<b[1]&&(b[0]=Math.min(n[0],b[0]),d=!0)}}return d?t[t.length-1][1]=n[1]:t.push(n),t}};i.CharacterJoinerService=s=h([_(0,y.IBufferService)],s)},5114:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const h=l(844),_=l(8460),a=l(3656);class f extends h.Disposable{constructor(u,s,o){super(),this._textarea=u,this._window=s,this.mainDocument=o,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new m(this._window),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new _.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(t=>this._screenDprMonitor.setWindow(t))),this.register((0,_.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(u){this._window!==u&&(this._window=u,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=f;class m extends h.Disposable{constructor(u){super(),this._parentWindow=u,this._windowResizeListener=this.register(new h.MutableDisposable),this._onDprChange=this.register(new _.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,h.toDisposable)(()=>this.clearListener()))}setWindow(u){this._parentWindow=u,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,a.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var u;this._outerListener&&((u=this._resolutionMediaMatchList)==null||u.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const h=l(844);class _ extends h.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,h.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(f){return this.linkProviders.push(f),{dispose:()=>{const m=this.linkProviders.indexOf(f);m!==-1&&this.linkProviders.splice(m,1)}}}}i.LinkProviderService=_},8934:function(k,i,l){var h=this&&this.__decorate||function(y,u,s,o){var t,n=arguments.length,d=n<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(y,u,s,o);else for(var S=y.length-1;S>=0;S--)(t=y[S])&&(d=(n<3?t(d):n>3?t(u,s,d):t(u,s))||d);return n>3&&d&&Object.defineProperty(u,s,d),d},_=this&&this.__param||function(y,u){return function(s,o){u(s,o,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const a=l(4725),f=l(9806);let m=i.MouseService=class{constructor(y,u){this._renderService=y,this._charSizeService=u}getCoords(y,u,s,o,t){return(0,f.getCoords)(window,y,u,s,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,t)}getMouseReportCoords(y,u){const s=(0,f.getCoordsRelativeToElement)(window,y,u);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};i.MouseService=m=h([_(0,a.IRenderService),_(1,a.ICharSizeService)],m)},3230:function(k,i,l){var h=this&&this.__decorate||function(t,n,d,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,d):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(t,n,d,S);else for(var C=t.length-1;C>=0;C--)(b=t[C])&&(v=(w<3?b(v):w>3?b(n,d,v):b(n,d))||v);return w>3&&v&&Object.defineProperty(n,d,v),v},_=this&&this.__param||function(t,n){return function(d,S){n(d,S,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const a=l(6193),f=l(4725),m=l(8460),y=l(844),u=l(7226),s=l(2585);let o=i.RenderService=class extends y.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(t,n,d,S,b,w,v,C){super(),this._rowCount=t,this._charSizeService=S,this._renderer=this.register(new y.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._observerDisposable=this.register(new y.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new a.RenderDebouncer((R,O)=>this._renderRows(R,O),v),this.register(this._renderDebouncer),this.register(v.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var R;return(R=this._renderer.value)==null?void 0:R.clear()})),this.register(d.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(d.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(d.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register(C.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(v.window,n),this.register(v.onWindowChange(R=>this._registerIntersectionObserver(R,n)))}_registerIntersectionObserver(t,n){if("IntersectionObserver"in t){const d=new t.IntersectionObserver(S=>this._handleIntersectionChange(S[S.length-1]),{threshold:0});d.observe(n),this._observerDisposable.value=(0,y.toDisposable)(()=>d.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,n,d=!1){this._isPaused?this._needsFullRefresh=!0:(d||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,n,this._rowCount))}_renderRows(t,n){this._renderer.value&&(t=Math.min(t,this._rowCount-1),n=Math.min(n,this._rowCount-1),this._renderer.value.renderRows(t,n),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:n}),this._onRender.fire({start:t,end:n}),this._isNextRenderRedrawOnly=!0)}resize(t,n){this._rowCount=n,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(n=>this.refreshRows(n.start,n.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var t,n;this._renderer.value&&((n=(t=this._renderer.value).clearTextureAtlas)==null||n.call(t),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,n){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var d;return(d=this._renderer.value)==null?void 0:d.handleResize(t,n)}):this._renderer.value.handleResize(t,n),this._fullRefresh())}handleCharSizeChanged(){var t;(t=this._renderer.value)==null||t.handleCharSizeChanged()}handleBlur(){var t;(t=this._renderer.value)==null||t.handleBlur()}handleFocus(){var t;(t=this._renderer.value)==null||t.handleFocus()}handleSelectionChanged(t,n,d){var S;this._selectionState.start=t,this._selectionState.end=n,this._selectionState.columnSelectMode=d,(S=this._renderer.value)==null||S.handleSelectionChanged(t,n,d)}handleCursorMove(){var t;(t=this._renderer.value)==null||t.handleCursorMove()}clear(){var t;(t=this._renderer.value)==null||t.clear()}};i.RenderService=o=h([_(2,s.IOptionsService),_(3,f.ICharSizeService),_(4,s.IDecorationService),_(5,s.IBufferService),_(6,f.ICoreBrowserService),_(7,f.IThemeService)],o)},9312:function(k,i,l){var h=this&&this.__decorate||function(v,C,R,O){var P,A=arguments.length,F=A<3?C:O===null?O=Object.getOwnPropertyDescriptor(C,R):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(v,C,R,O);else for(var H=v.length-1;H>=0;H--)(P=v[H])&&(F=(A<3?P(F):A>3?P(C,R,F):P(C,R))||F);return A>3&&F&&Object.defineProperty(C,R,F),F},_=this&&this.__param||function(v,C){return function(R,O){C(R,O,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const a=l(9806),f=l(9504),m=l(456),y=l(4725),u=l(8460),s=l(844),o=l(6114),t=l(4841),n=l(511),d=l(2585),S="",b=new RegExp(S,"g");let w=i.SelectionService=class extends s.Disposable{constructor(v,C,R,O,P,A,F,H,$){super(),this._element=v,this._screenElement=C,this._linkifier=R,this._bufferService=O,this._coreService=P,this._mouseService=A,this._optionsService=F,this._renderService=H,this._coreBrowserService=$,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new n.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new u.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new u.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new u.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new u.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=q=>this._handleMouseMove(q),this._mouseUpListener=q=>this._handleMouseUp(q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(q=>this._handleTrim(q)),this.register(this._bufferService.buffers.onBufferActivate(q=>this._handleBufferActivate(q))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const v=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!v||!C||v[0]===C[0]&&v[1]===C[1])}get selectionText(){const v=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!v||!C)return"";const R=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(v[0]===C[0])return"";const P=v[0]<C[0]?v[0]:C[0],A=v[0]<C[0]?C[0]:v[0];for(let F=v[1];F<=C[1];F++){const H=R.translateBufferLineToString(F,!0,P,A);O.push(H)}}else{const P=v[1]===C[1]?C[0]:void 0;O.push(R.translateBufferLineToString(v[1],!0,v[0],P));for(let A=v[1]+1;A<=C[1]-1;A++){const F=R.lines.get(A),H=R.translateBufferLineToString(A,!0);F!=null&&F.isWrapped?O[O.length-1]+=H:O.push(H)}if(v[1]!==C[1]){const A=R.lines.get(C[1]),F=R.translateBufferLineToString(C[1],!0,0,C[0]);A&&A.isWrapped?O[O.length-1]+=F:O.push(F)}}return O.map(P=>P.replace(b," ")).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){const C=this._getMouseBufferCoords(v),R=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(R&&O&&C)&&this._areCoordsInSelection(C,R,O)}isCellInSelection(v,C){const R=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!R||!O)&&this._areCoordsInSelection([v,C],R,O)}_areCoordsInSelection(v,C,R){return v[1]>C[1]&&v[1]<R[1]||C[1]===R[1]&&v[1]===C[1]&&v[0]>=C[0]&&v[0]<R[0]||C[1]<R[1]&&v[1]===R[1]&&v[0]<R[0]||C[1]<R[1]&&v[1]===C[1]&&v[0]>=C[0]}_selectWordAtCursor(v,C){var P,A;const R=(A=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:A.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,t.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(v);return!!O&&(this._selectWordAt(O,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,C){this._model.clearSelection(),v=Math.max(v,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){const C=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(v){let C=(0,a.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=R?0:(C>R&&(C-=R),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(v){return o.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){const C=this._getMouseBufferCoords(v);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(v){return v.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;const C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const O=R.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){const C=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const O=(0,f.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const v=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,R=!(!v||!C||v[0]===C[0]&&v[1]===C[1]);R?v&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,C,R)):this._oldHasSelection&&this._fireOnSelectionChange(v,C,R)}_fireOnSelectionChange(v,C,R){this._oldSelectionStart=v,this._oldSelectionEnd=C,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(C=>this._handleTrim(C))}_convertViewportColToCharacterIndex(v,C){let R=C;for(let O=0;C>=O;O++){const P=v.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:P>1&&C!==O&&(R+=P-1)}return R}setSelection(v,C,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,C],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,C,R=!0,O=!0){if(v[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(v[1]);if(!A)return;const F=P.translateBufferLineToString(v[1],!1);let H=this._convertViewportColToCharacterIndex(A,v[0]),$=H;const q=v[0]-H;let U=0,E=0,B=0,D=0;if(F.charAt(H)===" "){for(;H>0&&F.charAt(H-1)===" ";)H--;for(;$<F.length&&F.charAt($+1)===" ";)$++}else{let z=v[0],G=v[0];A.getWidth(z)===0&&(U++,z--),A.getWidth(G)===2&&(E++,G++);const J=A.getString(G).length;for(J>1&&(D+=J-1,$+=J-1);z>0&&H>0&&!this._isCharWordSeparator(A.loadCell(z-1,this._workCell));){A.loadCell(z-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(U++,z--):I>1&&(B+=I-1,H-=I-1),H--,z--}for(;G<A.length&&$+1<F.length&&!this._isCharWordSeparator(A.loadCell(G+1,this._workCell));){A.loadCell(G+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(E++,G++):I>1&&(D+=I-1,$+=I-1),$++,G++}}$++;let T=H+q-U+B,W=Math.min(this._bufferService.cols,$-H+U+E-B-D);if(C||F.slice(H,$).trim()!==""){if(R&&T===0&&A.getCodePoint(0)!==32){const z=P.lines.get(v[1]-1);if(z&&A.isWrapped&&z.getCodePoint(this._bufferService.cols-1)!==32){const G=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(G){const J=this._bufferService.cols-G.start;T-=J,W+=J}}}if(O&&T+W===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const z=P.lines.get(v[1]+1);if(z!=null&&z.isWrapped&&z.getCodePoint(0)!==32){const G=this._getWordAt([0,v[1]+1],!1,!1,!0);G&&(W+=G.length)}}return{start:T,length:W}}}_selectWordAt(v,C){const R=this._getWordAt(v,C);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[R.start,v[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(v){const C=this._getWordAt(v,!0);if(C){let R=v[1];for(;C.start<0;)C.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,R]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){const C=this._bufferService.buffer.getWrappedRangeForLine(v),R={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,t.getRangeLength)(R,this._bufferService.cols)}};i.SelectionService=w=h([_(3,d.IBufferService),_(4,d.ICoreService),_(5,y.IMouseService),_(6,d.IOptionsService),_(7,y.IRenderService),_(8,y.ICoreBrowserService)],w)},4725:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const h=l(8343);i.ICharSizeService=(0,h.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),i.IMouseService=(0,h.createDecorator)("MouseService"),i.IRenderService=(0,h.createDecorator)("RenderService"),i.ISelectionService=(0,h.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,h.createDecorator)("ThemeService"),i.ILinkProviderService=(0,h.createDecorator)("LinkProviderService")},6731:function(k,i,l){var h=this&&this.__decorate||function(w,v,C,R){var O,P=arguments.length,A=P<3?v:R===null?R=Object.getOwnPropertyDescriptor(v,C):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(w,v,C,R);else for(var F=w.length-1;F>=0;F--)(O=w[F])&&(A=(P<3?O(A):P>3?O(v,C,A):O(v,C))||A);return P>3&&A&&Object.defineProperty(v,C,A),A},_=this&&this.__param||function(w,v){return function(C,R){v(C,R,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const a=l(7239),f=l(8055),m=l(8460),y=l(844),u=l(2585),s=f.css.toColor("#ffffff"),o=f.css.toColor("#000000"),t=f.css.toColor("#ffffff"),n=f.css.toColor("#000000"),d={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[f.css.toColor("#2e3436"),f.css.toColor("#cc0000"),f.css.toColor("#4e9a06"),f.css.toColor("#c4a000"),f.css.toColor("#3465a4"),f.css.toColor("#75507b"),f.css.toColor("#06989a"),f.css.toColor("#d3d7cf"),f.css.toColor("#555753"),f.css.toColor("#ef2929"),f.css.toColor("#8ae234"),f.css.toColor("#fce94f"),f.css.toColor("#729fcf"),f.css.toColor("#ad7fa8"),f.css.toColor("#34e2e2"),f.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let C=0;C<216;C++){const R=v[C/36%6|0],O=v[C/6%6|0],P=v[C%6];w.push({css:f.channels.toCss(R,O,P),rgba:f.channels.toRgba(R,O,P)})}for(let C=0;C<24;C++){const R=8+10*C;w.push({css:f.channels.toCss(R,R,R),rgba:f.channels.toRgba(R,R,R)})}return w})());let S=i.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new a.ColorContrastCache,this._halfContrastCache=new a.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:s,background:o,cursor:t,cursorAccent:n,selectionForeground:void 0,selectionBackgroundTransparent:d,selectionBackgroundOpaque:f.color.blend(o,d),selectionInactiveBackgroundTransparent:d,selectionInactiveBackgroundOpaque:f.color.blend(o,d),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){const v=this._colors;if(v.foreground=b(w.foreground,s),v.background=b(w.background,o),v.cursor=b(w.cursor,t),v.cursorAccent=b(w.cursorAccent,n),v.selectionBackgroundTransparent=b(w.selectionBackground,d),v.selectionBackgroundOpaque=f.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=b(w.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=f.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=w.selectionForeground?b(w.selectionForeground,f.NULL_COLOR):void 0,v.selectionForeground===f.NULL_COLOR&&(v.selectionForeground=void 0),f.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=f.color.opacity(v.selectionBackgroundTransparent,.3)),f.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=f.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=i.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=b(w.black,i.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=b(w.red,i.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=b(w.green,i.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=b(w.yellow,i.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=b(w.blue,i.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=b(w.magenta,i.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=b(w.cyan,i.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=b(w.white,i.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=b(w.brightBlack,i.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=b(w.brightRed,i.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=b(w.brightGreen,i.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=b(w.brightYellow,i.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=b(w.brightBlue,i.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=b(w.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=b(w.brightCyan,i.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=b(w.brightWhite,i.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const C=Math.min(v.ansi.length-16,w.extendedAnsi.length);for(let R=0;R<C;R++)v.ansi[R+16]=b(w.extendedAnsi[R],i.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(w,v){if(w!==void 0)try{return f.css.toColor(w)}catch{}return v}i.ThemeService=S=h([_(0,u.IOptionsService)],S)},6349:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const h=l(8460),_=l(844);class a extends _.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const y=new Array(m);for(let u=0;u<Math.min(m,this.length);u++)y[u]=this._array[this._getCyclicIndex(u)];this._array=y,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let y=this._length;y<m;y++)this._array[y]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,y){this._array[this._getCyclicIndex(m)]=y}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,y,...u){if(y){for(let s=m;s<this._length-y;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+y)];this._length-=y,this.onDeleteEmitter.fire({index:m,amount:y})}for(let s=this._length-1;s>=m;s--)this._array[this._getCyclicIndex(s+u.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<u.length;s++)this._array[this._getCyclicIndex(m+s)]=u[s];if(u.length&&this.onInsertEmitter.fire({index:m,amount:u.length}),this._length+u.length>this._maxLength){const s=this._length+u.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=u.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,y,u){if(!(y<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+u<0)throw new Error("Cannot shift elements in list beyond index 0");if(u>0){for(let o=y-1;o>=0;o--)this.set(m+o+u,this.get(m+o));const s=m+y+u-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<y;s++)this.set(m+s+u,this.get(m+s))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}i.CircularList=a},1439:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function l(h,_=5){if(typeof h!="object")return h;const a=Array.isArray(h)?[]:{};for(const f in h)a[f]=_<=1?h[f]:h[f]&&l(h[f],_-1);return a}},8055:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let l=0,h=0,_=0,a=0;var f,m,y,u,s;function o(n){const d=n.toString(16);return d.length<2?"0"+d:d}function t(n,d){return n<d?(d+.05)/(n+.05):(n+.05)/(d+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(n){n.toCss=function(d,S,b,w){return w!==void 0?`#${o(d)}${o(S)}${o(b)}${o(w)}`:`#${o(d)}${o(S)}${o(b)}`},n.toRgba=function(d,S,b,w=255){return(d<<24|S<<16|b<<8|w)>>>0},n.toColor=function(d,S,b,w){return{css:n.toCss(d,S,b,w),rgba:n.toRgba(d,S,b,w)}}}(f||(i.channels=f={})),function(n){function d(S,b){return a=Math.round(255*b),[l,h,_]=s.toChannels(S.rgba),{css:f.toCss(l,h,_,a),rgba:f.toRgba(l,h,_,a)}}n.blend=function(S,b){if(a=(255&b.rgba)/255,a===1)return{css:b.css,rgba:b.rgba};const w=b.rgba>>24&255,v=b.rgba>>16&255,C=b.rgba>>8&255,R=S.rgba>>24&255,O=S.rgba>>16&255,P=S.rgba>>8&255;return l=R+Math.round((w-R)*a),h=O+Math.round((v-O)*a),_=P+Math.round((C-P)*a),{css:f.toCss(l,h,_),rgba:f.toRgba(l,h,_)}},n.isOpaque=function(S){return(255&S.rgba)==255},n.ensureContrastRatio=function(S,b,w){const v=s.ensureContrastRatio(S.rgba,b.rgba,w);if(v)return f.toColor(v>>24&255,v>>16&255,v>>8&255)},n.opaque=function(S){const b=(255|S.rgba)>>>0;return[l,h,_]=s.toChannels(b),{css:f.toCss(l,h,_),rgba:b}},n.opacity=d,n.multiplyOpacity=function(S,b){return a=255&S.rgba,d(S,a*b/255)},n.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(m||(i.color=m={})),function(n){let d,S;try{const b=document.createElement("canvas");b.width=1,b.height=1;const w=b.getContext("2d",{willReadFrequently:!0});w&&(d=w,d.globalCompositeOperation="copy",S=d.createLinearGradient(0,0,1,1))}catch{}n.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return l=parseInt(b.slice(1,2).repeat(2),16),h=parseInt(b.slice(2,3).repeat(2),16),_=parseInt(b.slice(3,4).repeat(2),16),f.toColor(l,h,_);case 5:return l=parseInt(b.slice(1,2).repeat(2),16),h=parseInt(b.slice(2,3).repeat(2),16),_=parseInt(b.slice(3,4).repeat(2),16),a=parseInt(b.slice(4,5).repeat(2),16),f.toColor(l,h,_,a);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const w=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return l=parseInt(w[1]),h=parseInt(w[2]),_=parseInt(w[3]),a=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),f.toColor(l,h,_,a);if(!d||!S)throw new Error("css.toColor: Unsupported css format");if(d.fillStyle=S,d.fillStyle=b,typeof d.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(d.fillRect(0,0,1,1),[l,h,_,a]=d.getImageData(0,0,1,1).data,a!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(l,h,_,a),css:b}}}(y||(i.css=y={})),function(n){function d(S,b,w){const v=S/255,C=b/255,R=w/255;return .2126*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))+.7152*(C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}n.relativeLuminance=function(S){return d(S>>16&255,S>>8&255,255&S)},n.relativeLuminance2=d}(u||(i.rgb=u={})),function(n){function d(b,w,v){const C=b>>24&255,R=b>>16&255,O=b>>8&255;let P=w>>24&255,A=w>>16&255,F=w>>8&255,H=t(u.relativeLuminance2(P,A,F),u.relativeLuminance2(C,R,O));for(;H<v&&(P>0||A>0||F>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),F-=Math.max(0,Math.ceil(.1*F)),H=t(u.relativeLuminance2(P,A,F),u.relativeLuminance2(C,R,O));return(P<<24|A<<16|F<<8|255)>>>0}function S(b,w,v){const C=b>>24&255,R=b>>16&255,O=b>>8&255;let P=w>>24&255,A=w>>16&255,F=w>>8&255,H=t(u.relativeLuminance2(P,A,F),u.relativeLuminance2(C,R,O));for(;H<v&&(P<255||A<255||F<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),F=Math.min(255,F+Math.ceil(.1*(255-F))),H=t(u.relativeLuminance2(P,A,F),u.relativeLuminance2(C,R,O));return(P<<24|A<<16|F<<8|255)>>>0}n.blend=function(b,w){if(a=(255&w)/255,a===1)return w;const v=w>>24&255,C=w>>16&255,R=w>>8&255,O=b>>24&255,P=b>>16&255,A=b>>8&255;return l=O+Math.round((v-O)*a),h=P+Math.round((C-P)*a),_=A+Math.round((R-A)*a),f.toRgba(l,h,_)},n.ensureContrastRatio=function(b,w,v){const C=u.relativeLuminance(b>>8),R=u.relativeLuminance(w>>8);if(t(C,R)<v){if(R<C){const A=d(b,w,v),F=t(C,u.relativeLuminance(A>>8));if(F<v){const H=S(b,w,v);return F>t(C,u.relativeLuminance(H>>8))?A:H}return A}const O=S(b,w,v),P=t(C,u.relativeLuminance(O>>8));if(P<v){const A=d(b,w,v);return P>t(C,u.relativeLuminance(A>>8))?O:A}return O}},n.reduceLuminance=d,n.increaseLuminance=S,n.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]}}(s||(i.rgba=s={})),i.toPaddedHex=o,i.contrastRatio=t},8969:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const h=l(844),_=l(2585),a=l(4348),f=l(7866),m=l(744),y=l(7302),u=l(6975),s=l(8460),o=l(1753),t=l(1480),n=l(7994),d=l(9282),S=l(5435),b=l(5981),w=l(2660);let v=!1;class C extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new s.EventEmitter),this._onScroll.event(O=>{var P;(P=this._onScrollApi)==null||P.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const P in O)this.optionsService.options[P]=O[P]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new s.EventEmitter),this._instantiationService=new a.InstantiationService,this.optionsService=this.register(new y.OptionsService(O)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(f.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(u.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(t.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(n.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,s.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,s.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,s.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,s.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,s.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,P){this._writeBuffer.write(O,P)}writeSync(O,P){this._logService.logLevel<=_.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(O,P)}input(O,P=!0){this.coreService.triggerDataEvent(O,P)}resize(O,P){isNaN(O)||isNaN(P)||(O=Math.max(O,m.MINIMUM_COLS),P=Math.max(P,m.MINIMUM_ROWS),this._bufferService.resize(O,P))}scroll(O,P=!1){this._bufferService.scroll(O,P)}scrollLines(O,P,A){this._bufferService.scrollLines(O,P,A)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const P=O-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(O,P){return this._inputHandler.registerEscHandler(O,P)}registerDcsHandler(O,P){return this._inputHandler.registerDcsHandler(O,P)}registerCsiHandler(O,P){return this._inputHandler.registerCsiHandler(O,P)}registerOscHandler(O,P){return this._inputHandler.registerOscHandler(O,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?O=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(d.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,d.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const P of O)P.dispose()})}}}i.CoreTerminal=C},8460:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===l)return void this._listeners.splice(h,1)}}})),this._event}fire(l,h){const _=[];for(let a=0;a<this._listeners.length;a++)_.push(this._listeners[a]);for(let a=0;a<_.length;a++)_[a].call(void 0,l,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(l,h){return l(_=>h.fire(_))},i.runAndSubscribe=function(l,h){return h(void 0),l(_=>h(_))}},5435:function(k,i,l){var h=this&&this.__decorate||function(U,E,B,D){var T,W=arguments.length,z=W<3?E:D===null?D=Object.getOwnPropertyDescriptor(E,B):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(U,E,B,D);else for(var G=U.length-1;G>=0;G--)(T=U[G])&&(z=(W<3?T(z):W>3?T(E,B,z):T(E,B))||z);return W>3&&z&&Object.defineProperty(E,B,z),z},_=this&&this.__param||function(U,E){return function(B,D){E(B,D,U)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const a=l(2584),f=l(7116),m=l(2015),y=l(844),u=l(482),s=l(8437),o=l(8460),t=l(643),n=l(511),d=l(3734),S=l(2585),b=l(1480),w=l(6242),v=l(6351),C=l(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function P(U,E){if(U>24)return E.setWinLines||!1;switch(U){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var A;(function(U){U[U.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",U[U.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let F=0;class H extends y.Disposable{getAttrData(){return this._curAttrData}constructor(E,B,D,T,W,z,G,J,I=new m.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=B,this._coreService=D,this._logService=T,this._optionsService=W,this._oscLinkService=z,this._coreMouseService=G,this._unicodeService=J,this._parser=I,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new u.StringToUtf32,this._utf8Decoder=new u.Utf8ToUtf32,this._workCell=new n.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:N.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,N,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:N,data:j})}),this._parser.setDcsHandlerFallback((L,N,j)=>{N==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:N,payload:j})}),this._parser.setPrintHandler((L,N,j)=>this.print(L,N,j)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(a.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(a.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(a.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(a.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(a.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(a.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(a.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(a.C1.IND,()=>this.index()),this._parser.setExecuteHandler(a.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(a.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new w.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new w.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new w.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new w.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new w.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new w.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new w.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new w.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new w.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new w.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new w.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in f.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new v.DcsHandler((L,N)=>this.requestStatusString(L,N)))}_preserveStack(E,B,D,T){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=D,this._parseStack.position=T}_logSlowResolvingAsync(E){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([E,new Promise((B,D)=>setTimeout(()=>D("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,B){let D,T=this._activeBuffer.x,W=this._activeBuffer.y,z=0;const G=this._parseStack.paused;if(G){if(D=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(D),D;T=this._parseStack.cursorStartX,W=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>O&&(z=this._parseStack.position+O)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,L=>String.fromCharCode(L)).join("")}"`),typeof E=="string"?E.split("").map(L=>L.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(E.length,O))),G||this._dirtyRowTracker.clearRange(),E.length>O)for(let L=z;L<E.length;L+=O){const N=L+O<E.length?L+O:E.length,j=typeof E=="string"?this._stringDecoder.decode(E.substring(L,N),this._parseBuffer):this._utf8Decoder.decode(E.subarray(L,N),this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,j))return this._preserveStack(T,W,j,L),this._logSlowResolvingAsync(D),D}else if(!G){const L=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,L))return this._preserveStack(T,W,L,0),this._logSlowResolvingAsync(D),D}this._activeBuffer.x===T&&this._activeBuffer.y===W||this._onCursorMove.fire();const J=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),I=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);I<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(I,this._bufferService.rows-1),Math.min(J,this._bufferService.rows-1))}print(E,B,D){let T,W;const z=this._charsetService.charset,G=this._optionsService.rawOptions.screenReaderMode,J=this._bufferService.cols,I=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,N=this._curAttrData;let j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&D-B>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodepoint(this._activeBuffer.x-1,0,1,N);let V=this._parser.precedingJoinState;for(let K=B;K<D;++K){if(T=E[K],T<127&&z){const he=z[String.fromCharCode(T)];he&&(T=he.charCodeAt(0))}const Z=this._unicodeService.charProperties(T,V);W=b.UnicodeService.extractWidth(Z);const ne=b.UnicodeService.extractShouldJoin(Z),oe=ne?b.UnicodeService.extractWidth(V):0;if(V=Z,G&&this._onA11yChar.fire((0,u.stringFromCodePoint)(T)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+W-oe>J){if(I){const he=j;let X=this._activeBuffer.x-oe;for(this._activeBuffer.x=oe,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),oe>0&&j instanceof s.BufferLine&&j.copyCellsFrom(he,X,0,oe,!1);X<J;)he.setCellFromCodepoint(X++,0,1,N)}else if(this._activeBuffer.x=J-1,W===2)continue}if(ne&&this._activeBuffer.x){const he=j.getWidth(this._activeBuffer.x-1)?1:2;j.addCodepointToCell(this._activeBuffer.x-he,T,W);for(let X=W-oe;--X>=0;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,N)}else if(L&&(j.insertCells(this._activeBuffer.x,W-oe,this._activeBuffer.getNullCell(N)),j.getWidth(J-1)===2&&j.setCellFromCodepoint(J-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,N)),j.setCellFromCodepoint(this._activeBuffer.x++,T,W,N),W>0)for(;--W;)j.setCellFromCodepoint(this._activeBuffer.x++,0,0,N)}this._parser.precedingJoinState=V,this._activeBuffer.x<J&&D-B>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodepoint(this._activeBuffer.x,0,1,N),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,B){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,B):this._parser.registerCsiHandler(E,D=>!P(D.params[0],this._optionsService.rawOptions.windowOptions)||B(D))}registerDcsHandler(E,B){return this._parser.registerDcsHandler(E,new v.DcsHandler(B))}registerEscHandler(E,B){return this._parser.registerEscHandler(E,B)}registerOscHandler(E,B){return this._parser.registerOscHandler(E,new w.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=E,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+B)}cursorUp(E){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const B=E.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=E.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=E.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const B=E.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,B,D,T=!1,W=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);z.replaceCells(B,D,this._activeBuffer.getNullCell(this._eraseAttrData()),W),T&&(z.isWrapped=!1)}_resetBufferLine(E,B=!1){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);D&&(D.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),D.isWrapped=!1)}eraseInDisplay(E,B=!1){let D;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);D<this._bufferService.rows;D++)this._resetBufferLine(D,B);this._dirtyRowTracker.markDirty(D);break;case 1:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(D+1).isWrapped=!1);D--;)this._resetBufferLine(D,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(D=this._bufferService.rows,this._dirtyRowTracker.markDirty(D-1);D--;)this._resetBufferLine(D,B);this._dirtyRowTracker.markDirty(0);break;case 3:const T=this._activeBuffer.lines.length-this._bufferService.rows;T>0&&(this._activeBuffer.lines.trimStart(T),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-T,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-T,0),this._onScroll.fire(0))}return!0}eraseInLine(E,B=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let B=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y,T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-T+1;for(;B--;)this._activeBuffer.lines.splice(W-1,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let B=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y;let T;for(T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,T=this._bufferService.rows-1+this._activeBuffer.ybase-T;B--;)this._activeBuffer.lines.splice(D,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let B=E.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let B=E.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=E.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){const B=this._parser.precedingJoinState;if(!B)return!0;const D=E.params[0]||1,T=b.UnicodeService.extractWidth(B),W=this._activeBuffer.x-T,z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(W),G=new Uint32Array(z.length*D);let J=0;for(let L=0;L<z.length;){const N=z.codePointAt(L)||0;G[J++]=N,L+=N>65535?2:1}let I=J;for(let L=1;L<D;++L)G.copyWithin(I,0,J),I+=J;return this.print(G,0,I),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(a.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(a.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(a.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(a.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(a.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),this._charsetService.setgCharset(1,f.DEFAULT_CHARSET),this._charsetService.setgCharset(2,f.DEFAULT_CHARSET),this._charsetService.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let B=0;B<E.length;B++)switch(E.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,B){const D=this._coreService.decPrivateModes,{activeProtocol:T,activeEncoding:W}=this._coreMouseService,z=this._coreService,{buffers:G,cols:J}=this._bufferService,{active:I,alt:L}=G,N=this._optionsService.rawOptions,j=ne=>ne?1:2,V=E.params[0];return K=V,Z=B?V===2?4:V===4?j(z.modes.insertMode):V===12?3:V===20?j(N.convertEol):0:V===1?j(D.applicationCursorKeys):V===3?N.windowOptions.setWinLines?J===80?2:J===132?1:0:0:V===6?j(D.origin):V===7?j(D.wraparound):V===8?3:V===9?j(T==="X10"):V===12?j(N.cursorBlink):V===25?j(!z.isCursorHidden):V===45?j(D.reverseWraparound):V===66?j(D.applicationKeypad):V===67?4:V===1e3?j(T==="VT200"):V===1002?j(T==="DRAG"):V===1003?j(T==="ANY"):V===1004?j(D.sendFocus):V===1005?4:V===1006?j(W==="SGR"):V===1015?4:V===1016?j(W==="SGR_PIXELS"):V===1048?1:V===47||V===1047||V===1049?j(I===L):V===2004?j(D.bracketedPasteMode):0,z.triggerDataEvent(`${a.C0.ESC}[${B?"":"?"}${K};${Z}$y`),!0;var K,Z}_updateAttrColor(E,B,D,T,W){return B===2?(E|=50331648,E&=-16777216,E|=d.AttributeData.fromColorRGB([D,T,W])):B===5&&(E&=-50331904,E|=33554432|255&D),E}_extractColor(E,B,D){const T=[0,0,-1,0,0,0];let W=0,z=0;do{if(T[z+W]=E.params[B+z],E.hasSubParams(B+z)){const G=E.getSubParams(B+z);let J=0;do T[1]===5&&(W=1),T[z+J+1+W]=G[J];while(++J<G.length&&J+z+1+W<T.length);break}if(T[1]===5&&z+W>=2||T[1]===2&&z+W>=5)break;T[1]&&(W=1)}while(++z+B<E.length&&z+W<T.length);for(let G=2;G<T.length;++G)T[G]===-1&&(T[G]=0);switch(T[0]){case 38:D.fg=this._updateAttrColor(D.fg,T[1],T[3],T[4],T[5]);break;case 48:D.bg=this._updateAttrColor(D.bg,T[1],T[3],T[4],T[5]);break;case 58:D.extended=D.extended.clone(),D.extended.underlineColor=this._updateAttrColor(D.extended.underlineColor,T[1],T[3],T[4],T[5])}return z}_processUnderline(E,B){B.extended=B.extended.clone(),(!~E||E>5)&&(E=1),B.extended.underlineStyle=E,B.fg|=268435456,E===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(E){E.fg=s.DEFAULT_ATTR_DATA.fg,E.bg=s.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=E.length;let D;const T=this._curAttrData;for(let W=0;W<B;W++)D=E.params[W],D>=30&&D<=37?(T.fg&=-50331904,T.fg|=16777216|D-30):D>=40&&D<=47?(T.bg&=-50331904,T.bg|=16777216|D-40):D>=90&&D<=97?(T.fg&=-50331904,T.fg|=16777224|D-90):D>=100&&D<=107?(T.bg&=-50331904,T.bg|=16777224|D-100):D===0?this._processSGR0(T):D===1?T.fg|=134217728:D===3?T.bg|=67108864:D===4?(T.fg|=268435456,this._processUnderline(E.hasSubParams(W)?E.getSubParams(W)[0]:1,T)):D===5?T.fg|=536870912:D===7?T.fg|=67108864:D===8?T.fg|=1073741824:D===9?T.fg|=2147483648:D===2?T.bg|=134217728:D===21?this._processUnderline(2,T):D===22?(T.fg&=-134217729,T.bg&=-134217729):D===23?T.bg&=-67108865:D===24?(T.fg&=-268435457,this._processUnderline(0,T)):D===25?T.fg&=-536870913:D===27?T.fg&=-67108865:D===28?T.fg&=-1073741825:D===29?T.fg&=2147483647:D===39?(T.fg&=-67108864,T.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):D===49?(T.bg&=-67108864,T.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):D===38||D===48||D===58?W+=this._extractColor(E,W,T):D===53?T.bg|=1073741824:D===55?T.bg&=-1073741825:D===59?(T.extended=T.extended.clone(),T.extended.underlineColor=-1,T.updateExtended()):D===100?(T.fg&=-67108864,T.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,T.bg&=-67108864,T.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",D);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${a.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[${B};${D}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const B=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[?${B};${D}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const B=E.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const D=B%2==1;return this._optionsService.options.cursorBlink=D,!0}setScrollRegion(E){const B=E.params[0]||1;let D;return(E.length<2||(D=E.params[1])>this._bufferService.rows||D===0)&&(D=this._bufferService.rows),D>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=D-1,this._setCursor(0,0)),!0}windowOptions(E){if(!P(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${a.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const B=[],D=E.split(";");for(;D.length>1;){const T=D.shift(),W=D.shift();if(/^\d+$/.exec(T)){const z=parseInt(T);if(q(z))if(W==="?")B.push({type:0,index:z});else{const G=(0,C.parseColor)(W);G&&B.push({type:1,index:z,color:G})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(E){const B=E.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(E,B){this._getCurrentLinkId()&&this._finishHyperlink();const D=E.split(":");let T;const W=D.findIndex(z=>z.startsWith("id="));return W!==-1&&(T=D[W].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:T,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,B){const D=E.split(";");for(let T=0;T<D.length&&!(B>=this._specialColors.length);++T,++B)if(D[T]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const W=(0,C.parseColor)(D[T]);W&&this._onColor.fire([{type:1,index:this._specialColors[B],color:W}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const B=[],D=E.split(";");for(let T=0;T<D.length;++T)if(/^\d+$/.exec(D[T])){const W=parseInt(D[T]);q(W)&&B.push({type:2,index:W})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(R[E[0]],f.CHARSETS[E[1]]||f.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new n.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const D=this._activeBuffer.ybase+this._activeBuffer.y+B,T=this._activeBuffer.lines.get(D);T&&(T.fill(E),T.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,B){const D=this._bufferService.buffer,T=this._optionsService.rawOptions;return(W=>(this._coreService.triggerDataEvent(`${a.C0.ESC}${W}${a.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${D.scrollTop+1};${D.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[T.cursorStyle]-(T.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,B){this._dirtyRowTracker.markRangeDirty(E,B)}}i.InputHandler=H;let $=class{constructor(U){this._bufferService=U,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(U){U<this.start?this.start=U:U>this.end&&(this.end=U)}markRangeDirty(U,E){U>E&&(F=U,U=E,E=F),U<this.start&&(this.start=U),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function q(U){return 0<=U&&U<256}$=h([_(0,S.IBufferService)],$)},844:(k,i)=>{function l(h){for(const _ of h)_.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const _=this._disposables.indexOf(h);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var _;this._isDisposed||h===this._value||((_=this._value)==null||_.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)==null||h.dispose(),this._value=void 0}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=l,i.getDisposeArrayDisposable=function(h){return{dispose:()=>l(h)}}},1505:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(_,a,f){this._data[_]||(this._data[_]={}),this._data[_][a]=f}get(_,a){return this._data[_]?this._data[_][a]:void 0}clear(){this._data={}}}i.TwoKeyMap=l,i.FourKeyMap=class{constructor(){this._data=new l}set(h,_,a,f,m){this._data.get(h,_)||this._data.set(h,_,new l),this._data.get(h,_).set(a,f,m)}get(h,_,a,f){var m;return(m=this._data.get(h,_))==null?void 0:m.get(a,f)}clear(){this._data.clear()}}},6114:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const l=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=l.includes("Firefox"),i.isLegacyEdge=l.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(l),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=l.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(l)},6106:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let l=0;i.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(l=this._search(this._getKey(h)),this._array.splice(l,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const _=this._getKey(h);if(_===void 0||(l=this._search(_),l===-1)||this._getKey(this._array[l])!==_)return!1;do if(this._array[l]===h)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===_);return!1}*getKeyIterator(h){if(this._array.length!==0&&(l=this._search(h),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===h))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===h)}forEachByKey(h,_){if(this._array.length!==0&&(l=this._search(h),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===h))do _(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===h)}values(){return[...this._array].values()}_search(h){let _=0,a=this._array.length-1;for(;a>=_;){let f=_+a>>1;const m=this._getKey(this._array[f]);if(m>h)a=f-1;else{if(!(m<h)){for(;f>0&&this._getKey(this._array[f-1])===h;)f--;return f}_=f+1}}return _}}},7226:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const h=l(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let y=0,u=0,s=m.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),u=Math.max(y,u),o=m.timeRemaining(),1.5*u>o)return s-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-y))}ms`),void this._start();s=o}this.clear()}}class a extends _{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const y=Date.now()+m;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}i.PriorityTaskQueue=a,i.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(f){return requestIdleCallback(f)}_cancelCallback(f){cancelIdleCallback(f)}}:a,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(f){this._queue.clear(),this._queue.enqueue(f)}flush(){this._queue.flush()}}},9282:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const h=l(643);i.updateWindowsModeWrappedState=function(_){const a=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),f=a==null?void 0:a.get(_.cols-1),m=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);m&&f&&(m.isWrapped=f[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&f[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){const a=new l;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=l;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}get underlineVariantOffset(){const a=(3758096384&this._ext)>>29;return a<0?4294967288^a:a}set underlineVariantOffset(a){this._ext&=536870911,this._ext|=a<<29&3758096384}constructor(a=0,f=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=f}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=h},9092:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const h=l(6349),_=l(7226),a=l(3734),f=l(8437),m=l(4634),y=l(511),u=l(643),s=l(4863),o=l(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(t,n,d){this._hasScrollback=t,this._optionsService=n,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,u.WHITESPACE_CELL_CHAR,u.WHITESPACE_CELL_WIDTH,u.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell}getBlankLine(t,n){return new f.BufferLine(this._bufferService.cols,this.getNullCell(t),n)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;const n=t+this._optionsService.rawOptions.scrollback;return n>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:n}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=f.DEFAULT_ATTR_DATA);let n=this._rows;for(;n--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,n){const d=this.getNullCell(f.DEFAULT_ATTR_DATA);let S=0;const b=this._getCorrectBufferLength(n);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<t)for(let v=0;v<this.lines.length;v++)S+=+this.lines.get(v).resize(t,d);let w=0;if(this._rows<n)for(let v=this._rows;v<n;v++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new f.BufferLine(t,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(t,d)));else for(let v=this._rows;v>n;v--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){const v=this.lines.length-b;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=b}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,n-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(t,n),this._cols>t))for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(t,d);this._cols=t,this._rows=n,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let n=0;for(;this._memoryCleanupPosition<this.lines.length;)if(n+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),n>100)return!0;return t}get _isReflowEnabled(){const t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,n){this._cols!==t&&(t>this._cols?this._reflowLarger(t,n):this._reflowSmaller(t,n))}_reflowLarger(t,n){const d=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(d.length>0){const S=(0,m.reflowLargerCreateNewLayout)(this.lines,d);(0,m.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(t,n,S.countRemoved)}}_reflowLargerAdjustViewport(t,n,d){const S=this.getNullCell(f.DEFAULT_ATTR_DATA);let b=d;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new f.BufferLine(t,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)}_reflowSmaller(t,n){const d=this.getNullCell(f.DEFAULT_ATTR_DATA),S=[];let b=0;for(let w=this.lines.length-1;w>=0;w--){let v=this.lines.get(w);if(!v||!v.isWrapped&&v.getTrimmedLength()<=t)continue;const C=[v];for(;v.isWrapped&&w>0;)v=this.lines.get(--w),C.unshift(v);const R=this.ybase+this.y;if(R>=w&&R<w+C.length)continue;const O=C[C.length-1].getTrimmedLength(),P=(0,m.reflowSmallerGetNewLineLengths)(C,this._cols,t),A=P.length-C.length;let F;F=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const H=[];for(let D=0;D<A;D++){const T=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);H.push(T)}H.length>0&&(S.push({start:w+C.length+b,newLines:H}),b+=H.length),C.push(...H);let $=P.length-1,q=P[$];q===0&&($--,q=P[$]);let U=C.length-A-1,E=O;for(;U>=0;){const D=Math.min(E,q);if(C[$]===void 0)break;if(C[$].copyCellsFrom(C[U],E-D,q-D,D,!0),q-=D,q===0&&($--,q=P[$]),E-=D,E===0){U--;const T=Math.max(U,0);E=(0,m.getWrappedLineTrimmedLength)(C,T,this._cols)}}for(let D=0;D<C.length;D++)P[D]<t&&C[D].setCell(P[D],d);let B=A-F;for(;B-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+n-1)}if(S.length>0){const w=[],v=[];for(let $=0;$<this.lines.length;$++)v.push(this.lines.get($));const C=this.lines.length;let R=C-1,O=0,P=S[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let A=0;for(let $=Math.min(this.lines.maxLength-1,C+b-1);$>=0;$--)if(P&&P.start>R+A){for(let q=P.newLines.length-1;q>=0;q--)this.lines.set($--,P.newLines[q]);$++,w.push({index:R+1,amount:P.newLines.length}),A+=P.newLines.length,P=S[++O]}else this.lines.set($,v[R--]);let F=0;for(let $=w.length-1;$>=0;$--)w[$].index+=F,this.lines.onInsertEmitter.fire(w[$]),F+=w[$].amount;const H=Math.max(0,C+b-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}translateBufferLineToString(t,n,d=0,S){const b=this.lines.get(t);return b?b.translateToString(n,d,S):""}getWrappedRangeForLine(t){let n=t,d=t;for(;n>0&&this.lines.get(n).isWrapped;)n--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:n,last:d}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].line===t&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose(),this.markers.splice(t--,1);this._isClearing=!1}addMarker(t){const n=new s.Marker(t);return this.markers.push(n),n.register(this.lines.onTrim(d=>{n.line-=d,n.line<0&&n.dispose()})),n.register(this.lines.onInsert(d=>{n.line>=d.index&&(n.line+=d.amount)})),n.register(this.lines.onDelete(d=>{n.line>=d.index&&n.line<d.index+d.amount&&n.dispose(),n.line>d.index&&(n.line-=d.amount)})),n.register(n.onDispose(()=>this._removeMarker(n))),n}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}}},8437:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const h=l(3734),_=l(511),a=l(643),f=l(482);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let m=0;class y{constructor(s,o,t=!1){this.isWrapped=t,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);const n=o||_.CellData.fromCharData([0,a.NULL_CELL_CHAR,a.NULL_CELL_WIDTH,a.NULL_CELL_CODE]);for(let d=0;d<s;++d)this.setCell(d,n);this.length=s}get(s){const o=this._data[3*s+0],t=2097151&o;return[this._data[3*s+1],2097152&o?this._combined[s]:t?(0,f.stringFromCodePoint)(t):"",o>>22,2097152&o?this._combined[s].charCodeAt(this._combined[s].length-1):t]}set(s,o){this._data[3*s+1]=o[a.CHAR_DATA_ATTR_INDEX],o[a.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=o[1],this._data[3*s+0]=2097152|s|o[a.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=o[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[a.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(s){return this._data[3*s+0]>>22}hasWidth(s){return 12582912&this._data[3*s+0]}getFg(s){return this._data[3*s+1]}getBg(s){return this._data[3*s+2]}hasContent(s){return 4194303&this._data[3*s+0]}getCodePoint(s){const o=this._data[3*s+0];return 2097152&o?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&o}isCombined(s){return 2097152&this._data[3*s+0]}getString(s){const o=this._data[3*s+0];return 2097152&o?this._combined[s]:2097151&o?(0,f.stringFromCodePoint)(2097151&o):""}isProtected(s){return 536870912&this._data[3*s+2]}loadCell(s,o){return m=3*s,o.content=this._data[m+0],o.fg=this._data[m+1],o.bg=this._data[m+2],2097152&o.content&&(o.combinedData=this._combined[s]),268435456&o.bg&&(o.extended=this._extendedAttrs[s]),o}setCell(s,o){2097152&o.content&&(this._combined[s]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[s]=o.extended),this._data[3*s+0]=o.content,this._data[3*s+1]=o.fg,this._data[3*s+2]=o.bg}setCellFromCodepoint(s,o,t,n){268435456&n.bg&&(this._extendedAttrs[s]=n.extended),this._data[3*s+0]=o|t<<22,this._data[3*s+1]=n.fg,this._data[3*s+2]=n.bg}addCodepointToCell(s,o,t){let n=this._data[3*s+0];2097152&n?this._combined[s]+=(0,f.stringFromCodePoint)(o):2097151&n?(this._combined[s]=(0,f.stringFromCodePoint)(2097151&n)+(0,f.stringFromCodePoint)(o),n&=-2097152,n|=2097152):n=o|4194304,t&&(n&=-12582913,n|=t<<22),this._data[3*s+0]=n}insertCells(s,o,t){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,t),o<this.length-s){const n=new _.CellData;for(let d=this.length-s-o-1;d>=0;--d)this.setCell(s+o+d,this.loadCell(s+d,n));for(let d=0;d<o;++d)this.setCell(s+d,t)}else for(let n=s;n<this.length;++n)this.setCell(n,t);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,t)}deleteCells(s,o,t){if(s%=this.length,o<this.length-s){const n=new _.CellData;for(let d=0;d<this.length-s-o;++d)this.setCell(s+d,this.loadCell(s+o+d,n));for(let d=this.length-o;d<this.length;++d)this.setCell(d,t)}else for(let n=s;n<this.length;++n)this.setCell(n,t);s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,t),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodepoint(s,0,1,t)}replaceCells(s,o,t,n=!1){if(n)for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodepoint(s-1,0,1,t),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodepoint(o,0,1,t);s<o&&s<this.length;)this.isProtected(s)||this.setCell(s,t),s++;else for(s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,t),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o,0,1,t);s<o&&s<this.length;)this.setCell(s++,t)}resize(s,o){if(s===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const t=3*s;if(s>this.length){if(this._data.buffer.byteLength>=4*t)this._data=new Uint32Array(this._data.buffer,0,t);else{const n=new Uint32Array(t);n.set(this._data),this._data=n}for(let n=this.length;n<s;++n)this.setCell(n,o)}else{this._data=this._data.subarray(0,t);const n=Object.keys(this._combined);for(let S=0;S<n.length;S++){const b=parseInt(n[S],10);b>=s&&delete this._combined[b]}const d=Object.keys(this._extendedAttrs);for(let S=0;S<d.length;S++){const b=parseInt(d[S],10);b>=s&&delete this._extendedAttrs[b]}}return this.length=s,4*t*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,o=!1){if(o)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,s);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,s)}}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(const o in s._combined)this._combined[o]=s._combined[o];this._extendedAttrs={};for(const o in s._extendedAttrs)this._extendedAttrs[o]=s._extendedAttrs[o];this.isWrapped=s.isWrapped}clone(){const s=new y(0);s._data=new Uint32Array(this._data),s.length=this.length;for(const o in this._combined)s._combined[o]=this._combined[o];for(const o in this._extendedAttrs)s._extendedAttrs[o]=this._extendedAttrs[o];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0]||50331648&this._data[3*s+2])return s+(this._data[3*s+0]>>22);return 0}copyCellsFrom(s,o,t,n,d){const S=s._data;if(d)for(let w=n-1;w>=0;w--){for(let v=0;v<3;v++)this._data[3*(t+w)+v]=S[3*(o+w)+v];268435456&S[3*(o+w)+2]&&(this._extendedAttrs[t+w]=s._extendedAttrs[o+w])}else for(let w=0;w<n;w++){for(let v=0;v<3;v++)this._data[3*(t+w)+v]=S[3*(o+w)+v];268435456&S[3*(o+w)+2]&&(this._extendedAttrs[t+w]=s._extendedAttrs[o+w])}const b=Object.keys(s._combined);for(let w=0;w<b.length;w++){const v=parseInt(b[w],10);v>=o&&(this._combined[v-o+t]=s._combined[v])}}translateToString(s,o,t,n){o=o??0,t=t??this.length,s&&(t=Math.min(t,this.getTrimmedLength())),n&&(n.length=0);let d="";for(;o<t;){const S=this._data[3*o+0],b=2097151&S,w=2097152&S?this._combined[o]:b?(0,f.stringFromCodePoint)(b):a.WHITESPACE_CELL_CHAR;if(d+=w,n)for(let v=0;v<w.length;++v)n.push(o);o+=S>>22||1}return n&&n.push(o),d}}i.BufferLine=y},4841:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(l,h){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return h*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(k,i)=>{function l(h,_,a){if(_===h.length-1)return h[_].getTrimmedLength();const f=!h[_].hasContent(a-1)&&h[_].getWidth(a-1)===1,m=h[_+1].getWidth(0)===2;return f&&m?a-1:a}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(h,_,a,f,m){const y=[];for(let u=0;u<h.length-1;u++){let s=u,o=h.get(++s);if(!o.isWrapped)continue;const t=[h.get(u)];for(;s<h.length&&o.isWrapped;)t.push(o),o=h.get(++s);if(f>=u&&f<s){u+=t.length-1;continue}let n=0,d=l(t,n,_),S=1,b=0;for(;S<t.length;){const v=l(t,S,_),C=v-b,R=a-d,O=Math.min(C,R);t[n].copyCellsFrom(t[S],b,d,O,!1),d+=O,d===a&&(n++,d=0),b+=O,b===v&&(S++,b=0),d===0&&n!==0&&t[n-1].getWidth(a-1)===2&&(t[n].copyCellsFrom(t[n-1],a-1,d++,1,!1),t[n-1].setCell(a-1,m))}t[n].replaceCells(d,a,m);let w=0;for(let v=t.length-1;v>0&&(v>n||t[v].getTrimmedLength()===0);v--)w++;w>0&&(y.push(u+t.length-w),y.push(w)),u+=t.length-1}return y},i.reflowLargerCreateNewLayout=function(h,_){const a=[];let f=0,m=_[f],y=0;for(let u=0;u<h.length;u++)if(m===u){const s=_[++f];h.onDeleteEmitter.fire({index:u-y,amount:s}),u+=s-1,y+=s,m=_[++f]}else a.push(u);return{layout:a,countRemoved:y}},i.reflowLargerApplyNewLayout=function(h,_){const a=[];for(let f=0;f<_.length;f++)a.push(h.get(_[f]));for(let f=0;f<a.length;f++)h.set(f,a[f]);h.length=_.length},i.reflowSmallerGetNewLineLengths=function(h,_,a){const f=[],m=h.map((o,t)=>l(h,t,_)).reduce((o,t)=>o+t);let y=0,u=0,s=0;for(;s<m;){if(m-s<a){f.push(m-s);break}y+=a;const o=l(h,u,_);y>o&&(y-=o,u++);const t=h[u].getWidth(y-1)===2;t&&y--;const n=t?a-1:a;f.push(n),s+=n}return f},i.getWrappedLineTrimmedLength=l},5295:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const h=l(8460),_=l(844),a=l(9092);class f extends _.Disposable{constructor(y,u){super(),this._optionsService=y,this._bufferService=u,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,u){this._normal.resize(y,u),this._alt.resize(y,u),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}i.BufferSet=f},511:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const h=l(482),_=l(643),a=l(3734);class f extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const u=new f;return u.setFromCharData(y),u}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let u=!1;if(y[_.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(y[_.CHAR_DATA_CHAR_INDEX].length===2){const s=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const o=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(s-55296)+o-56320+65536|y[_.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[_.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=y[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=f},643:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const h=l(8460),_=l(844);class a{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=a._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}i.Marker=a,a._nextId=1},7116:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(k,i)=>{var l,h,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(a){a.NUL="\0",a.SOH="",a.STX="",a.ETX="",a.EOT="",a.ENQ="",a.ACK="",a.BEL="\x07",a.BS="\b",a.HT="	",a.LF=`
`,a.VT="\v",a.FF="\f",a.CR="\r",a.SO="",a.SI="",a.DLE="",a.DC1="",a.DC2="",a.DC3="",a.DC4="",a.NAK="",a.SYN="",a.ETB="",a.CAN="",a.EM="",a.SUB="",a.ESC="\x1B",a.FS="",a.GS="",a.RS="",a.US="",a.SP=" ",a.DEL=""}(l||(i.C0=l={})),function(a){a.PAD="",a.HOP="",a.BPH="",a.NBH="",a.IND="",a.NEL="",a.SSA="",a.ESA="",a.HTS="",a.HTJ="",a.VTS="",a.PLD="",a.PLU="",a.RI="",a.SS2="",a.SS3="",a.DCS="",a.PU1="",a.PU2="",a.STS="",a.CCH="",a.MW="",a.SPA="",a.EPA="",a.SOS="",a.SGCI="",a.SCI="",a.CSI="",a.ST="",a.OSC="",a.PM="",a.APC=""}(h||(i.C1=h={})),function(a){a.ST=`${l.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const h=l(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(a,f,m,y){const u={type:0,cancel:!1,key:void 0},s=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:a.key==="UIKeyInputUpArrow"?u.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A":a.key==="UIKeyInputLeftArrow"?u.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D":a.key==="UIKeyInputRightArrow"?u.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C":a.key==="UIKeyInputDownArrow"&&(u.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:u.key=a.ctrlKey?"\b":h.C0.DEL,a.altKey&&(u.key=h.C0.ESC+u.key);break;case 9:if(a.shiftKey){u.key=h.C0.ESC+"[Z";break}u.key=h.C0.HT,u.cancel=!0;break;case 13:u.key=a.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,u.cancel=!0;break;case 27:u.key=h.C0.ESC,a.altKey&&(u.key=h.C0.ESC+h.C0.ESC),u.cancel=!0;break;case 37:if(a.metaKey)break;s?(u.key=h.C0.ESC+"[1;"+(s+1)+"D",u.key===h.C0.ESC+"[1;3D"&&(u.key=h.C0.ESC+(m?"b":"[1;5D"))):u.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(a.metaKey)break;s?(u.key=h.C0.ESC+"[1;"+(s+1)+"C",u.key===h.C0.ESC+"[1;3C"&&(u.key=h.C0.ESC+(m?"f":"[1;5C"))):u.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(a.metaKey)break;s?(u.key=h.C0.ESC+"[1;"+(s+1)+"A",m||u.key!==h.C0.ESC+"[1;3A"||(u.key=h.C0.ESC+"[1;5A")):u.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(a.metaKey)break;s?(u.key=h.C0.ESC+"[1;"+(s+1)+"B",m||u.key!==h.C0.ESC+"[1;3B"||(u.key=h.C0.ESC+"[1;5B")):u.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(u.key=h.C0.ESC+"[2~");break;case 46:u.key=s?h.C0.ESC+"[3;"+(s+1)+"~":h.C0.ESC+"[3~";break;case 36:u.key=s?h.C0.ESC+"[1;"+(s+1)+"H":f?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:u.key=s?h.C0.ESC+"[1;"+(s+1)+"F":f?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:a.shiftKey?u.type=2:a.ctrlKey?u.key=h.C0.ESC+"[5;"+(s+1)+"~":u.key=h.C0.ESC+"[5~";break;case 34:a.shiftKey?u.type=3:a.ctrlKey?u.key=h.C0.ESC+"[6;"+(s+1)+"~":u.key=h.C0.ESC+"[6~";break;case 112:u.key=s?h.C0.ESC+"[1;"+(s+1)+"P":h.C0.ESC+"OP";break;case 113:u.key=s?h.C0.ESC+"[1;"+(s+1)+"Q":h.C0.ESC+"OQ";break;case 114:u.key=s?h.C0.ESC+"[1;"+(s+1)+"R":h.C0.ESC+"OR";break;case 115:u.key=s?h.C0.ESC+"[1;"+(s+1)+"S":h.C0.ESC+"OS";break;case 116:u.key=s?h.C0.ESC+"[15;"+(s+1)+"~":h.C0.ESC+"[15~";break;case 117:u.key=s?h.C0.ESC+"[17;"+(s+1)+"~":h.C0.ESC+"[17~";break;case 118:u.key=s?h.C0.ESC+"[18;"+(s+1)+"~":h.C0.ESC+"[18~";break;case 119:u.key=s?h.C0.ESC+"[19;"+(s+1)+"~":h.C0.ESC+"[19~";break;case 120:u.key=s?h.C0.ESC+"[20;"+(s+1)+"~":h.C0.ESC+"[20~";break;case 121:u.key=s?h.C0.ESC+"[21;"+(s+1)+"~":h.C0.ESC+"[21~";break;case 122:u.key=s?h.C0.ESC+"[23;"+(s+1)+"~":h.C0.ESC+"[23~";break;case 123:u.key=s?h.C0.ESC+"[24;"+(s+1)+"~":h.C0.ESC+"[24~";break;default:if(!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)if(m&&!y||!a.altKey||a.metaKey)!m||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.keyCode>=48&&a.key.length===1?u.key=a.key:a.key&&a.ctrlKey&&(a.key==="_"&&(u.key=h.C0.US),a.key==="@"&&(u.key=h.C0.NUL)):a.keyCode===65&&(u.type=1);else{const o=_[a.keyCode],t=o==null?void 0:o[a.shiftKey?1:0];if(t)u.key=h.C0.ESC+t;else if(a.keyCode>=65&&a.keyCode<=90){const n=a.ctrlKey?a.keyCode-64:a.keyCode+32;let d=String.fromCharCode(n);a.shiftKey&&(d=d.toUpperCase()),u.key=h.C0.ESC+d}else if(a.keyCode===32)u.key=h.C0.ESC+(a.ctrlKey?h.C0.NUL:" ");else if(a.key==="Dead"&&a.code.startsWith("Key")){let n=a.code.slice(3,4);a.shiftKey||(n=n.toLowerCase()),u.key=h.C0.ESC+n,u.cancel=!0}}else a.keyCode>=65&&a.keyCode<=90?u.key=String.fromCharCode(a.keyCode-64):a.keyCode===32?u.key=h.C0.NUL:a.keyCode>=51&&a.keyCode<=55?u.key=String.fromCharCode(a.keyCode-51+27):a.keyCode===56?u.key=h.C0.DEL:a.keyCode===219?u.key=h.C0.ESC:a.keyCode===220?u.key=h.C0.FS:a.keyCode===221&&(u.key=h.C0.GS)}return u}},482:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},i.utf32ToString=function(l,h=0,_=l.length){let a="";for(let f=h;f<_;++f){let m=l[f];m>65535?(m-=65536,a+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):a+=String.fromCharCode(m)}return a},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,h){const _=l.length;if(!_)return 0;let a=0,f=0;if(this._interim){const m=l.charCodeAt(f++);56320<=m&&m<=57343?h[a++]=1024*(this._interim-55296)+m-56320+65536:(h[a++]=this._interim,h[a++]=m),this._interim=0}for(let m=f;m<_;++m){const y=l.charCodeAt(m);if(55296<=y&&y<=56319){if(++m>=_)return this._interim=y,a;const u=l.charCodeAt(m);56320<=u&&u<=57343?h[a++]=1024*(y-55296)+u-56320+65536:(h[a++]=y,h[a++]=u)}else y!==65279&&(h[a++]=y)}return a}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,h){const _=l.length;if(!_)return 0;let a,f,m,y,u=0,s=0,o=0;if(this.interim[0]){let d=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let b,w=0;for(;(b=63&this.interim[++w])&&w<4;)S<<=6,S|=b;const v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=v-w;for(;o<C;){if(o>=_)return 0;if(b=l[o++],(192&b)!=128){o--,d=!0;break}this.interim[w++]=b,S<<=6,S|=63&b}d||(v===2?S<128?o--:h[u++]=S:v===3?S<2048||S>=55296&&S<=57343||S===65279||(h[u++]=S):S<65536||S>1114111||(h[u++]=S)),this.interim.fill(0)}const t=_-4;let n=o;for(;n<_;){for(;!(!(n<t)||128&(a=l[n])||128&(f=l[n+1])||128&(m=l[n+2])||128&(y=l[n+3]));)h[u++]=a,h[u++]=f,h[u++]=m,h[u++]=y,n+=4;if(a=l[n++],a<128)h[u++]=a;else if((224&a)==192){if(n>=_)return this.interim[0]=a,u;if(f=l[n++],(192&f)!=128){n--;continue}if(s=(31&a)<<6|63&f,s<128){n--;continue}h[u++]=s}else if((240&a)==224){if(n>=_)return this.interim[0]=a,u;if(f=l[n++],(192&f)!=128){n--;continue}if(n>=_)return this.interim[0]=a,this.interim[1]=f,u;if(m=l[n++],(192&m)!=128){n--;continue}if(s=(15&a)<<12|(63&f)<<6|63&m,s<2048||s>=55296&&s<=57343||s===65279)continue;h[u++]=s}else if((248&a)==240){if(n>=_)return this.interim[0]=a,u;if(f=l[n++],(192&f)!=128){n--;continue}if(n>=_)return this.interim[0]=a,this.interim[1]=f,u;if(m=l[n++],(192&m)!=128){n--;continue}if(n>=_)return this.interim[0]=a,this.interim[1]=f,this.interim[2]=m,u;if(y=l[n++],(192&y)!=128){n--;continue}if(s=(7&a)<<18|(63&f)<<12|(63&m)<<6|63&y,s<65536||s>1114111)continue;h[u++]=s}}return u}}},225:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const h=l(1480),_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;i.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let m=0;m<_.length;++m)f.fill(0,_[m][0],_[m][1]+1)}}wcwidth(m){return m<32?0:m<127?1:m<65536?f[m]:function(y,u){let s,o=0,t=u.length-1;if(y<u[0][0]||y>u[t][1])return!1;for(;t>=o;)if(s=o+t>>1,y>u[s][1])o=s+1;else{if(!(y<u[s][0]))return!0;t=s-1}return!1}(m,a)?0:m>=131072&&m<=196605||m>=196608&&m<=262141?2:1}charProperties(m,y){let u=this.wcwidth(m),s=u===0&&y!==0;if(s){const o=h.UnicodeService.extractWidth(y);o===0?s=!1:o>u&&(u=o)}return h.UnicodeService.createPropertyValue(0,u,s)}}},5981:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const h=l(8460),_=l(844);class a extends _.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let u;for(this._isSyncWriting=!0;u=this._writeBuffer.shift();){this._action(u);const s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(y)}_innerWrite(m=0,y=!0){const u=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const s=this._writeBuffer[this._bufferOffset],o=this._action(s,y);if(o){const n=d=>Date.now()-u>=12?setTimeout(()=>this._innerWrite(0,d)):this._innerWrite(u,d);return void o.catch(d=>(queueMicrotask(()=>{throw d}),Promise.resolve(!1))).then(n)}const t=this._callbacks[this._bufferOffset];if(t&&t(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=a},5941:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function _(a,f){const m=a.toString(16),y=m.length<2?"0"+m:m;switch(f){case 4:return m[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}i.parseColor=function(a){if(!a)return;let f=a.toLowerCase();if(f.indexOf("rgb:")===0){f=f.slice(4);const m=l.exec(f);if(m){const y=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/y*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/y*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/y*255)]}}else if(f.indexOf("#")===0&&(f=f.slice(1),h.exec(f)&&[3,6,9,12].includes(f.length))){const m=f.length/3,y=[0,0,0];for(let u=0;u<3;++u){const s=parseInt(f.slice(m*u,m*u+m),16);y[u]=m===1?s<<4:m===2?s:m===3?s>>4:s>>8}return y}},i.toRgbString=function(a,f=16){const[m,y,u]=a;return`rgb:${_(m,f)}/${_(y,f)}/${_(u,f)}`}},5770:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const h=l(482),_=l(8742),a=l(5770),f=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}registerHandler(y,u){this._handlers[y]===void 0&&(this._handlers[y]=[]);const s=this._handlers[y];return s.push(u),{dispose:()=>{const o=s.indexOf(u);o!==-1&&s.splice(o,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0}hook(y,u){if(this.reset(),this._ident=y,this._active=this._handlers[y]||f,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(u);else this._handlerFb(this._ident,"HOOK",u)}put(y,u,s){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(y,u,s);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(y,u,s))}unhook(y,u=!0){if(this._active.length){let s=!1,o=this._active.length-1,t=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,s=u,t=this._stack.fallThrough,this._stack.paused=!1),!t&&s===!1){for(;o>=0&&(s=this._active[o].unhook(y),s!==!0);o--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,s;o--}for(;o>=0;o--)if(s=this._active[o].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",y);this._active=f,this._ident=0}};const m=new _.Params;m.addParam(0),i.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=m,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():m,this._data="",this._hitLimit=!1}put(y,u,s){this._hitLimit||(this._data+=(0,h.utf32ToString)(y,u,s),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let u=!1;if(this._hitLimit)u=!1;else if(y&&(u=this._handler(this._data,this._params),u instanceof Promise))return u.then(s=>(this._params=m,this._data="",this._hitLimit=!1,s));return this._params=m,this._data="",this._hitLimit=!1,u}}},2015:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const h=l(844),_=l(8742),a=l(6242),f=l(6351);class m{constructor(o){this.table=new Uint8Array(o)}setDefault(o,t){this.table.fill(o<<4|t)}add(o,t,n,d){this.table[t<<8|o]=n<<4|d}addMany(o,t,n,d){for(let S=0;S<o.length;S++)this.table[t<<8|o[S]]=n<<4|d}}i.TransitionTable=m;const y=160;i.VT500_TRANSITION_TABLE=function(){const s=new m(4095),o=Array.apply(null,Array(256)).map((w,v)=>v),t=(w,v)=>o.slice(w,v),n=t(32,127),d=t(0,24);d.push(25),d.push.apply(d,t(28,32));const S=t(0,14);let b;for(b in s.setDefault(1,0),s.addMany(n,0,2,0),S)s.addMany([24,26,153,154],b,3,0),s.addMany(t(128,144),b,3,0),s.addMany(t(144,152),b,3,0),s.add(156,b,0,0),s.add(27,b,11,1),s.add(157,b,4,8),s.addMany([152,158,159],b,0,7),s.add(155,b,11,3),s.add(144,b,11,9);return s.addMany(d,0,3,0),s.addMany(d,1,3,1),s.add(127,1,0,1),s.addMany(d,8,0,8),s.addMany(d,3,3,3),s.add(127,3,0,3),s.addMany(d,4,3,4),s.add(127,4,0,4),s.addMany(d,6,3,6),s.addMany(d,5,3,5),s.add(127,5,0,5),s.addMany(d,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(n,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(t(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(n,7,0,7),s.addMany(d,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(t(64,127),3,7,0),s.addMany(t(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(t(48,60),4,8,4),s.addMany(t(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(t(32,64),6,0,6),s.add(127,6,0,6),s.addMany(t(64,127),6,0,0),s.addMany(t(32,48),3,9,5),s.addMany(t(32,48),5,9,5),s.addMany(t(48,64),5,0,6),s.addMany(t(64,127),5,7,0),s.addMany(t(32,48),4,9,5),s.addMany(t(32,48),1,9,2),s.addMany(t(32,48),2,9,2),s.addMany(t(48,127),2,10,0),s.addMany(t(48,80),1,10,0),s.addMany(t(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(t(96,127),1,10,0),s.add(80,1,11,9),s.addMany(d,9,0,9),s.add(127,9,0,9),s.addMany(t(28,32),9,0,9),s.addMany(t(32,48),9,9,12),s.addMany(t(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(d,11,0,11),s.addMany(t(32,128),11,0,11),s.addMany(t(28,32),11,0,11),s.addMany(d,10,0,10),s.add(127,10,0,10),s.addMany(t(28,32),10,0,10),s.addMany(t(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(t(32,48),10,9,12),s.addMany(d,12,0,12),s.add(127,12,0,12),s.addMany(t(28,32),12,0,12),s.addMany(t(32,48),12,9,12),s.addMany(t(48,64),12,0,11),s.addMany(t(64,127),12,12,13),s.addMany(t(64,127),10,12,13),s.addMany(t(64,127),9,12,13),s.addMany(d,13,13,13),s.addMany(n,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(y,0,2,0),s.add(y,8,5,8),s.add(y,6,0,6),s.add(y,11,0,11),s.add(y,13,13,13),s}();class u extends h.Disposable{constructor(o=i.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,n,d)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,n)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new a.OscParser),this._dcsParser=this.register(new f.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,t=[64,126]){let n=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=o.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<o.intermediates.length;++S){const b=o.intermediates.charCodeAt(S);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=b}}if(o.final.length!==1)throw new Error("final must be a single byte");const d=o.final.charCodeAt(0);if(t[0]>d||d>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return n<<=8,n|=d,n}identToString(o){const t=[];for(;o;)t.push(String.fromCharCode(255&o)),o>>=8;return t.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,t){const n=this._identifier(o,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);const d=this._escHandlers[n];return d.push(t),{dispose:()=>{const S=d.indexOf(t);S!==-1&&d.splice(S,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,t){this._executeHandlers[o.charCodeAt(0)]=t}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,t){const n=this._identifier(o);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);const d=this._csiHandlers[n];return d.push(t),{dispose:()=>{const S=d.indexOf(t);S!==-1&&d.splice(S,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,t){return this._dcsParser.registerHandler(this._identifier(o),t)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,t){return this._oscParser.registerHandler(o,t)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,t,n,d,S){this._parseStack.state=o,this._parseStack.handlers=t,this._parseStack.handlerPos=n,this._parseStack.transition=d,this._parseStack.chunkPos=S}parse(o,t,n){let d,S=0,b=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const v=this._parseStack.handlers;let C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&C>-1){for(;C>=0&&(d=v[C](this._params),d!==!0);C--)if(d instanceof Promise)return this._parseStack.handlerPos=C,d}this._parseStack.handlers=[];break;case 4:if(n===!1&&C>-1){for(;C>=0&&(d=v[C](),d!==!0);C--)if(d instanceof Promise)return this._parseStack.handlerPos=C,d}this._parseStack.handlers=[];break;case 6:if(S=o[this._parseStack.chunkPos],d=this._dcsParser.unhook(S!==24&&S!==26,n),d)return d;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=o[this._parseStack.chunkPos],d=this._oscParser.end(S!==24&&S!==26,n),d)return d;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let v=w;v<t;++v){switch(S=o[v],b=this._transitions.table[this.currentState<<8|(S<160?S:y)],b>>4){case 2:for(let A=v+1;;++A){if(A>=t||(S=o[A])<32||S>126&&S<y){this._printHandler(o,v,A),v=A-1;break}if(++A>=t||(S=o[A])<32||S>126&&S<y){this._printHandler(o,v,A),v=A-1;break}if(++A>=t||(S=o[A])<32||S>126&&S<y){this._printHandler(o,v,A),v=A-1;break}if(++A>=t||(S=o[A])<32||S>126&&S<y){this._printHandler(o,v,A),v=A-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const C=this._csiHandlers[this._collect<<8|S];let R=C?C.length-1:-1;for(;R>=0&&(d=C[R](this._params),d!==!0);R--)if(d instanceof Promise)return this._preserveStack(3,C,R,b,v),d;R<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingJoinState=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++v<t&&(S=o[v])>47&&S<60);v--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const O=this._escHandlers[this._collect<<8|S];let P=O?O.length-1:-1;for(;P>=0&&(d=O[P](),d!==!0);P--)if(d instanceof Promise)return this._preserveStack(4,O,P,b,v),d;P<0&&this._escHandlerFb(this._collect<<8|S),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let A=v+1;;++A)if(A>=t||(S=o[A])===24||S===26||S===27||S>127&&S<y){this._dcsParser.put(o,v,A),v=A-1;break}break;case 14:if(d=this._dcsParser.unhook(S!==24&&S!==26),d)return this._preserveStack(6,[],0,b,v),d;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=v+1;;A++)if(A>=t||(S=o[A])<32||S>127&&S<y){this._oscParser.put(o,v,A),v=A-1;break}break;case 6:if(d=this._oscParser.end(S!==24&&S!==26),d)return this._preserveStack(5,[],0,b,v),d;S===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&b}}}i.EscapeSequenceParser=u},6242:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const h=l(5770),_=l(482),a=[];i.OscParser=class{constructor(){this._state=0,this._active=a,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(f,m){this._handlers[f]===void 0&&(this._handlers[f]=[]);const y=this._handlers[f];return y.push(m),{dispose:()=>{const u=y.indexOf(m);u!==-1&&y.splice(u,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}reset(){if(this._state===2)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].end(!1);this._stack.paused=!1,this._active=a,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||a,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].start();else this._handlerFb(this._id,"START")}_put(f,m,y){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(f,m,y);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(f,m,y))}start(){this.reset(),this._state=1}put(f,m,y){if(this._state!==3){if(this._state===1)for(;m<y;){const u=f[m++];if(u===59){this._state=2,this._start();break}if(u<48||57<u)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+u-48}this._state===2&&y-m>0&&this._put(f,m,y)}}end(f,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,u=this._active.length-1,s=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,y=m,s=this._stack.fallThrough,this._stack.paused=!1),!s&&y===!1){for(;u>=0&&(y=this._active[u].end(f),y!==!0);u--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,y;u--}for(;u>=0;u--)if(y=this._active[u].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",f);this._active=a,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(f){this._handler=f,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(f,m,y){this._hitLimit||(this._data+=(0,_.utf32ToString)(f,m,y),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(f){let m=!1;if(this._hitLimit)m=!1;else if(f&&(m=this._handler(this._data),m instanceof Promise))return m.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,m}}},8742:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const l=2147483647;class h{static fromArray(a){const f=new h;if(!a.length)return f;for(let m=Array.isArray(a[0])?1:0;m<a.length;++m){const y=a[m];if(Array.isArray(y))for(let u=0;u<y.length;++u)f.addSubParam(y[u]);else f.addParam(y)}return f}constructor(a=32,f=32){if(this.maxLength=a,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(a),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const a=new h(this.maxLength,this.maxSubParamsLength);return a.params.set(this.params),a.length=this.length,a._subParams.set(this._subParams),a._subParamsLength=this._subParamsLength,a._subParamsIdx.set(this._subParamsIdx),a._rejectDigits=this._rejectDigits,a._rejectSubDigits=this._rejectSubDigits,a._digitIsSub=this._digitIsSub,a}toArray(){const a=[];for(let f=0;f<this.length;++f){a.push(this.params[f]);const m=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];y-m>0&&a.push(Array.prototype.slice.call(this._subParams,m,y))}return a}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(a){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=a>l?l:a}}addSubParam(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=a>l?l:a,this._subParamsIdx[this.length-1]++}}hasSubParams(a){return(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)>0}getSubParams(a){const f=this._subParamsIdx[a]>>8,m=255&this._subParamsIdx[a];return m-f>0?this._subParams.subarray(f,m):null}getSubParamsAll(){const a={};for(let f=0;f<this.length;++f){const m=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];y-m>0&&(a[f]=this._subParams.slice(m,y))}return a}addDigit(a){let f;if(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,y=m[f-1];m[f-1]=~y?Math.min(10*y+a,l):a}}i.Params=h},5741:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,h){const _={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(_),h.dispose=()=>this._wrappedAddonDispose(_),h.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let h=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===l){h=_;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(h,1)}}},8771:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const h=l(3785),_=l(511);i.BufferApiView=class{constructor(a,f){this._buffer=a,this.type=f}init(a){return this._buffer=a,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(a){const f=this._buffer.lines.get(a);if(f)return new h.BufferLineApiView(f)}getNullCell(){return new _.CellData}}},3785:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const h=l(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,a){if(!(_<0||_>=this._line.length))return a?(this._line.loadCell(_,a),a):this._line.loadCell(_,new h.CellData)}translateToString(_,a,f){return this._line.translateToString(_,a,f)}}},8285:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const h=l(8771),_=l(8460),a=l(844);class f extends a.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=f},7975:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,h){return this._core.registerCsiHandler(l,_=>h(_.toArray()))}addCsiHandler(l,h){return this.registerCsiHandler(l,h)}registerDcsHandler(l,h){return this._core.registerDcsHandler(l,(_,a)=>h(_,a.toArray()))}addDcsHandler(l,h){return this.registerDcsHandler(l,h)}registerEscHandler(l,h){return this._core.registerEscHandler(l,h)}addEscHandler(l,h){return this.registerEscHandler(l,h)}registerOscHandler(l,h){return this._core.registerOscHandler(l,h)}addOscHandler(l,h){return this.registerOscHandler(l,h)}}},7090:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(k,i,l){var h=this&&this.__decorate||function(s,o,t,n){var d,S=arguments.length,b=S<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(s,o,t,n);else for(var w=s.length-1;w>=0;w--)(d=s[w])&&(b=(S<3?d(b):S>3?d(o,t,b):d(o,t))||b);return S>3&&b&&Object.defineProperty(o,t,b),b},_=this&&this.__param||function(s,o){return function(t,n){o(t,n,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const a=l(8460),f=l(844),m=l(5295),y=l(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let u=i.BufferService=class extends f.Disposable{get buffer(){return this.buffers.active}constructor(s){super(),this.isUserScrolling=!1,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(s.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(s.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(s,this))}resize(s,o){this.cols=s,this.rows=o,this.buffers.resize(s,o),this._onResize.fire({cols:s,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(s,o=!1){const t=this.buffer;let n;n=this._cachedBlankLine,n&&n.length===this.cols&&n.getFg(0)===s.fg&&n.getBg(0)===s.bg||(n=t.getBlankLine(s,o),this._cachedBlankLine=n),n.isWrapped=o;const d=t.ybase+t.scrollTop,S=t.ybase+t.scrollBottom;if(t.scrollTop===0){const b=t.lines.isFull;S===t.lines.length-1?b?t.lines.recycle().copyFrom(n):t.lines.push(n.clone()):t.lines.splice(S+1,0,n.clone()),b?this.isUserScrolling&&(t.ydisp=Math.max(t.ydisp-1,0)):(t.ybase++,this.isUserScrolling||t.ydisp++)}else{const b=S-d+1;t.lines.shiftElements(d+1,b-1,-1),t.lines.set(S,n.clone())}this.isUserScrolling||(t.ydisp=t.ybase),this._onScroll.fire(t.ydisp)}scrollLines(s,o,t){const n=this.buffer;if(s<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else s+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);const d=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+s,n.ybase),0),d!==n.ydisp&&(o||this._onScroll.fire(n.ydisp))}};i.BufferService=u=h([_(0,y.IOptionsService)],u)},7994:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,h){this._charsets[l]=h,this.glevel===l&&(this.charset=h)}}},1753:function(k,i,l){var h=this&&this.__decorate||function(n,d,S,b){var w,v=arguments.length,C=v<3?d:b===null?b=Object.getOwnPropertyDescriptor(d,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,d,S,b);else for(var R=n.length-1;R>=0;R--)(w=n[R])&&(C=(v<3?w(C):v>3?w(d,S,C):w(d,S))||C);return v>3&&C&&Object.defineProperty(d,S,C),C},_=this&&this.__param||function(n,d){return function(S,b){d(S,b,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const a=l(2585),f=l(8460),m=l(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:n=>n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)},VT200:{events:19,restrict:n=>n.action!==32},DRAG:{events:23,restrict:n=>n.action!==32||n.button!==3},ANY:{events:31,restrict:n=>!0}};function u(n,d){let S=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(S|=64,S|=n.action):(S|=3&n.button,4&n.button&&(S|=64),8&n.button&&(S|=128),n.action===32?S|=32:n.action!==0||d||(S|=3)),S}const s=String.fromCharCode,o={DEFAULT:n=>{const d=[u(n,!1)+32,n.col+32,n.row+32];return d[0]>255||d[1]>255||d[2]>255?"":`\x1B[M${s(d[0])}${s(d[1])}${s(d[2])}`},SGR:n=>{const d=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${u(n,!0)};${n.col};${n.row}${d}`},SGR_PIXELS:n=>{const d=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${u(n,!0)};${n.x};${n.y}${d}`}};let t=i.CoreMouseService=class extends m.Disposable{constructor(n,d){super(),this._bufferService=n,this._coreService=d,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new f.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(y))this.addProtocol(S,y[S]);for(const S of Object.keys(o))this.addEncoding(S,o[S]);this.reset()}addProtocol(n,d){this._protocols[n]=d}addEncoding(n,d){this._encodings[n]=d}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(n){if(!this._protocols[n])throw new Error(`unknown protocol "${n}"`);this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(n){if(!this._encodings[n])throw new Error(`unknown encoding "${n}"`);this._activeEncoding=n}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,n,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(n))return!1;const d=this._encodings[this._activeEncoding](n);return d&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(d):this._coreService.triggerDataEvent(d,!0)),this._lastEvent=n,!0}explainEvents(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}}_equalEvents(n,d,S){if(S){if(n.x!==d.x||n.y!==d.y)return!1}else if(n.col!==d.col||n.row!==d.row)return!1;return n.button===d.button&&n.action===d.action&&n.ctrl===d.ctrl&&n.alt===d.alt&&n.shift===d.shift}};i.CoreMouseService=t=h([_(0,a.IBufferService),_(1,a.ICoreService)],t)},6975:function(k,i,l){var h=this&&this.__decorate||function(t,n,d,S){var b,w=arguments.length,v=w<3?n:S===null?S=Object.getOwnPropertyDescriptor(n,d):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(t,n,d,S);else for(var C=t.length-1;C>=0;C--)(b=t[C])&&(v=(w<3?b(v):w>3?b(n,d,v):b(n,d))||v);return w>3&&v&&Object.defineProperty(n,d,v),v},_=this&&this.__param||function(t,n){return function(d,S){n(d,S,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const a=l(1439),f=l(8460),m=l(844),y=l(2585),u=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=i.CoreService=class extends m.Disposable{constructor(t,n,d){super(),this._bufferService=t,this._logService=n,this._optionsService=d,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new f.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new f.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,a.clone)(u),this.decPrivateModes=(0,a.clone)(s)}reset(){this.modes=(0,a.clone)(u),this.decPrivateModes=(0,a.clone)(s)}triggerDataEvent(t,n=!1){if(this._optionsService.rawOptions.disableStdin)return;const d=this._bufferService.buffer;n&&this._optionsService.rawOptions.scrollOnUserInput&&d.ybase!==d.ydisp&&this._onRequestScrollToBottom.fire(),n&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`,()=>t.split("").map(S=>S.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`,()=>t.split("").map(n=>n.charCodeAt(0))),this._onBinary.fire(t))}};i.CoreService=o=h([_(0,y.IBufferService),_(1,y.ILogService),_(2,y.IOptionsService)],o)},9074:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const h=l(8055),_=l(8460),a=l(844),f=l(6106);let m=0,y=0;class u extends a.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new f.SortedList(t=>t==null?void 0:t.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,a.toDisposable)(()=>this.reset()))}registerDecoration(t){if(t.marker.isDisposed)return;const n=new s(t);if(n){const d=n.marker.onDispose(()=>n.dispose());n.onDispose(()=>{n&&(this._decorations.delete(n)&&this._onDecorationRemoved.fire(n),d.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}reset(){for(const t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,n,d){let S=0,b=0;for(const w of this._decorations.getKeyIterator(n))S=w.options.x??0,b=S+(w.options.width??1),t>=S&&t<b&&(!d||(w.options.layer??"bottom")===d)&&(yield w)}forEachDecorationAtCell(t,n,d,S){this._decorations.forEachByKey(n,b=>{m=b.options.x??0,y=m+(b.options.width??1),t>=m&&t<y&&(!d||(b.options.layer??"bottom")===d)&&S(b)})}}i.DecorationService=u;class s extends a.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(t){super(),this.options=t,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const h=l(2585),_=l(8343);class a{constructor(...m){this._entries=new Map;for(const[y,u]of m)this.set(y,u)}set(m,y){const u=this._entries.get(m);return this._entries.set(m,y),u}forEach(m){for(const[y,u]of this._entries.entries())m(y,u)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}i.ServiceCollection=a,i.InstantiationService=class{constructor(){this._services=new a,this._services.set(h.IInstantiationService,this)}setService(f,m){this._services.set(f,m)}getService(f){return this._services.get(f)}createInstance(f,...m){const y=(0,_.getServiceDependencies)(f).sort((o,t)=>o.index-t.index),u=[];for(const o of y){const t=this._services.get(o.id);if(!t)throw new Error(`[createInstance] ${f.name} depends on UNKNOWN service ${o.id}.`);u.push(t)}const s=y.length>0?y[0].index:m.length;if(m.length!==s)throw new Error(`[createInstance] First service dependency of ${f.name} at position ${s+1} conflicts with ${m.length} static arguments`);return new f(...m,...u)}}},7866:function(k,i,l){var h=this&&this.__decorate||function(s,o,t,n){var d,S=arguments.length,b=S<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,t):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(s,o,t,n);else for(var w=s.length-1;w>=0;w--)(d=s[w])&&(b=(S<3?d(b):S>3?d(o,t,b):d(o,t))||b);return S>3&&b&&Object.defineProperty(o,t,b),b},_=this&&this.__param||function(s,o){return function(t,n){o(t,n,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const a=l(844),f=l(2585),m={trace:f.LogLevelEnum.TRACE,debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF};let y,u=i.LogService=class extends a.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let o=0;o<s.length;o++)typeof s[o]=="function"&&(s[o]=s[o]())}_log(s,o,t){this._evalLazyOptionalParams(t),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...t)}trace(s,...o){var t;this._logLevel<=f.LogLevelEnum.TRACE&&this._log(((t=this._optionsService.options.logger)==null?void 0:t.trace.bind(this._optionsService.options.logger))??console.log,s,o)}debug(s,...o){var t;this._logLevel<=f.LogLevelEnum.DEBUG&&this._log(((t=this._optionsService.options.logger)==null?void 0:t.debug.bind(this._optionsService.options.logger))??console.log,s,o)}info(s,...o){var t;this._logLevel<=f.LogLevelEnum.INFO&&this._log(((t=this._optionsService.options.logger)==null?void 0:t.info.bind(this._optionsService.options.logger))??console.info,s,o)}warn(s,...o){var t;this._logLevel<=f.LogLevelEnum.WARN&&this._log(((t=this._optionsService.options.logger)==null?void 0:t.warn.bind(this._optionsService.options.logger))??console.warn,s,o)}error(s,...o){var t;this._logLevel<=f.LogLevelEnum.ERROR&&this._log(((t=this._optionsService.options.logger)==null?void 0:t.error.bind(this._optionsService.options.logger))??console.error,s,o)}};i.LogService=u=h([_(0,f.IOptionsService)],u),i.setTraceLogger=function(s){y=s},i.traceCall=function(s,o,t){if(typeof t.value!="function")throw new Error("not supported");const n=t.value;t.value=function(...d){if(y.logLevel!==f.LogLevelEnum.TRACE)return n.apply(this,d);y.trace(`GlyphRenderer#${n.name}(${d.map(b=>JSON.stringify(b)).join(", ")})`);const S=n.apply(this,d);return y.trace(`GlyphRenderer#${n.name} return`,S),S}}},7302:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const h=l(8460),_=l(844),a=l(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:a.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const f=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends _.Disposable{constructor(u){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const s={...i.DEFAULT_OPTIONS};for(const o in u)if(o in s)try{const t=u[o];s[o]=this._sanitizeAndValidateOption(o,t)}catch(t){console.error(t)}this.rawOptions=s,this.options={...s},this._setupOptions(),this.register((0,_.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(u,s){return this.onOptionChange(o=>{o===u&&s(this.rawOptions[u])})}onMultipleOptionChange(u,s){return this.onOptionChange(o=>{u.indexOf(o)!==-1&&s()})}_setupOptions(){const u=o=>{if(!(o in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},s=(o,t)=>{if(!(o in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);t=this._sanitizeAndValidateOption(o,t),this.rawOptions[o]!==t&&(this.rawOptions[o]=t,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const t={get:u.bind(this,o),set:s.bind(this,o)};Object.defineProperty(this.options,o,t)}}_sanitizeAndValidateOption(u,s){switch(u){case"cursorStyle":if(s||(s=i.DEFAULT_OPTIONS[u]),!function(o){return o==="block"||o==="underline"||o==="bar"}(s))throw new Error(`"${s}" is not a valid value for ${u}`);break;case"wordSeparator":s||(s=i.DEFAULT_OPTIONS[u]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=f.includes(s)?s:i.DEFAULT_OPTIONS[u];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${u} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(`${u} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${u} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${u} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{}}return s}}i.OptionsService=m},2660:function(k,i,l){var h=this&&this.__decorate||function(m,y,u,s){var o,t=arguments.length,n=t<3?y:s===null?s=Object.getOwnPropertyDescriptor(y,u):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(m,y,u,s);else for(var d=m.length-1;d>=0;d--)(o=m[d])&&(n=(t<3?o(n):t>3?o(y,u,n):o(y,u))||n);return t>3&&n&&Object.defineProperty(y,u,n),n},_=this&&this.__param||function(m,y){return function(u,s){y(u,s,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const a=l(2585);let f=i.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const y=this._bufferService.buffer;if(m.id===void 0){const d=y.addMarker(y.ybase+y.y),S={data:m,id:this._nextId++,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(S,d)),this._dataByLinkId.set(S.id,S),S.id}const u=m,s=this._getEntryIdKey(u),o=this._entriesWithId.get(s);if(o)return this.addLineToLink(o.id,y.ybase+y.y),o.id;const t=y.addMarker(y.ybase+y.y),n={id:this._nextId++,key:this._getEntryIdKey(u),data:u,lines:[t]};return t.onDispose(()=>this._removeMarkerFromLink(n,t)),this._entriesWithId.set(n.key,n),this._dataByLinkId.set(n.id,n),n.id}addLineToLink(m,y){const u=this._dataByLinkId.get(m);if(u&&u.lines.every(s=>s.line!==y)){const s=this._bufferService.buffer.addMarker(y);u.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(u,s))}}getLinkData(m){var y;return(y=this._dataByLinkId.get(m))==null?void 0:y.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,y){const u=m.lines.indexOf(y);u!==-1&&(m.lines.splice(u,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};i.OscLinkService=f=h([_(0,a.IBufferService)],f)},8343:(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const l="di$target",h="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[h]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const a=function(f,m,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(u,s,o){s[l]===s?s[h].push({id:u,index:o}):(s[h]=[{id:u,index:o}],s[l]=s)})(a,f,y)};return a.toString=()=>_,i.serviceRegistry.set(_,a),a}},2585:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const h=l(8343);var _;i.IBufferService=(0,h.createDecorator)("BufferService"),i.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),i.ICoreService=(0,h.createDecorator)("CoreService"),i.ICharsetService=(0,h.createDecorator)("CharsetService"),i.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(a){a[a.TRACE=0]="TRACE",a[a.DEBUG=1]="DEBUG",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,h.createDecorator)("LogService"),i.IOptionsService=(0,h.createDecorator)("OptionsService"),i.IOscLinkService=(0,h.createDecorator)("OscLinkService"),i.IUnicodeService=(0,h.createDecorator)("UnicodeService"),i.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(k,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const h=l(8460),_=l(225);class a{static extractShouldJoin(m){return(1&m)!=0}static extractWidth(m){return m>>1&3}static extractCharKind(m){return m>>3}static createPropertyValue(m,y,u=!1){return(16777215&m)<<3|(3&y)<<1|(u?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const m=new _.UnicodeV6;this.register(m),this._active=m.version,this._activeProvider=m}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(m){if(!this._providers[m])throw new Error(`unknown Unicode version "${m}"`);this._active=m,this._activeProvider=this._providers[m],this._onChange.fire(m)}register(m){this._providers[m.version]=m}wcwidth(m){return this._activeProvider.wcwidth(m)}getStringCellWidth(m){let y=0,u=0;const s=m.length;for(let o=0;o<s;++o){let t=m.charCodeAt(o);if(55296<=t&&t<=56319){if(++o>=s)return y+this.wcwidth(t);const S=m.charCodeAt(o);56320<=S&&S<=57343?t=1024*(t-55296)+S-56320+65536:y+=this.wcwidth(S)}const n=this.charProperties(t,u);let d=a.extractWidth(n);a.extractShouldJoin(n)&&(d-=a.extractWidth(u)),y+=d,u=n}return y}charProperties(m,y){return this._activeProvider.charProperties(m,y)}}i.UnicodeService=a}},p={};function g(k){var i=p[k];if(i!==void 0)return i.exports;var l=p[k]={exports:{}};return c[k].call(l.exports,l,l.exports,g),l.exports}var x={};return(()=>{var k=x;Object.defineProperty(k,"__esModule",{value:!0}),k.Terminal=void 0;const i=g(9042),l=g(3236),h=g(844),_=g(5741),a=g(8285),f=g(7975),m=g(7090),y=["cols","rows"];class u extends h.Disposable{constructor(o){super(),this._core=this.register(new l.Terminal(o)),this._addonManager=this.register(new _.AddonManager),this._publicOptions={...this._core.options};const t=d=>this._core.options[d],n=(d,S)=>{this._checkReadonlyOptions(d),this._core.options[d]=S};for(const d in this._core.options){const S={get:t.bind(this,d),set:n.bind(this,d)};Object.defineProperty(this._publicOptions,d,S)}}_checkReadonlyOptions(o){if(y.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new f.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const t in o)this._publicOptions[t]=o[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(o,t=!0){this._core.input(o,t)}resize(o,t){this._verifyIntegers(o,t),this._core.resize(o,t)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}attachCustomWheelEventHandler(o){this._core.attachCustomWheelEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){return this._checkProposedApi(),this._verifyPositiveIntegers(o.x??0,o.width??0,o.height??0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,t,n){this._verifyIntegers(o,t,n),this._core.select(o,t,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,t){this._verifyIntegers(o,t),this._core.selectLines(o,t)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,t){this._core.write(o,t)}writeln(o,t){this._core.write(o),this._core.write(`\r
`,t)}paste(o){this._core.paste(o)}refresh(o,t){this._verifyIntegers(o,t),this._core.refresh(o,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return i}_verifyIntegers(...o){for(const t of o)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const t of o)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}k.Terminal=u})(),x})())})(Fr);var En=Fr.exports;const Wi=e=>{if(e.type==="keydown"){if(e.key==="Backspace")return{content:"\b \b",bool:!1};if(e.key==="Tab")return e.preventDefault(),{content:"    ",bool:!1};if(e.ctrlKey&&e.key==="c")return{content:"^C",bool:!0}}return e.key==="CapsLock"||e.key==="Tab"||e.key==="Escape"||e.key==="Delete"||e.key==="Insert"||e.key==="Home"||e.key==="End"||e.key==="PageUp"||e.key==="PageDown"||e.key==="F1"||e.key==="F2"||e.key==="F3"||e.key==="F4"||e.key==="F5"||e.key==="F6"||e.key==="F7"||e.key==="F8"||e.key==="F9"||e.key==="F10"||e.key==="F11"||e.key==="F12"||e.key==="F13"||e.key==="F14"||e.key==="F15"||e.key==="F16"||e.key==="F17"||e.key==="F18"||e.key==="F19"||e.key==="F20"||e.key==="F21"||e.key==="F22"||e.key==="F23"||e.key==="F24"||e.key==="F25"||e.key==="F26"||e.key==="F27"||e.key==="F28"||e.key==="F29"||e.key==="F30"||e.key==="F31"||e.key==="F32"||e.key==="F33"||e.key==="F34"||e.key==="F35"||e.key==="Dead"||e.key==="PrintScreen"||e.key==="ScrollLock"||e.key==="Pause"||e.key==="BrowserBack"||e.key==="BrowserForward"||e.key==="BrowserRefresh"||e.key==="BrowserStop"||e.key==="BrowserSearch"||e.key==="BrowserFavorites"||e.key==="BrowserHome"||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?{content:"",bool:!1}:{content:"",bool:!0}},lt=ye(void 0),Ln=({children:e})=>{const[r,c]=ce(void 0);return ae(()=>{window.JStudio.settings.get().then(p=>{c(p)})},[]),M(lt.Provider,{value:r,children:e})},Rn=({project:e})=>{const{terminal:r}=te(lt),c=ie(null),p=new En.Terminal({...r,scrollOnUserInput:!0,rows:30});return ae(()=>{console.log(p.options),p.open(c.current),p.write(e.path+">");let g="",x=e.path;return p.attachCustomKeyEventHandler(k=>{const{content:i,bool:l}=Wi(k);return p.write(i),i==="\b \b"&&g.length>0&&(g=g.slice(0,-1)),l}),window.JStudio.terminal.onLog().then(k=>{p.attachCustomKeyEventHandler(()=>!1),k.type==="cwd"&&(x=k.message),p.write(k.message),p.write(`\r
`),k.type==="finish"&&(p.attachCustomKeyEventHandler(i=>{const{content:l,bool:h}=Wi(i);return p.write(l),l==="\b \b"&&g.length>0&&(g=g.slice(0,-1)),h}),p.write(x+">"))}),p.onKey(k=>{k.key==="\r"?(p.write(`\r
`),g!==""?(window.JStudio.terminal.run({command:g.split(" ")[0],args:g.split(" ").slice(1)||[],cwd:x}),g=""):p.write(x+">")):(g+=k.key,p.write(k.key),console.log(g))}),()=>{p.dispose()}},[]),M("div",{class:"w-full flex h-full ",style:{background:r.theme.background},children:[M("div",{ref:c,class:"w-full h-full",id:"terminal"}),M("div",{class:"flex flex-col  w-10",children:[M("button",{children:M("i",{class:"bi bi-terminal-plus row-span-1.5"})}),M("button",{children:M("i",{class:"bi bi-list"})}),M("button",{children:M("i",{class:"bi bi-exclamation-triangle text-red-500"})}),M("button",{children:M("i",{class:"bi bi-exclamation-triangle text-yellow-500"})}),M("button",{children:M("i",{class:"bi bi-info-circle text-blue-500"})})]})]})},Dn=()=>M("div",{children:"Animations"}),An=()=>M("div",{children:"Scenes"});function Bn(e,r,c){return r in e?Object.defineProperty(e,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[r]=c,e}function $i(e,r){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);r&&(p=p.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),c.push.apply(c,p)}return c}function Ni(e){for(var r=1;r<arguments.length;r++){var c=arguments[r]!=null?arguments[r]:{};r%2?$i(Object(c),!0).forEach(function(p){Bn(e,p,c[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):$i(Object(c)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(c,p))})}return e}function On(e,r){if(e==null)return{};var c={},p=Object.keys(e),g,x;for(x=0;x<p.length;x++)g=p[x],!(r.indexOf(g)>=0)&&(c[g]=e[g]);return c}function Mn(e,r){if(e==null)return{};var c=On(e,r),p,g;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(e);for(g=0;g<x.length;g++)p=x[g],!(r.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(e,p)&&(c[p]=e[p])}return c}function Tn(e,r){return Pn(e)||In(e,r)||Hn(e,r)||Fn()}function Pn(e){if(Array.isArray(e))return e}function In(e,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var c=[],p=!0,g=!1,x=void 0;try{for(var k=e[Symbol.iterator](),i;!(p=(i=k.next()).done)&&(c.push(i.value),!(r&&c.length===r));p=!0);}catch(l){g=!0,x=l}finally{try{!p&&k.return!=null&&k.return()}finally{if(g)throw x}}return c}}function Hn(e,r){if(e){if(typeof e=="string")return Ui(e,r);var c=Object.prototype.toString.call(e).slice(8,-1);if(c==="Object"&&e.constructor&&(c=e.constructor.name),c==="Map"||c==="Set")return Array.from(e);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Ui(e,r)}}function Ui(e,r){(r==null||r>e.length)&&(r=e.length);for(var c=0,p=new Array(r);c<r;c++)p[c]=e[c];return p}function Fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jn(e,r,c){return r in e?Object.defineProperty(e,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[r]=c,e}function zi(e,r){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);r&&(p=p.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),c.push.apply(c,p)}return c}function qi(e){for(var r=1;r<arguments.length;r++){var c=arguments[r]!=null?arguments[r]:{};r%2?zi(Object(c),!0).forEach(function(p){jn(e,p,c[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):zi(Object(c)).forEach(function(p){Object.defineProperty(e,p,Object.getOwnPropertyDescriptor(c,p))})}return e}function Wn(){for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return function(p){return r.reduceRight(function(g,x){return x(g)},p)}}function Je(e){return function r(){for(var c=this,p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];return g.length>=e.length?e.apply(this,g):function(){for(var k=arguments.length,i=new Array(k),l=0;l<k;l++)i[l]=arguments[l];return r.apply(c,[].concat(g,i))}}}function yt(e){return{}.toString.call(e).includes("Object")}function $n(e){return!Object.keys(e).length}function st(e){return typeof e=="function"}function Nn(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function Un(e,r){return yt(r)||Ee("changeType"),Object.keys(r).some(function(c){return!Nn(e,c)})&&Ee("changeField"),r}function zn(e){st(e)||Ee("selectorType")}function qn(e){st(e)||yt(e)||Ee("handlerType"),yt(e)&&Object.values(e).some(function(r){return!st(r)})&&Ee("handlersType")}function Kn(e){e||Ee("initialIsRequired"),yt(e)||Ee("initialType"),$n(e)&&Ee("initialContent")}function Vn(e,r){throw new Error(e[r]||e.default)}var Gn={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Ee=Je(Vn)(Gn),pt={changes:Un,selector:zn,handler:qn,initial:Kn};function Jn(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pt.initial(e),pt.handler(r);var c={current:e},p=Je(Zn)(c,r),g=Je(Yn)(c),x=Je(pt.changes)(e),k=Je(Xn)(c);function i(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(_){return _};return pt.selector(h),h(c.current)}function l(h){Wn(p,g,x,k)(h)}return[i,l]}function Xn(e,r){return st(r)?r(e.current):r}function Yn(e,r){return e.current=qi(qi({},e.current),r),r}function Zn(e,r,c){return st(r)?r(e.current):Object.keys(c).forEach(function(p){var g;return(g=r[p])===null||g===void 0?void 0:g.call(r,e.current[p])}),c}var Qn={create:Jn},eo={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function to(e){return function r(){for(var c=this,p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];return g.length>=e.length?e.apply(this,g):function(){for(var k=arguments.length,i=new Array(k),l=0;l<k;l++)i[l]=arguments[l];return r.apply(c,[].concat(g,i))}}}function io(e){return{}.toString.call(e).includes("Object")}function ro(e){return e||Ki("configIsRequired"),io(e)||Ki("configType"),e.urls?(so(),{paths:{vs:e.urls.monacoBase}}):e}function so(){console.warn(Wr.deprecation)}function no(e,r){throw new Error(e[r]||e.default)}var Wr={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ki=to(no)(Wr),oo={config:ro},ao=function(){for(var r=arguments.length,c=new Array(r),p=0;p<r;p++)c[p]=arguments[p];return function(g){return c.reduceRight(function(x,k){return k(x)},g)}};function $r(e,r){return Object.keys(r).forEach(function(c){r[c]instanceof Object&&e[c]&&Object.assign(r[c],$r(e[c],r[c]))}),Ni(Ni({},e),r)}var lo={type:"cancelation",msg:"operation is manually canceled"};function Tt(e){var r=!1,c=new Promise(function(p,g){e.then(function(x){return r?g(lo):p(x)}),e.catch(g)});return c.cancel=function(){return r=!0},c}var co=Qn.create({config:eo,isInitialized:!1,resolve:null,reject:null,monaco:null}),Nr=Tn(co,2),ct=Nr[0],Et=Nr[1];function ho(e){var r=oo.config(e),c=r.monaco,p=Mn(r,["monaco"]);Et(function(g){return{config:$r(g.config,p),monaco:c}})}function uo(){var e=ct(function(r){var c=r.monaco,p=r.isInitialized,g=r.resolve;return{monaco:c,isInitialized:p,resolve:g}});if(!e.isInitialized){if(Et({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Tt(Pt);if(window.monaco&&window.monaco.editor)return Ur(window.monaco),e.resolve(window.monaco),Tt(Pt);ao(po,fo)(vo)}return Tt(Pt)}function po(e){return document.body.appendChild(e)}function _o(e){var r=document.createElement("script");return e&&(r.src=e),r}function fo(e){var r=ct(function(p){var g=p.config,x=p.reject;return{config:g,reject:x}}),c=_o("".concat(r.config.paths.vs,"/loader.js"));return c.onload=function(){return e()},c.onerror=r.reject,c}function vo(){var e=ct(function(c){var p=c.config,g=c.resolve,x=c.reject;return{config:p,resolve:g,reject:x}}),r=window.require;r.config(e.config),r(["vs/editor/editor.main"],function(c){Ur(c),e.resolve(c)},function(c){e.reject(c)})}function Ur(e){ct().monaco||Et({monaco:e})}function mo(){return ct(function(e){var r=e.monaco;return r})}var Pt=new Promise(function(e,r){return Et({resolve:e,reject:r})}),zr={config:ho,init:uo,__getMonacoInstance:mo},go={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},It=go,So={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},bo=So;function yo({children:e}){return Be.createElement("div",{style:bo.container},e)}var wo=yo,Co=wo;function xo({width:e,height:r,isEditorReady:c,loading:p,_ref:g,className:x,wrapperProps:k}){return Be.createElement("section",{style:{...It.wrapper,width:e,height:r},...k},!c&&Be.createElement(Co,null,p),Be.createElement("div",{ref:g,style:{...It.fullWidth,...!c&&It.hide},className:x}))}var ko=xo,qr=ot(ko);function Eo(e){ae(e,[])}var Kr=Eo;function Lo(e,r,c=!0){let p=ie(!0);ae(p.current||!c?()=>{p.current=!1}:e,r)}var ue=Lo;function et(){}function je(e,r,c,p){return Ro(e,p)||Do(e,r,c,p)}function Ro(e,r){return e.editor.getModel(Vr(e,r))}function Do(e,r,c,p){return e.editor.createModel(r,c,p?Vr(e,p):void 0)}function Vr(e,r){return e.Uri.parse(r)}function Ao({original:e,modified:r,language:c,originalLanguage:p,modifiedLanguage:g,originalModelPath:x,modifiedModelPath:k,keepCurrentOriginalModel:i=!1,keepCurrentModifiedModel:l=!1,theme:h="light",loading:_="Loading...",options:a={},height:f="100%",width:m="100%",className:y,wrapperProps:u={},beforeMount:s=et,onMount:o=et}){let[t,n]=ce(!1),[d,S]=ce(!0),b=ie(null),w=ie(null),v=ie(null),C=ie(o),R=ie(s),O=ie(!1);Kr(()=>{let H=zr.init();return H.then($=>(w.current=$)&&S(!1)).catch($=>($==null?void 0:$.type)!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>b.current?F():H.cancel()}),ue(()=>{if(b.current&&w.current){let H=b.current.getOriginalEditor(),$=je(w.current,e||"",p||c||"text",x||"");$!==H.getModel()&&H.setModel($)}},[x],t),ue(()=>{if(b.current&&w.current){let H=b.current.getModifiedEditor(),$=je(w.current,r||"",g||c||"text",k||"");$!==H.getModel()&&H.setModel($)}},[k],t),ue(()=>{let H=b.current.getModifiedEditor();H.getOption(w.current.editor.EditorOption.readOnly)?H.setValue(r||""):r!==H.getValue()&&(H.executeEdits("",[{range:H.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),H.pushUndoStop())},[r],t),ue(()=>{var H,$;($=(H=b.current)==null?void 0:H.getModel())==null||$.original.setValue(e||"")},[e],t),ue(()=>{let{original:H,modified:$}=b.current.getModel();w.current.editor.setModelLanguage(H,p||c||"text"),w.current.editor.setModelLanguage($,g||c||"text")},[c,p,g],t),ue(()=>{var H;(H=w.current)==null||H.editor.setTheme(h)},[h],t),ue(()=>{var H;(H=b.current)==null||H.updateOptions(a)},[a],t);let P=me(()=>{var q;if(!w.current)return;R.current(w.current);let H=je(w.current,e||"",p||c||"text",x||""),$=je(w.current,r||"",g||c||"text",k||"");(q=b.current)==null||q.setModel({original:H,modified:$})},[c,r,g,e,p,x,k]),A=me(()=>{var H;!O.current&&v.current&&(b.current=w.current.editor.createDiffEditor(v.current,{automaticLayout:!0,...a}),P(),(H=w.current)==null||H.editor.setTheme(h),n(!0),O.current=!0)},[a,h,P]);ae(()=>{t&&C.current(b.current,w.current)},[t]),ae(()=>{!d&&!t&&A()},[d,t,A]);function F(){var $,q,U,E;let H=($=b.current)==null?void 0:$.getModel();i||((q=H==null?void 0:H.original)==null||q.dispose()),l||((U=H==null?void 0:H.modified)==null||U.dispose()),(E=b.current)==null||E.dispose()}return Be.createElement(qr,{width:m,height:f,isEditorReady:t,loading:_,_ref:v,className:y,wrapperProps:u})}var Bo=Ao;ot(Bo);function Oo(e){let r=ie();return ae(()=>{r.current=e},[e]),r.current}var Mo=Oo,_t=new Map;function To({defaultValue:e,defaultLanguage:r,defaultPath:c,value:p,language:g,path:x,theme:k="light",line:i,loading:l="Loading...",options:h={},overrideServices:_={},saveViewState:a=!0,keepCurrentModel:f=!1,width:m="100%",height:y="100%",className:u,wrapperProps:s={},beforeMount:o=et,onMount:t=et,onChange:n,onValidate:d=et}){let[S,b]=ce(!1),[w,v]=ce(!0),C=ie(null),R=ie(null),O=ie(null),P=ie(t),A=ie(o),F=ie(),H=ie(p),$=Mo(x),q=ie(!1),U=ie(!1);Kr(()=>{let D=zr.init();return D.then(T=>(C.current=T)&&v(!1)).catch(T=>(T==null?void 0:T.type)!=="cancelation"&&console.error("Monaco initialization: error:",T)),()=>R.current?B():D.cancel()}),ue(()=>{var T,W,z,G;let D=je(C.current,e||p||"",r||g||"",x||c||"");D!==((T=R.current)==null?void 0:T.getModel())&&(a&&_t.set($,(W=R.current)==null?void 0:W.saveViewState()),(z=R.current)==null||z.setModel(D),a&&((G=R.current)==null||G.restoreViewState(_t.get(x))))},[x],S),ue(()=>{var D;(D=R.current)==null||D.updateOptions(h)},[h],S),ue(()=>{!R.current||p===void 0||(R.current.getOption(C.current.editor.EditorOption.readOnly)?R.current.setValue(p):p!==R.current.getValue()&&(U.current=!0,R.current.executeEdits("",[{range:R.current.getModel().getFullModelRange(),text:p,forceMoveMarkers:!0}]),R.current.pushUndoStop(),U.current=!1))},[p],S),ue(()=>{var T,W;let D=(T=R.current)==null?void 0:T.getModel();D&&g&&((W=C.current)==null||W.editor.setModelLanguage(D,g))},[g],S),ue(()=>{var D;i!==void 0&&((D=R.current)==null||D.revealLine(i))},[i],S),ue(()=>{var D;(D=C.current)==null||D.editor.setTheme(k)},[k],S);let E=me(()=>{var D;if(!(!O.current||!C.current)&&!q.current){A.current(C.current);let T=x||c,W=je(C.current,p||e||"",r||g||"",T||"");R.current=(D=C.current)==null?void 0:D.editor.create(O.current,{model:W,automaticLayout:!0,...h},_),a&&R.current.restoreViewState(_t.get(T)),C.current.editor.setTheme(k),i!==void 0&&R.current.revealLine(i),b(!0),q.current=!0}},[e,r,c,p,g,x,h,_,a,k,i]);ae(()=>{S&&P.current(R.current,C.current)},[S]),ae(()=>{!w&&!S&&E()},[w,S,E]),H.current=p,ae(()=>{var D,T;S&&n&&((D=F.current)==null||D.dispose(),F.current=(T=R.current)==null?void 0:T.onDidChangeModelContent(W=>{U.current||n(R.current.getValue(),W)}))},[S,n]),ae(()=>{if(S){let D=C.current.editor.onDidChangeMarkers(T=>{var z;let W=(z=R.current.getModel())==null?void 0:z.uri;if(W&&T.find(G=>G.path===W.path)){let G=C.current.editor.getModelMarkers({resource:W});d==null||d(G)}});return()=>{D==null||D.dispose()}}return()=>{}},[S,d]);function B(){var D,T;(D=F.current)==null||D.dispose(),f?a&&_t.set(x,R.current.saveViewState()):(T=R.current.getModel())==null||T.dispose(),R.current.dispose()}return Be.createElement(qr,{width:m,height:y,isEditorReady:S,loading:l,_ref:O,className:u,wrapperProps:s})}var Po=To,Io=ot(Po);const Gr={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(Gr);const Jr={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(Jr);var _e=function(e,r,c,p){if(c==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!p:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?p:c==="a"?p.call(e):p?p.value:r.get(e)},He,Xe,De;class Ho{constructor(...r){He.set(this,new Map),Xe.set(this,new Map),De.set(this,new Map);for(const c of r)this.define(c)}define(r,c=!1){for(let[p,g]of Object.entries(r)){p=p.toLowerCase(),g=g.map(i=>i.toLowerCase()),_e(this,De,"f").has(p)||_e(this,De,"f").set(p,new Set);const x=_e(this,De,"f").get(p);let k=!0;for(let i of g){const l=i.startsWith("*");if(i=l?i.slice(1):i,x==null||x.add(i),k&&_e(this,Xe,"f").set(p,i),k=!1,l)continue;const h=_e(this,He,"f").get(i);if(h&&h!=p&&!c)throw new Error(`"${p} -> ${i}" conflicts with "${h} -> ${i}". Pass \`force=true\` to override this definition.`);_e(this,He,"f").set(i,p)}}return this}getType(r){if(typeof r!="string")return null;const c=r.replace(/^.*[/\\]/,"").toLowerCase(),p=c.replace(/^.*\./,"").toLowerCase(),g=c.length<r.length;return!(p.length<c.length-1)&&g?null:_e(this,He,"f").get(p)??null}getExtension(r){var c;return typeof r!="string"?null:(r=(c=r==null?void 0:r.split)==null?void 0:c.call(r,";")[0],(r&&_e(this,Xe,"f").get(r.trim().toLowerCase()))??null)}getAllExtensions(r){return typeof r!="string"?null:_e(this,De,"f").get(r.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(const r of _e(this,De,"f").values())Object.freeze(r);return this}_getTestState(){return{types:_e(this,He,"f"),extensions:_e(this,Xe,"f")}}}He=new WeakMap,Xe=new WeakMap,De=new WeakMap;const Fo=new Ho(Jr,Gr)._freeze(),jo=({file:e})=>{const r=te(lt),[c,p]=ce("javascript"),[g,x]=ce("// code here"),k=r==null?void 0:r.ide,i=()=>{e&&(e.content=g,window.JStudio.ide.saveFile(e))};return ae(()=>{if(e){const l=Fo.getType(e.path)||"javascript";p(l),x(e.content||"// code here")}},[e]),ae(()=>{const l=h=>{if(h.key==="s"&&(h.ctrlKey||h.metaKey)){if(h.preventDefault(),!e)return;i()}};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[e,g]),k?M("div",{class:"h-full w-full overflow-hidden flex flex-col",tabIndex:0,children:[M("div",{class:"flex   items-center flex-1 px-2",children:M("button",{class:"text-lg",onClick:()=>{e&&i()},children:M("i",{class:"bi bi-floppy"})})}),M(Io,{onChange:l=>{l&&x(l)},height:"95%",language:c,value:g,theme:k.theme,options:{fontSize:k.fontSize,fontFamily:k.fontFamily,tabSize:k.tabSize}})]}):M("div",{children:"Loading..."})},Wo=({})=>{document.title="Editor - JStudio";const e=JSON.parse(localStorage.getItem("currentProject")),[r,c]=ce(void 0);return ae(()=>{window.JStudio.ide.onOpenFile().then(p=>{console.log(p),c(p)})},[]),M("div",{class:"flex flex-col h-screen w-screen",id:"editor",children:[M("header",{className:"h-[50px] w-full px-3",children:M("nav",{className:"flex justify-between items-center h-full w-full text-white",children:[M("div",{className:"flex items-center",children:M("h1",{className:"text-xl ml-4",children:"JStudio"})}),M("div",{className:"flex items-center gap-5",children:M("button",{class:"hover:bg-[var(--primary)] rounded-md w-fit h-fit",onClick:()=>{window.JStudio.terminal.run({command:"npm",args:["start"],cwd:e.path})},children:M("i",{class:"bi bi-play"})})})]})}),M("main",{class:"grid grid-rows-5 grid-cols-5 h-[90vh]",children:[M(Ve,{elements:[{component:M(ji,{}),title:"Objects"},{component:M(An,{}),title:"Escenas"}],rows:"3",cols:"1"}),M(Ve,{elements:[{component:M(Cn,{}),title:"Render"},{component:M(jo,{file:r}),title:"IDE"}],rows:"4",cols:"3"}),M(Ve,{elements:[{component:M(ji,{}),title:"test1"}],rows:"3",cols:"1"}),M(Ve,{elements:[{component:M(kn,{}),title:"Files"}],rows:"2",cols:"1"}),M(Ve,{elements:[{component:M(Rn,{project:e}),title:"Console"},{component:M(Dn,{}),title:"Animations"}],rows:"1",cols:"4"})]})]})},$o=()=>{const e=Mr(),r=JSON.parse(localStorage.getItem("projects"))||[],c=JSON.parse(localStorage.getItem("currentProject"))||{};document.title="Start - Project Manager";const p=g=>{localStorage.setItem("currentProject",JSON.stringify(g)),e("/editor")};return M(de,{children:M("div",{class:" p-3 h-screen w-screen",children:[M("div",{class:"flex justify-between items-center",children:[M("div",{class:"flex items-center relative",children:[M("i",{class:"bi bi-search absolute left-[1rem] text-base"}),M("input",{id:"query",class:"w-full h-[45px] pl-[2.5rem] rounded-md outline-none text-[#bdbecb] bg-[#313131] border-solid border-[0.1rem] border-white",type:"search",placeholder:"Search...",name:"searchBar"})]}),M("div",{class:"flex justify-evenly w-[300px]",children:[M(bn,{target:"_blank",to:"/new-project",class:"border-white border-solid border-[1px] p-3 flex justify-center items-center rounded-md w-[74px] h-[74px]",children:M("i",{class:"bi bi-folder-plus text-3xl"})}),M("button",{class:"border-white border-solid border-[1px] p-3 rounded-md w-[74px] h-[74px]",onClick:()=>{window.JStudio.init({create:!1}).then(g=>{const x=[...new Set([...r,g])];localStorage.setItem("projects",JSON.stringify(x)),p(g)})},children:M("i",{class:"bi bi-folder text-3xl"})})]})]}),M("div",{children:[M("div",{children:[M("h1",{children:"Recent Projects"}),M("button",{class:"flex flex-col items-center justify-between p-2 border-white border-solid border-[1px] rounded-md",onClick:()=>{window.location.href="/editor"},children:[M("i",{class:"bi bi-folder text-3xl"}),M("p",{children:c.name}),M("p",{class:"text-xs",children:c.path})]})]}),M("div",{children:[M("h1",{children:"All Projects"}),r.map((g,x)=>M("button",{class:"flex flex-col items-center justify-between p-2 border-white border-solid border-[1px] rounded-md",onClick:()=>{p(g)},children:[M("i",{class:"bi bi-folder text-3xl"}),M("p",{children:g.name}),M("p",{class:"text-xs",children:g.path})]},x))]})]})]})})},No=()=>(document.title="New Project - Project Manager",M("form",{action:"",class:"flex flex-col",children:[M("h1",{children:"Name"}),M("input",{type:"text",name:"name",id:"name"}),M("h1",{children:"Platform"}),M("select",{name:"platform",id:"platform",children:[M("option",{value:"html",children:"Desktop"}),M("option",{value:"mobile",children:"Mobile"}),M("option",{value:"web",children:"Web"})]}),M("h1",{children:"Description"}),M("textarea",{name:"description",id:"description",rows:4}),M("button",{type:"submit",children:"Create Project"})]})),Uo=({name:e,value:r,id:c,label:p,required:g,onChange:x,hidden:k})=>M("div",{hidden:k,children:[p?M("label",{class:"block text-sm font-medium mb-1",htmlFor:c,children:p}):null,M("input",{onChange:x,required:g,type:"color",name:e,value:r,id:c,class:"w-full mt-1 bg-[var(--primary)] border border-[var(--secondary)] rounded-md shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm px-2"})]}),zo=({name:e,value:r,id:c,label:p,checked:g,required:x,onChange:k,hidden:i})=>M("div",{hidden:i,children:[p?M("label",{class:"block text-sm font-medium mb-1",htmlFor:c,children:p}):null,M("input",{required:x,type:"checkbox",name:e,value:r,id:c,class:"",checked:g,onChange:k})]}),Ye=({name:e,value:r,id:c,label:p,required:g,onChange:x,hidden:k})=>M("div",{hidden:k,children:[p?M("label",{class:"block text-sm font-medium mb-1",htmlFor:c,children:p}):null,M("input",{onChange:x,required:g,type:"text",name:e,value:r,id:c,class:"w-full mt-1 bg-[var(--primary)] border border-[var(--secondary)] rounded-md shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm px-2"})]}),qo=({name:e,value:r,id:c,label:p,required:g,pathHidden:x,onChange:k,hidden:i})=>{const[l,h]=ce(null);return M("div",{hidden:i,children:[p?M("p",{class:"text-sm font-medium mb-1 ",children:p}):null,M("label",{htmlFor:c,class:"cursor-pointer w-fit h-fit p-2 bg-[var(--primary)] rounded-md",children:M("i",{class:"bi bi-folder"})}),M("input",{onChange:_=>{var f;const a=(f=document.getElementById(c).files)==null?void 0:f.item(0);a&&h(a),k&&k(_)},class:"opacity-0",type:"file",name:e,value:r,id:c,required:g,hidden:!0}),M("p",{children:x?"":l==null?void 0:l.path})]})},Xr=({name:e,value:r,id:c,label:p,required:g,onChange:x,hidden:k})=>M("div",{hidden:k,children:[p?M("label",{class:"block text-sm font-medium mb-1",htmlFor:c,children:p}):null,M("input",{onChange:x,type:"number",name:e,value:r,id:c,class:"w-full mt-1 bg-[var(--primary)] border border-[var(--secondary)] rounded-md shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm px-2",required:g})]}),Ht=({checked:e,name:r,value:c,id:p,label:g,required:x,onClick:k,onChange:i,hidden:l})=>M("div",{hidden:l,children:[g?M("label",{class:"block text-sm font-medium mb-1",htmlFor:p,children:g}):null,M("input",{onChange:i,checked:e,type:"radio",name:r,value:c,id:p,class:"cursor-pointer",required:x,onClick:k})]}),Gt=({name:e,value:r,id:c,children:p,label:g,required:x,onChange:k,hidden:i})=>M("div",{hidden:i,children:[g?M("label",{class:"block text-sm font-medium mb-1",htmlFor:c,children:g}):null,M("select",{onChange:k,required:x,name:e,value:r,id:c,class:"block w-full mt-1 bg-[var(--primary)] border border-[var(--secondary)] border-solid  rounded-md shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm ",children:p})]}),Ko=({children:e})=>M("button",{type:"submit",class:"bg-[var(--primary)] hover:bg-[var(--secondary)]  font-bold py-2 px-4 rounded",children:e}),Vo=({settings:e})=>M("div",{id:"general",children:[M("h2",{class:"text-2xl font-bold mb-4",children:"General"}),M(Gt,{label:"Theme",name:"theme",id:"general-theme",value:e==null?void 0:e.theme,children:[M("option",{value:"light",children:"Light"}),M("option",{value:"dark",children:"Dark"})]}),M(Gt,{label:"Icon Pack",name:"icon-pack-name",id:"icon-pack-name",value:e.icons.name,children:[M("option",{value:"BootstrapIcons",children:"BootstrapIcons"}),M("option",{value:"TablerIcons",children:"TablerIcons"}),M("option",{value:"octicons",children:"Octicons"})]})]}),Go=({settings:e})=>M("div",{id:"file",children:[M("h2",{class:"text-2xl font-bold mb-4",children:"Files"}),e&&Object.keys(e).map((r,c)=>{const p=e[r].executable;return M("div",{class:"my-3",id:r,children:[M("h1",{children:r.capitalize()}),M("div",{class:"flex gap-2 ",onChange:g=>{const x=g.target.value,i=document.getElementById(`${r}Path`).parentElement;i&&(x==="custom"?i.removeAttribute("hidden"):i.setAttribute("hidden","true"))},children:[M(Ht,{name:r,id:`${r}Radio`,checked:p==="default",value:"default",label:"Default"}),M(Ht,{name:r,id:`${r}Radio`,checked:p==="system",value:"system",label:"System"}),M(Ht,{name:r,id:`${r}Radio`,checked:p!=="default"&&p!=="system",value:"custom",label:"Custom"})]}),M(qo,{hidden:!0,name:`${r}Path`,id:`${r}Path`,label:"Executable",value:p})]},c)}),M("div",{class:"w-fit h-fit p-2 cursor-pointer bg-gray-800",onClick:()=>{window.JStudio.openJson(e)},children:"Open Json"})]}),Jo=({settings:e})=>M("div",{id:"ide",children:[M("h2",{class:"text-2xl font-bold mb-4",children:"IDE"}),M("div",{class:"mb-4",children:[M("label",{htmlFor:"autosave",class:"block text-sm font-medium  mb-1",children:"Autosave"}),M("input",{type:"checkbox",name:"autosave",checked:e==null?void 0:e.autosave,class:"h-4 w-4 rounded "})]}),M("div",{class:"mb-4",children:M(Gt,{label:"Theme",name:"ide-theme",id:"ide-theme",value:e==null?void 0:e.theme,children:[M("option",{value:"vs",children:"Visual Studio"}),M("option",{value:"vs-dark",children:"Visual Studio Dark"}),M("option",{value:"hc-black",children:"High Contrast Black"})]})}),M("div",{class:"mb-4",children:M(Xr,{label:"Font Size",name:"font-size",id:"font-size",value:e==null?void 0:e.fontSize})}),M("div",{class:"mb-4",children:M(Ye,{label:"Font Family",name:"font-family",id:"font-family",value:e==null?void 0:e.fontFamily})})]}),Xo=({settings:e})=>M("div",{class:"flex flex-col gap-2",id:"terminal",children:[M("h2",{children:"Terminal settings"}),M("p",{children:"Font"}),M(Ye,{id:"terminal-font",name:"terminal-font",label:"Font Family",value:e.fontFamily}),M(Xr,{id:"terminal-font-size",name:"terminal-font-size",label:"Font Size",value:e.fontSize}),M(Ye,{id:"terminal-font-weight",name:"terminal-font-weight",label:"Font Weight",value:e.fontWeight}),M("p",{children:"Cursor"}),M(Ye,{id:"terminal-cursor-style",name:"terminal-cursor-style",label:"Cursor Style",value:e.cursorStyle}),M(zo,{id:"terminal-cursor-blink",name:"terminal-cursor-blink",label:"Cursor Blink",checked:e.cursorBlink}),M(Ye,{id:"terminal-cursor-width",name:"terminal-cursor-width",label:"Cursor Width",value:e.cursorWidth}),M("details",{children:[M("summary",{children:M("p",{children:"Colors"})}),M("div",{children:Object.keys(e.theme).map(r=>{const c=e.theme[r];return M("div",{class:"w-[50px]",children:M(Uo,{id:`terminal-color-${r}`,name:`terminal-color-${r}`,label:r,value:c})})})})]})]}),Yo=({})=>{const[e,r]=ce({});return ae(()=>{const c=document.getElementById("general"),p=document.getElementById("file"),g=document.getElementById("ide"),x=document.getElementById("terminal"),k=l=>Array.from(l==null?void 0:l.querySelectorAll("[id]")).filter(h=>h.getAttribute("type")!=="radio"&&h.getAttribute("type")!=="file").map(h=>h.id),i={general:k(c),file:k(p),ide:k(g),terminal:k(x)};console.log(i),r(i)},[]),M("nav",{class:"w-[200px] py-6 border-r-[var(--text)] max-h-[100vh] overflow-y-auto  border-solid border-r-[1px]",children:Object.keys(e).map((c,p)=>M("details",{children:[M("summary",{children:M("a",{href:`#${c}`,onClick:g=>{var k;const x=(k=g.target.parentElement)==null?void 0:k.parentElement;console.log(x),x.open=!x.open},children:c})}),M("div",{class:"flex flex-col ml-3",children:e[c].map((g,x)=>M("a",{href:`#${g}`,children:g.replaceAll("-"," ").replace("Path","")},x))})]},p))})},Zo=()=>{document.title="Config - JStudio";const e=te(lt),r=c=>{if(!e)return;c.preventDefault();const p=c.currentTarget,g=new FormData(p),x=i=>g.get(i)==="custom"?g.get(`${i}Path`).path:g.get(i),k={general:{icons:{name:g.get("icon-pack-name"),path:g.get("icon-pack-file")},theme:g.get("theme")},ide:{theme:g.get("ide-theme"),autosave:g.get("autosave")==="on",fontSize:parseInt(g.get("font-size")),fontFamily:g.get("font-family"),tabSize:4},files:{image:{executable:x("image")},code:{executable:x("code")},audio:{executable:x("audio")}},terminal:{fontFamily:g.get("terminal-font"),fontSize:parseInt(g.get("terminal-font-size")),fontWeight:g.get("terminal-font-weight"),cursorStyle:g.get("terminal-cursor-style"),cursorWidth:parseInt(g.get("terminal-cursor-width")),cursorBlinking:g.get("terminal-cursor-blink")==="on",theme:{background:g.get("terminal-color-background"),foreground:g.get("terminal-color-foreground"),black:g.get("terminal-color-black"),red:g.get("terminal-color-red"),green:g.get("terminal-color-green"),yellow:g.get("terminal-color-yellow"),blue:g.get("terminal-color-blue"),magenta:g.get("terminal-color-magenta"),cyan:g.get("terminal-color-cyan"),white:g.get("terminal-color-white"),brightBlack:g.get("terminal-color-brightBlack"),brightRed:g.get("terminal-color-brightRed"),brightGreen:g.get("terminal-color-brightGreen"),brightYellow:g.get("terminal-color-brightYellow"),brightBlue:g.get("terminal-color-brightBlue"),brightMagenta:g.get("terminal-color-brightMagenta"),brightCyan:g.get("terminal-color-brightCyan"),brightWhite:g.get("terminal-color-brightWhite")}}};window.JStudio.settings.set(k)};return e?M("div",{class:"flex h-screen p-2 gap-2",children:[M(Yo,{}),M("form",{class:"px-2 flex flex-col h-full py-6 rounded-md overflow-y-scroll w-full",onSubmit:r,children:[M("h1",{children:"Settings"}),M(Vo,{settings:e==null?void 0:e.general}),M(Go,{settings:e==null?void 0:e.files}),M(Jo,{settings:e==null?void 0:e.ide}),M(Xo,{settings:e==null?void 0:e.terminal}),M("div",{class:"fixed bottom-0 right-0 m-2",children:M(Ko,{children:"Save"})})]})]}):M("div",{children:"Loading..."})};function Qo(){var c,p;const e=te(lt),r=e==null?void 0:e.general;if(r)if(r.theme==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches;(c=document.documentElement)==null||c.setAttribute("data-theme",g?"dark":"light")}else(p=document.documentElement)==null||p.setAttribute("data-theme",r.theme);return M(hn,{children:[M(Ge,{path:"/",element:M($o,{})}),M(Ge,{path:"/editor",element:M(Wo,{})}),M(Ge,{path:"/new-project",element:M(No,{})}),M(Ge,{path:"/settings",element:M(Zo,{})})]})}We(M(mn,{children:M(Ln,{children:M(Qo,{})})}),document.getElementById("app"));
